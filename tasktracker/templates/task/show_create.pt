<metal:macro define-macro="show_create">

<div tal:replace="structure python:h.secure_form_remote_tag(url=h.url_for(controller='task', action='create'),
      			     success='return doneAddingTask(request);', failure='failedAddingTask', html=dict(id='add_task_form'))" />

Add task or sub-task:

<br/><br/>
<input type="hidden" name="task_listID" tal:attributes="value c/task_listID" />
<input type="hidden" name="parentID" tal:attributes="value c/parentID" />
<input type="hidden" name="siblingID" value="0" />

<div id="hideable_title_label" style="display:none;">title</div>
<div tal:replace="structure python: h.text_field_r('oldtask', 'title', size=80, tabindex=1)" />

<div tal:condition="python:c.tasklist.hasFeature('private_tasks')" style="display:inline;">
  <div tal:replace="structure python: h.check_box_r('oldtask', 'private', tabindex=3)" /> make this task private
  <div tal:replace="structure python: h.help('Private tasks can only be seen by list administrators')" />
</div>

<p>
<div id="hideable_add_description">
<a id="show_description" href="#nevermind">
Add description</a>
</div>

<div id="description_field" style="display:none;">
<div id="hideable_description_label">description</div>
<div tal:replace="structure python: h.text_area_r('oldtask', 'text', rows=5, cols=80, tabindex=2, autocomplete='off')"/>
<br/>
<a href="#nevermind" id="hide_description"
   onclick="$('description_field').hide(); $('hideable_add_description').show();">Hide description</a>
</div>

<p>
<input type="submit" name="create" value="go" tabindex=4 />
<metal:macro define-slot="cancel_button"></metal:macro>
<div tal:replace="structure python:h.end_form()" />
</metal:macro>
