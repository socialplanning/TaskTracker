<small>
<hr/><br/>
<a tal:attributes="href python:h.url_for(controller='tasklist', action='index')">
<< return to list of lists</a>&nbsp;
<a href="#nevermind">permalink this view</a>
</small><br/>

<h1 style="display:inline" tal:content="c/tasklist/title" />

<small>(<span id="num_uncompleted" tal:content="python:len(c.tasklist.uncompletedTasks())" /> <span tal:replace="python:test(len(c.tasklist.uncompletedTasks())==1, 'task', 'tasks')"/> left)</small>
<br />
<h3 tal:condition="c/tasklist/text" tal:content="c/tasklist/text" />

<!-- list headers -->

<metal:macro metal:use-macro="here/task_list_header/macros/show_header" />

<!-- the actual task list -->

<ul id="tasks" class="task_list" hasReorderableTasks="True">
  <tal:for repeat="atask c/tasks">
    
    <metal:do metal:use-macro="here/task_list_item/macros/show_task" />
    
  </tal:for>
</ul>

<br clear="both" />
<!-- the garbage bin -->
<!-- is currently hidden
<span tal:replace="structure python: h.image_tag('/images/trash.png', id='trash')" />
-->

<!-- the create setup -->

<metal:do use-macro="here/_hideable_show_create/macros/show">
<span metal:fill-slot="subtask_link">
[ + ]<a tal:attributes="href python:h.url_for(action='show_create', controller='task', task_listID=c.tasklist.id)" onclick="hideCreate();return false;">add a task</a>
<!-- <br/>
<a tal:attributes="href python:h.url_for(action='show_create_tasks', controller='task', task_listID=c.tasklist.id)">Add a bunch of new tasks.</a> -->
</span>
</metal:do>

<!-- ----------------------------- -->
<small>
<hr/>
<span tal:condition="python: not c.tasklist.isWatchedBy(c.username)">
<tal:nada replace="structure python:h.link_to('watch this list', url=h.url_for(action='show_create', controller='watcher', targetID=c.tasklist.id, type='tasklist'))"/>
</span>
<span tal:condition="python: c.tasklist.isWatchedBy(c.username)">
<tal:nada replace="structure python:h.link_to('edit watch settings', url=h.url_for(action='show_update', controller='watcher', id=c.tasklist.getWatcher(c.username).id))"/>
</span>
&nbsp;
<span><a tal:attributes="href python:h.url_for(action='show_update', controller='tasklist', id=c.tasklist.id)">view list preferences</a></span>
</small>