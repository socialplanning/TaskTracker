<small>
<hr/><br/>
<a tal:attributes="href python:h.url_for(controller='tasklist', action='index')">
<< return to list of lists</a>&nbsp;
<a href="#nevermind">permalink this view</a>
</small><br/>

<metal:do use-macro="here/task_list_title/macros/show_title"/>

<!-- list headers -->

<metal:macro metal:use-macro="here/task_list_header/macros/show_header" />

<!-- the actual task list -->

<ul id="tasks" class="task_list" hasReorderableTasks="True">
  <tal:for repeat="atask c/tasks">
    
    <metal:do metal:use-macro="here/task_list_item/macros/show_task" />
    
  </tal:for>
</ul>

<br clear="both" />
<!-- the garbage bin -->
<!-- is currently hidden
<span tal:replace="structure python: h.image_tag('/images/trash.png', id='trash')" />
-->

<!-- the create setup -->

<div id="add_task_anchor">
<div class="draggable" id="movable_add_task" parentID="0" siblingID="0" style="border: 2px dashed gray;  padding:0px;  margin:0px; line-height: 1em;">
<metal:do use-macro="here/_hideable_show_create/macros/show">
<div metal:fill-slot="subtask_link">
[ + ]<a id="add_a_task" tal:attributes="href python:h.url_for(action='show_create', controller='task', task_listID=c.tasklist.id)" onclick="return false;">add a task</a>
</div>
</metal:do>
</div></div>

<!-- ----------------------------- -->
<small>
<hr/>

<span tal:condition="python: h.has_permission('task', 'create', task_listID=c.tasklist.id)">
<a href="#nevermind" onclick="restoreAddTask(); return false;">add a task</a></span>
&nbsp;
<span tal:condition="python: not c.tasklist.isWatchedBy(c.username)">
<tal:nada replace="structure python:h.link_to('watch this list', url=h.url_for(action='show_create', controller='watcher', targetID=c.tasklist.id, type='tasklist'))"/>
</span>
<span tal:condition="python: c.tasklist.isWatchedBy(c.username)">
<tal:nada replace="structure python:h.link_to('edit watch settings', url=h.url_for(action='show_update', controller='watcher', id=c.tasklist.getWatcher(c.username).id))"/>
</span>

&nbsp;
<span><a tal:attributes="href python:h.url_for(action='show_update', controller='tasklist', id=c.tasklist.id)">view list preferences</a></span>
</small>