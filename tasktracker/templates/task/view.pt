<a tal:attributes="href python:h.url_for(action='show_update', id=c.task.id)">edit</a>
|
<tal:nada replace="structure python:h.link_to('delete', url=h.url_for(action='destroy', id=c.task.id), confirm='Are you sure you want to delete this task?')"/>
|
<a tal:attributes="href python:h.url_for(action='view', controller='tasklist', id=c.task.task_listID)">list</a>

<br/><br/>

<span tal:condition="c/flash"><span style="color: red;" tal:content="c/flash" /></span>

<b><span tal:replace="c/task/title" /><br/></b>
Deadline: <span tal:replace="c/task/deadline" /><br/>

<tal:if condition="c/task/owner">
  Owned by <span tal:replace="c/task/owner" />
  <tal:if condition="python: h.has_permission(controller='task', action='claim', id=c.task.id) and c.task.owner != c.username">
    -- 
    <a tal:attributes="href python:h.url_for(action='claim', id=c.task.id)">
      Steal this task?
    </a>
  </tal:if>
</tal:if>
<tal:if condition="not:c/task/owner">
  Unowned
  <tal:if condition="python: h.has_permission(controller='task', action='claim', id=c.task.id)">
    -- 
    <a tal:attributes="href python:h.url_for(action='claim', id=c.task.id)">
      Claim this task?
    </a>
  </tal:if>
</tal:if>
<br/>

<br/>
<span tal:replace="c/task/text" />
<br/>

<span tal:condition="c/task/comments">
Here are the comments:
</span>
<span tal:condition="not:c/task/comments">
There are no comments.
</span>


<ul tal:repeat="comment c/task/comments">
<li>
By: <span tal:replace="comment/user"/><br/>
On: <span tal:replace="comment/date"/><br/>
Text: <span tal:replace="comment/text"/><br/>
</li>
</ul>

<tal:if condition="python: h.has_permission(controller='task', action='comment', id=c.task.id)">

Make your own comment?
<form tal:attributes="action python:h.url_for(action='comment', task_id=c.task.id)" method="post">

<label for="text">Text:<label> <textarea name="text" cols=80 rows=10></textarea><br/>

<input type="submit" value="comment" name="comment">
</form>
</tal:if>
