<small>
<hr/><br/>
<a tal:attributes="href python:h.url_for(controller='tasklist', action='index', id=c.task.task_list.id)">
&lt;&lt; return to list of lists</a>&nbsp;
<a href="#permalink">permalink this task</a>
</small><br/>

<metal:do use-macro="here/task_list_title/macros/show_title"/>

<br/><br/>

<span tal:condition="c/task/previousTask">
Previous task: <a tal:attributes="href python: h.url_for(controller='task', action='show', id=c.task.previousTask().id)" tal:content="python:c.task.previousTask().title"/>
</span>

<div style="border: thin solid darkgray; padding:5px; width:80%">

<table class="task_list" style="width:100%" tal:define="atask c/task">
  <metal:do metal:use-macro="here/task_item/macros/show_task" />
</table>


<div tal:content="structure c/task/text" />


<span tal:condition="python:len(c.task.liveChildren())">

<!-- list headers -->
This task has <span tal:replace="python: len(c.task.liveChildren())"/> sub-tasks.<br/>

</span>

<metal:do use-macro="here/_hideable_show_create/macros/show">
<a metal:fill-slot="subtask_link" tal:attributes="href python:h.url_for(action='show_create', controller='task', task_listID=c.tasklist.id, parentID=c.task.id)" onclick="hideCreate();return false;">[ + ] add a task</a>
</metal:do>
<br/>

<b>Latest activity:</b>


<!-- comments -->

<ul tal:repeat="action python: [a for a in c.task.actions().__reversed__()]">
<li>
<span tal:replace="structure python: h.render_action(action)"/>
</li>
</ul>

<tal:if condition="python: h.has_permission(controller='task', action='comment', id=c.task.id)">

Make your own comment?
<form tal:attributes="action python:h.url_for(action='comment', task_id=c.task.id)" id="add_comment_form" method="post">

<label for="text">Text:<label> <textarea name="text" cols=80 rows=10></textarea><br/>

<input type="submit" value="comment" name="comment">
</form>
</tal:if>

<span tal:condition="c/task/nextTask">
Next task: <a tal:attributes="href python: h.url_for(controller='task', action='show', id=c.task.nextTask().id)" tal:content="python:c.task.nextTask().title"/>
</span>


<metal:do metal:use-macro="here/task_list_footer/macros/show_footer">
<span metal:fill-slot="pre_footer"> <a tal:attributes="href python:h.url_for(action='show', controller='tasklist', id=c.task.task_listID)">Go back to the task list</a> | </span>
</metal:do>
