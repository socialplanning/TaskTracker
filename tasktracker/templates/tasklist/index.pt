<b><span tal:replace="c/project/title"/>'s lists</b>:

<div tal:condition="python:[x for x in c.tasklists if x.uncompletedTasks()]">
<ul>
<tal:for repeat="list c/tasklists">
<li tal:condition="list/uncompletedTasks">
 <a tal:attributes="href python:h.url_for(action='show', id=list.id)">
     <span tal:replace="list/title" /> 
     </a> - <small><span tal:replace="python:len(list.uncompletedTasks())"/> uncompleted 

<span tal:replace="python:test(len(list.uncompletedTasks())==1, 'task', 'tasks')" />

</small>
</li>
</tal:for>
</ul>
</div>

<div tal:condition="python:[x for x in c.tasklists if not x.uncompletedTasks()]">
<b>Completed lists:</b>
<ul>
<tal:for repeat="list c/tasklists">
<li tal:condition="not:list/uncompletedTasks">

  <a tal:attributes="href python:h.url_for(action='show', id=list.id)">
     <span tal:replace="list/title" /> 
     </a>
</li>
</tal:for>
</ul>

</div>

<p tal:condition="python: h.has_permission('tasklist', 'show_create') and c.username != 'anonymous'">
<a onclick="$('show_create').show(); return false;" 
   tal:attributes="href python:h.url_for(action='show_create')">Create a new list.</a>
</p>
<span style="display:none;" id="show_create">
<metal:macro use-macro="here/show_create/macros/task_list_create">

</metal:macro>
</span>

<p>
<a tal:condition="python: c.username != 'anonymous'"
   tal:attributes="href python:h.url_for(controller='users', action='logout', id='')">Logout.</a>
<a tal:condition="python: c.username == 'anonymous'"
   tal:attributes="href python:h.url_for(controller='users', action='login')">Login as an existing user.</a>
</p>

<p>
<a tal:attributes="href python:h.url_for(controller='users', action='add')">Add a new user.</a>
</p>
