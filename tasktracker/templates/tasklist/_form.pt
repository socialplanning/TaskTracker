<metal:macro define-macro="form">

<label for="title">Name:</label><br/>
<span tal:replace="structure python: h.text_field('title', size=80)" /><br/>

<label for="text">Description:</label><br/>
<span tal:replace="structure python: h.text_area('text', rows=10, cols=80)" /><br/>

<label for="managers">Managers:</label><br/>
<input type="hidden" value="" id="managers" name="managers">

<!-- list managers -->

<span tal:replace="structure python: h.list_with_minuses('list_managers', c.managers, c.administrators)" />

<span class="autocomplete">
  <label for="manager" onclick="$('add_manager').toggle(); $('show_add_manager').toggle()" id="show_add_manager">[ + ] add manager</label>
<span id="add_manager" style="display:none;">
   <input autocomplete="off" id="manager" name="manager" size="20" type="text" value="" />
   <input type="submit" name="submit" value="Add" onclick="addItem('list_managers', $('manager').value);$('manager').value=''; return false;"/>
</span>

  <div class="auto_complete" id="manager_auto_complete"></div>
  <script type="text/javascript">new Ajax.Autocompleter('manager', 'manager_auto_complete', 
  '../../../task/auto_complete_for/manager', {})</script>
</span>

<br/>
<br/>

<!-- Permissions -->
<metal:do use-macro="here/_permissions/macros/permissions"/>
<!-- Features -->

<br/>
Extra Features <span tal:replace="structure python: h.help('These are optional')"/><br/>
<input type="checkbox" name="feature_deadlines" value="1" class="features"/>Deadlines<br/>
<input type="checkbox" name="feature_custom_status" value="1" class="features" onclick="$('statuses').toggle();" id="custom_status"/>Custom status<br/>
<input type="hidden" value="" id="statuses" name="statuses">

<div id="statuses" tal:condition="not:c/update" style="display:none; margin-left: 3em;">
<span tal:replace="structure python: h.list_with_minuses('list_statuses', [], ['done'])" />

   <input id="status" name="status" size="20" type="text" value="" />
   <input type="submit" name="submit" value="Add" onclick="addItem('list_statuses', $('status').value);$('status').value=''; return false;"/>


</div>
<div id="statuses" tal:condition="c/update" style="margin-left: 3em;">
  Statuses: <span tal:replace="python: ', '.join([s.name for s in c.tasklist.statuses])" />
</div>

<input type="checkbox" name="feature_private_tasks" value="1" class="features"/>Private tasks<br/>

<br/>
By default, tasks are initially assigned to:<br/>
<input type="radio" name="initial_assign" value="0" checked="checked"/> The person who created them<br/>
<input type="radio" name="initial_assign" value="1"/> Unassigned <br/>

<span tal:replace="structure python: h.submit('Submit')" />
<input type="submit" name="Cancel" value="Cancel" onclick="document.location='/tasklist/index';" />

<script language="JavaScript">
   setupEditableList('managers', 'list_managers');
   setupEditableList('statuses', 'list_statuses');
</script>

</metal:macro>
