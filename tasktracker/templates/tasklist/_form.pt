<metal:macro define-macro="form">

<input type="hidden" name="mode" id="mode" value="simple">

Title: <span tal:replace="structure python: h.text_field_r('tasklist', 'title')" /> 


<br/>
Text: <span tal:replace="structure python: h.text_area_r('tasklist', 'text', rows=10, cols=80)" /> 
<br />


<div id="complex_form" tal:attributes="style python:test(c.security_policy_id, 'display:none;;', '')">
<tal:for repeat="action c/actions">
<span tal:replace="action/question" />

<span tal:replace="structure python: h.select('action_' + action.action, h.options_for_select([(a.description, a.id) for a in action.roles], c.permissions[action.id]))" />
<br/>
</tal:for>
<a href="#" onclick="$('complex_form').hide(); $('mode').setAttribute('value', 'simple'); $('simple_form').show(); return false;">Simplify</a>
</div>

<div id="simple_form" tal:attributes="style python:test(c.security_policy_id, '', 'display:none;;')">
<span tal:replace="structure python: h.select('policy', h.options_for_select([(p.name, p.id) for p in c.policies], c.security_policy_id))" />

<a href="#" onclick="$('simple_form').hide(); $('mode').setAttribute('value', 'complex'); $('complex_form').show(); return false;">Complexify</a>
</div>


<span tal:replace="structure python: h.submit('Submit')" />

</metal:macro>
