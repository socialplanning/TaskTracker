<!-- Please also see show_preferences for the non-editable version -->

<span tal:replace="structure python: h.form(h.url(action='update'), method='post')" />

<div id="title" class="editable unfolded">
<h1 tal:content="c/tasklist/title" />
</div>
<div id="edit_title" class="folded">
<span tal:replace="structure python: h.text_field('title')" /><br/>
</div>

<div id="text" class="editable unfolded">
<span tal:content="python: test(c.tasklist.text, c.tasklist.text, '[no description]')" />
</div>
<div id="edit_text" class="folded">
<span tal:replace="structure python: h.text_area('text', rows=10, cols=80)" /><br/>
</div>

<br/>


<label for="managers">Managers:</label><br/>
<div id="managers_div" class="unfolded editable">
<ul>
     <li tal:repeat="manager python:c.managers + c.administrators" tal:content="manager"/>
</ul>
</div>
<div id="edit_managers_div" class="folded">

<metal:do use-macro="here/_managers/macros/managers"/>
</div>

<br/>
<br/>

<!-- Permissions -->
<span onclick="show_permissions();" class="editable">
<metal:do use-macro="here/_permissions/macros/permissions"/>
</span>
<script>
function show_permissions() {
lists.each(function(list_name) {
for (var i = 0; i < 5; i ++) {
  button = $(list_name + '_level_' + i);
  button.show();
}
});
}
lists.each(function(list_name) {
for (var i = 0; i < 5; i ++) {
  button = $(list_name + '_level_' + i);
  button.hide();
}
});
</script>


<!-- Features -->

<br/>
Extra Features <span tal:replace="structure python: h.help('These are optional')"/><br/>


<div id="deadlines" class="editable unfolded">
  <span tal:condition="c/feature_deadlines">
    Tasks have deadlines
  </span>
  <span tal:condition="not: c/feature_deadlines">
    Tasks do not have deadlines
  </span>
  <br/>
</div>
<div id="edit_deadlines" class="folded">
  <input type="checkbox" name="feature_deadlines" value="1" class="features"/>Deadlines<br/>
</div>


<span tal:condition="c/feature_custom_status">
This list has custom task statuses.  The statuses are: <span tal:replace="python: ', '.join([s.name for s in c.tasklist.statuses])" />
</span>
<span tal:condition="not: c/feature_custom_status">
Tasks do not have custom statuses. 
</span>
<br/>

<div id="edit_private" class="folded">
<input type="checkbox" name="feature_private_tasks" value="1" class="features" id="feature_private_tasks"/>Private tasks<br/>
</div>

<div id="private" class="editable unfolded">
<span tal:condition="c/feature_private_tasks">
This list has private tasks.
<script>
$('feature_private_tasks').onclick=function() {return confirm('All private tasks will be made public.  Proceed?')};
</script>
</span>
<span tal:condition="not: c/feature_private_tasks">
This list does not have private tasks.
</span>
<br/>
</div>

<br/>

<div id="initial_assign" class="unfolded editable">
    By default, tasks are initially
    <span tal:condition="c/tasklist/initial_assign">
      unassigned 
    </span>
    <span tal:condition="not: c/tasklist/initial_assign">
      assigned to the person who created them
    </span>
</div>
<div id="edit_initial_assign" class="folded">
  By default, tasks are initially assigned to:<br/>
  <input type="radio" name="initial_assign" value="0" checked="checked"/> The person who created them<br/>
  <input type="radio" name="initial_assign" value="1"/> Unassigned <br/>
</div>
<br/>

<span tal:replace="structure python: h.submit('Submit')" />
<input type="submit" name="Cancel" value="Cancel" onclick="document.location='/tasklist/index';" />

<script language="JavaScript">

   with_items ("editable", function(node) { node.title="Click to change this."; }, document.childNodes[0]);
   
</script>

<span tal:replace="structure python: h.end_form()" />
