var Prototype={Version:"1.5.0_rc1",ScriptFragment:"(?:<script.*?>)((\n|\r|.)*?)(?:</script>)",emptyFunction:function(){},K:function(x){return x;}};var Class={create:function(){return function(){this.initialize.apply(this,arguments);};}};var Abstract=new Object();Object.extend=function(_2,_3){for(var _4 in _3){_2[_4]=_3[_4];}return _2;};Object.extend(Object,{inspect:function(_5){try{if(_5==undefined){return "undefined";}if(_5==null){return "null";}return _5.inspect?_5.inspect():_5.toString();}catch(e){if(e instanceof RangeError){return "...";}throw e;}},keys:function(_6){var _7=[];for(var _8 in _6){_7.push(_8);}return _7;},values:function(_9){var _a=[];for(var _b in _9){_a.push(_9[_b]);}return _a;},clone:function(_c){return Object.extend({},_c);}});Function.prototype.bind=function(){var _d=this,args=$A(arguments),object=args.shift();return function(){return _d.apply(object,args.concat($A(arguments)));};};Function.prototype.bindAsEventListener=function(_e){var _f=this,args=$A(arguments),_e=args.shift();return function(_10){return _f.apply(_e,[(_10||window.event)].concat(args).concat($A(arguments)));};};Object.extend(Number.prototype,{toColorPart:function(){var _11=this.toString(16);if(this<16){return "0"+_11;}return _11;},succ:function(){return this+1;},times:function(_12){$R(0,this,true).each(_12);return this;}});var Try={these:function(){var _13;for(var i=0;i<arguments.length;i++){var _15=arguments[i];try{_13=_15();break;}catch(e){}}return _13;}};var PeriodicalExecuter=Class.create();PeriodicalExecuter.prototype={initialize:function(_16,_17){this.callback=_16;this.frequency=_17;this.currentlyExecuting=false;this.registerCallback();},registerCallback:function(){this.timer=setInterval(this.onTimerEvent.bind(this),this.frequency*1000);},stop:function(){if(!this.timer){return;}clearInterval(this.timer);this.timer=null;},onTimerEvent:function(){if(!this.currentlyExecuting){try{this.currentlyExecuting=true;this.callback(this);}finally{this.currentlyExecuting=false;}}}};Object.extend(String.prototype,{gsub:function(_18,_19){var _1a="",source=this,match;_19=arguments.callee.prepareReplacement(_19);while(source.length>0){if(match=source.match(_18)){_1a+=source.slice(0,match.index);_1a+=(_19(match)||"").toString();source=source.slice(match.index+match[0].length);}else{_1a+=source,source="";}}return _1a;},sub:function(_1b,_1c,_1d){_1c=this.gsub.prepareReplacement(_1c);_1d=_1d===undefined?1:_1d;return this.gsub(_1b,function(_1e){if(--_1d<0){return _1e[0];}return _1c(_1e);});},scan:function(_1f,_20){this.gsub(_1f,_20);return this;},truncate:function(_21,_22){_21=_21||30;_22=_22===undefined?"...":_22;return this.length>_21?this.slice(0,_21-_22.length)+_22:this;},strip:function(){return this.replace(/^\s+/,"").replace(/\s+$/,"");},stripTags:function(){return this.replace(/<\/?[^>]+>/gi,"");},stripScripts:function(){return this.replace(new RegExp(Prototype.ScriptFragment,"img"),"");},extractScripts:function(){var _23=new RegExp(Prototype.ScriptFragment,"img");var _24=new RegExp(Prototype.ScriptFragment,"im");return (this.match(_23)||[]).map(function(_25){return (_25.match(_24)||["",""])[1];});},evalScripts:function(){return this.extractScripts().map(function(_26){return eval(_26);});},escapeHTML:function(){var div=document.createElement("div");var _28=document.createTextNode(this);div.appendChild(_28);return div.innerHTML;},unescapeHTML:function(){var div=document.createElement("div");div.innerHTML=this.stripTags();return div.childNodes[0]?div.childNodes[0].nodeValue:"";},toQueryParams:function(){var _2a=this.match(/^\??(.*)$/)[1].split("&");return _2a.inject({},function(_2b,_2c){var _2d=_2c.split("=");var _2e=_2d[1]?decodeURIComponent(_2d[1]):undefined;_2b[decodeURIComponent(_2d[0])]=_2e;return _2b;});},toArray:function(){return this.split("");},camelize:function(){var _2f=this.split("-");if(_2f.length==1){return _2f[0];}var _30=this.indexOf("-")==0?_2f[0].charAt(0).toUpperCase()+_2f[0].substring(1):_2f[0];for(var i=1,len=_2f.length;i<len;i++){var s=_2f[i];_30+=s.charAt(0).toUpperCase()+s.substring(1);}return _30;},inspect:function(_33){var _34=this.replace(/\\/g,"\\\\");if(_33){return "\""+_34.replace(/"/g,"\\\"")+"\"";}else{return "'"+_34.replace(/'/g,"\\'")+"'";}}});String.prototype.gsub.prepareReplacement=function(_35){if(typeof _35=="function"){return _35;}var _36=new Template(_35);return function(_37){return _36.evaluate(_37);};};String.prototype.parseQuery=String.prototype.toQueryParams;var Template=Class.create();Template.Pattern=/(^|.|\r|\n)(#\{(.*?)\})/;Template.prototype={initialize:function(_38,_39){this.template=_38.toString();this.pattern=_39||Template.Pattern;},evaluate:function(_3a){return this.template.gsub(this.pattern,function(_3b){var _3c=_3b[1];if(_3c=="\\"){return _3b[2];}return _3c+(_3a[_3b[3]]||"").toString();});}};var $break=new Object();var $continue=new Object();var Enumerable={each:function(_3d){var _3e=0;try{this._each(function(_3f){try{_3d(_3f,_3e++);}catch(e){if(e!=$continue){throw e;}}});}catch(e){if(e!=$break){throw e;}}},all:function(_40){var _41=true;this.each(function(_42,_43){_41=_41&&!!(_40||Prototype.K)(_42,_43);if(!_41){throw $break;}});return _41;},any:function(_44){var _45=false;this.each(function(_46,_47){if(_45=!!(_44||Prototype.K)(_46,_47)){throw $break;}});return _45;},collect:function(_48){var _49=[];this.each(function(_4a,_4b){_49.push(_48(_4a,_4b));});return _49;},detect:function(_4c){var _4d;this.each(function(_4e,_4f){if(_4c(_4e,_4f)){_4d=_4e;throw $break;}});return _4d;},findAll:function(_50){var _51=[];this.each(function(_52,_53){if(_50(_52,_53)){_51.push(_52);}});return _51;},grep:function(_54,_55){var _56=[];this.each(function(_57,_58){var _59=_57.toString();if(_59.match(_54)){_56.push((_55||Prototype.K)(_57,_58));}});return _56;},include:function(_5a){var _5b=false;this.each(function(_5c){if(_5c==_5a){_5b=true;throw $break;}});return _5b;},inject:function(_5d,_5e){this.each(function(_5f,_60){_5d=_5e(_5d,_5f,_60);});return _5d;},invoke:function(_61){var _62=$A(arguments).slice(1);return this.collect(function(_63){return _63[_61].apply(_63,_62);});},max:function(_64){var _65;this.each(function(_66,_67){_66=(_64||Prototype.K)(_66,_67);if(_65==undefined||_66>=_65){_65=_66;}});return _65;},min:function(_68){var _69;this.each(function(_6a,_6b){_6a=(_68||Prototype.K)(_6a,_6b);if(_69==undefined||_6a<_69){_69=_6a;}});return _69;},partition:function(_6c){var _6d=[],falses=[];this.each(function(_6e,_6f){((_6c||Prototype.K)(_6e,_6f)?_6d:falses).push(_6e);});return [_6d,falses];},pluck:function(_70){var _71=[];this.each(function(_72,_73){_71.push(_72[_70]);});return _71;},reject:function(_74){var _75=[];this.each(function(_76,_77){if(!_74(_76,_77)){_75.push(_76);}});return _75;},sortBy:function(_78){return this.collect(function(_79,_7a){return {value:_79,criteria:_78(_79,_7a)};}).sort(function(_7b,_7c){var a=_7b.criteria,b=_7c.criteria;return a<b?-1:a>b?1:0;}).pluck("value");},toArray:function(){return this.collect(Prototype.K);},zip:function(){var _7e=Prototype.K,args=$A(arguments);if(typeof args.last()=="function"){_7e=args.pop();}var _7f=[this].concat(args).map($A);return this.map(function(_80,_81){return _7e(_7f.pluck(_81));});},inspect:function(){return "#<Enumerable:"+this.toArray().inspect()+">";}};Object.extend(Enumerable,{map:Enumerable.collect,find:Enumerable.detect,select:Enumerable.findAll,member:Enumerable.include,entries:Enumerable.toArray});var $A=Array.from=function(_82){if(!_82){return [];}if(_82.toArray){return _82.toArray();}else{var _83=[];for(var i=0;i<_82.length;i++){_83.push(_82[i]);}return _83;}};Object.extend(Array.prototype,Enumerable);if(!Array.prototype._reverse){Array.prototype._reverse=Array.prototype.reverse;}Object.extend(Array.prototype,{_each:function(_85){for(var i=0;i<this.length;i++){_85(this[i]);}},clear:function(){this.length=0;return this;},first:function(){return this[0];},last:function(){return this[this.length-1];},compact:function(){return this.select(function(_87){return _87!=undefined||_87!=null;});},flatten:function(){return this.inject([],function(_88,_89){return _88.concat(_89&&_89.constructor==Array?_89.flatten():[_89]);});},without:function(){var _8a=$A(arguments);return this.select(function(_8b){return !_8a.include(_8b);});},indexOf:function(_8c){for(var i=0;i<this.length;i++){if(this[i]==_8c){return i;}}return -1;},reverse:function(_8e){return (_8e!==false?this:this.toArray())._reverse();},reduce:function(){return this.length>1?this:this[0];},uniq:function(){return this.inject([],function(_8f,_90){return _8f.include(_90)?_8f:_8f.concat([_90]);});},inspect:function(){return "["+this.map(Object.inspect).join(", ")+"]";}});var Hash={_each:function(_91){for(var key in this){var _93=this[key];if(typeof _93=="function"){continue;}var _94=[key,_93];_94.key=key;_94.value=_93;_91(_94);}},keys:function(){return this.pluck("key");},values:function(){return this.pluck("value");},merge:function(_95){return $H(_95).inject($H(this),function(_96,_97){_96[_97.key]=_97.value;return _96;});},toQueryString:function(){return this.map(function(_98){return _98.map(encodeURIComponent).join("=");}).join("&");},inspect:function(){return "#<Hash:{"+this.map(function(_99){return _99.map(Object.inspect).join(": ");}).join(", ")+"}>";}};function $H(_9a){var _9b=Object.extend({},_9a||{});Object.extend(_9b,Enumerable);Object.extend(_9b,Hash);return _9b;}ObjectRange=Class.create();Object.extend(ObjectRange.prototype,Enumerable);Object.extend(ObjectRange.prototype,{initialize:function(_9c,end,_9e){this.start=_9c;this.end=end;this.exclusive=_9e;},_each:function(_9f){var _a0=this.start;while(this.include(_a0)){_9f(_a0);_a0=_a0.succ();}},include:function(_a1){if(_a1<this.start){return false;}if(this.exclusive){return _a1<this.end;}return _a1<=this.end;}});var $R=function(_a2,end,_a4){return new ObjectRange(_a2,end,_a4);};var Ajax={getTransport:function(){return Try.these(function(){return new XMLHttpRequest();},function(){return new ActiveXObject("Msxml2.XMLHTTP");},function(){return new ActiveXObject("Microsoft.XMLHTTP");})||false;},activeRequestCount:0};Ajax.Responders={responders:[],_each:function(_a5){this.responders._each(_a5);},register:function(_a6){if(!this.include(_a6)){this.responders.push(_a6);}},unregister:function(_a7){this.responders=this.responders.without(_a7);},dispatch:function(_a8,_a9,_aa,_ab){this.each(function(_ac){if(_ac[_a8]&&typeof _ac[_a8]=="function"){try{_ac[_a8].apply(_ac,[_a9,_aa,_ab]);}catch(e){}}});}};Object.extend(Ajax.Responders,Enumerable);Ajax.Responders.register({onCreate:function(){Ajax.activeRequestCount++;},onComplete:function(){Ajax.activeRequestCount--;}});Ajax.Base=function(){};Ajax.Base.prototype={setOptions:function(_ad){this.options={method:"post",asynchronous:true,contentType:"application/x-www-form-urlencoded",parameters:""};Object.extend(this.options,_ad||{});},responseIsSuccess:function(){return this.transport.status==undefined||this.transport.status==0||(this.transport.status>=200&&this.transport.status<300);},responseIsFailure:function(){return !this.responseIsSuccess();}};Ajax.Request=Class.create();Ajax.Request.Events=["Uninitialized","Loading","Loaded","Interactive","Complete"];Ajax.Request.prototype=Object.extend(new Ajax.Base(),{initialize:function(url,_af){this.transport=Ajax.getTransport();this.setOptions(_af);this.request(url);},request:function(url){var _b1=this.options.parameters||"";if(_b1.length>0){_b1+="&_=";}if(this.options.method!="get"&&this.options.method!="post"){_b1+=(_b1.length>0?"&":"")+"_method="+this.options.method;this.options.method="post";}try{this.url=url;if(this.options.method=="get"&&_b1.length>0){this.url+=(this.url.match(/\?/)?"&":"?")+_b1;}Ajax.Responders.dispatch("onCreate",this,this.transport);this.transport.open(this.options.method,this.url,this.options.asynchronous);if(this.options.asynchronous){setTimeout(function(){this.respondToReadyState(1);}.bind(this),10);}this.transport.onreadystatechange=this.onStateChange.bind(this);this.setRequestHeaders();var _b2=this.options.postBody?this.options.postBody:_b1;this.transport.send(this.options.method=="post"?_b2:null);if(!this.options.asynchronous&&this.transport.overrideMimeType){this.onStateChange();}}catch(e){this.dispatchException(e);}},setRequestHeaders:function(){var _b3=["X-Requested-With","XMLHttpRequest","X-Prototype-Version",Prototype.Version,"Accept","text/javascript, text/html, application/xml, text/xml, */*"];if(this.options.method=="post"){_b3.push("Content-type",this.options.contentType);if(this.transport.overrideMimeType){_b3.push("Connection","close");}}if(this.options.requestHeaders){_b3.push.apply(_b3,this.options.requestHeaders);}for(var i=0;i<_b3.length;i+=2){this.transport.setRequestHeader(_b3[i],_b3[i+1]);}},onStateChange:function(){var _b5=this.transport.readyState;if(_b5!=1){this.respondToReadyState(this.transport.readyState);}},header:function(_b6){try{return this.transport.getResponseHeader(_b6);}catch(e){}},evalJSON:function(){try{return eval("("+this.header("X-JSON")+")");}catch(e){}},evalResponse:function(){try{return eval(this.transport.responseText);}catch(e){this.dispatchException(e);}},respondToReadyState:function(_b7){var _b8=Ajax.Request.Events[_b7];var _b9=this.transport,json=this.evalJSON();if(_b8=="Complete"){try{(this.options["on"+this.transport.status]||this.options["on"+(this.responseIsSuccess()?"Success":"Failure")]||Prototype.emptyFunction)(_b9,json);}catch(e){this.dispatchException(e);}if((this.header("Content-type")||"").match(/^text\/javascript/i)){this.evalResponse();}}try{(this.options["on"+_b8]||Prototype.emptyFunction)(_b9,json);Ajax.Responders.dispatch("on"+_b8,this,_b9,json);}catch(e){this.dispatchException(e);}if(_b8=="Complete"){this.transport.onreadystatechange=Prototype.emptyFunction;}},dispatchException:function(_ba){(this.options.onException||Prototype.emptyFunction)(this,_ba);Ajax.Responders.dispatch("onException",this,_ba);}});Ajax.Updater=Class.create();Object.extend(Object.extend(Ajax.Updater.prototype,Ajax.Request.prototype),{initialize:function(_bb,url,_bd){this.containers={success:_bb.success?$(_bb.success):$(_bb),failure:_bb.failure?$(_bb.failure):(_bb.success?null:$(_bb))};this.transport=Ajax.getTransport();this.setOptions(_bd);var _be=this.options.onComplete||Prototype.emptyFunction;this.options.onComplete=(function(_bf,_c0){this.updateContent();_be(_bf,_c0);}).bind(this);this.request(url);},updateContent:function(){var _c1=this.responseIsSuccess()?this.containers.success:this.containers.failure;var _c2=this.transport.responseText;if(!this.options.evalScripts){_c2=_c2.stripScripts();}if(_c1){if(this.options.insertion){new this.options.insertion(_c1,_c2);}else{Element.update(_c1,_c2);}}if(this.responseIsSuccess()){if(this.onComplete){setTimeout(this.onComplete.bind(this),10);}}}});Ajax.PeriodicalUpdater=Class.create();Ajax.PeriodicalUpdater.prototype=Object.extend(new Ajax.Base(),{initialize:function(_c3,url,_c5){this.setOptions(_c5);this.onComplete=this.options.onComplete;this.frequency=(this.options.frequency||2);this.decay=(this.options.decay||1);this.updater={};this.container=_c3;this.url=url;this.start();},start:function(){this.options.onComplete=this.updateComplete.bind(this);this.onTimerEvent();},stop:function(){this.updater.options.onComplete=undefined;clearTimeout(this.timer);(this.onComplete||Prototype.emptyFunction).apply(this,arguments);},updateComplete:function(_c6){if(this.options.decay){this.decay=(_c6.responseText==this.lastText?this.decay*this.options.decay:1);this.lastText=_c6.responseText;}this.timer=setTimeout(this.onTimerEvent.bind(this),this.decay*this.frequency*1000);},onTimerEvent:function(){this.updater=new Ajax.Updater(this.container,this.url,this.options);}});function $(){var _c7=[],element;for(var i=0;i<arguments.length;i++){element=arguments[i];if(typeof element=="string"){element=document.getElementById(element);}_c7.push(Element.extend(element));}return _c7.reduce();}document.getElementsByClassName=function(_c9,_ca){var _cb=($(_ca)||document.body).getElementsByTagName("*");return $A(_cb).inject([],function(_cc,_cd){if(_cd.className.match(new RegExp("(^|\\s)"+_c9+"(\\s|$)"))){_cc.push(Element.extend(_cd));}return _cc;});};if(!window.Element){var Element=new Object();}Element.extend=function(_ce){if(!_ce){return;}if(_nativeExtensions){return _ce;}if(!_ce._extended&&_ce.tagName&&_ce!=window){var _cf=Object.clone(Element.Methods),cache=Element.extend.cache;if(_ce.tagName=="FORM"){Object.extend(_cf,Form.Methods);}if(["INPUT","TEXTAREA","SELECT"].include(_ce.tagName)){Object.extend(_cf,Form.Element.Methods);}for(var _d0 in _cf){var _d1=_cf[_d0];if(typeof _d1=="function"){_ce[_d0]=cache.findOrStore(_d1);}}}_ce._extended=true;return _ce;};Element.extend.cache={findOrStore:function(_d2){return this[_d2]=this[_d2]||function(){return _d2.apply(null,[this].concat($A(arguments)));};}};Element.Methods={visible:function(_d3){return $(_d3).style.display!="none";},toggle:function(_d4){_d4=$(_d4);Element[Element.visible(_d4)?"hide":"show"](_d4);return _d4;},hide:function(_d5){$(_d5).style.display="none";return _d5;},show:function(_d6){$(_d6).style.display="";return _d6;},remove:function(_d7){_d7=$(_d7);_d7.parentNode.removeChild(_d7);return _d7;},update:function(_d8,_d9){$(_d8).innerHTML=_d9.stripScripts();setTimeout(function(){_d9.evalScripts();},10);return _d8;},replace:function(_da,_db){_da=$(_da);if(_da.outerHTML){_da.outerHTML=_db.stripScripts();}else{var _dc=_da.ownerDocument.createRange();_dc.selectNodeContents(_da);_da.parentNode.replaceChild(_dc.createContextualFragment(_db.stripScripts()),_da);}setTimeout(function(){_db.evalScripts();},10);return _da;},inspect:function(_dd){_dd=$(_dd);var _de="<"+_dd.tagName.toLowerCase();$H({"id":"id","className":"class"}).each(function(_df){var _e0=_df.first(),attribute=_df.last();var _e1=(_dd[_e0]||"").toString();if(_e1){_de+=" "+attribute+"="+_e1.inspect(true);}});return _de+">";},recursivelyCollect:function(_e2,_e3){_e2=$(_e2);var _e4=[];while(_e2=_e2[_e3]){if(_e2.nodeType==1){_e4.push(Element.extend(_e2));}}return _e4;},ancestors:function(_e5){return $(_e5).recursivelyCollect("parentNode");},descendants:function(_e6){_e6=$(_e6);return $A(_e6.getElementsByTagName("*"));},previousSiblings:function(_e7){return $(_e7).recursivelyCollect("previousSibling");},nextSiblings:function(_e8){return $(_e8).recursivelyCollect("nextSibling");},siblings:function(_e9){_e9=$(_e9);return _e9.previousSiblings().reverse().concat(_e9.nextSiblings());},match:function(_ea,_eb){_ea=$(_ea);if(typeof _eb=="string"){_eb=new Selector(_eb);}return _eb.match(_ea);},up:function(_ec,_ed,_ee){return Selector.findElement($(_ec).ancestors(),_ed,_ee);},down:function(_ef,_f0,_f1){return Selector.findElement($(_ef).descendants(),_f0,_f1);},previous:function(_f2,_f3,_f4){return Selector.findElement($(_f2).previousSiblings(),_f3,_f4);},next:function(_f5,_f6,_f7){return Selector.findElement($(_f5).nextSiblings(),_f6,_f7);},getElementsBySelector:function(){var _f8=$A(arguments),element=$(_f8.shift());return Selector.findChildElements(element,_f8);},getElementsByClassName:function(_f9,_fa){_f9=$(_f9);return document.getElementsByClassName(_fa,_f9);},getHeight:function(_fb){_fb=$(_fb);return _fb.offsetHeight;},classNames:function(_fc){return new Element.ClassNames(_fc);},hasClassName:function(_fd,_fe){if(!(_fd=$(_fd))){return;}return Element.classNames(_fd).include(_fe);},addClassName:function(_ff,_100){if(!(_ff=$(_ff))){return;}Element.classNames(_ff).add(_100);return _ff;},removeClassName:function(_101,_102){if(!(_101=$(_101))){return;}Element.classNames(_101).remove(_102);return _101;},observe:function(){Event.observe.apply(Event,arguments);return $A(arguments).first();},stopObserving:function(){Event.stopObserving.apply(Event,arguments);return $A(arguments).first();},cleanWhitespace:function(_103){_103=$(_103);for(var i=0;i<_103.childNodes.length;i++){var node=_103.childNodes[i];if(node.nodeType==3&&!/\S/.test(node.nodeValue)){Element.remove(node);}}return _103;},empty:function(_106){return $(_106).innerHTML.match(/^\s*$/);},childOf:function(_107,_108){_107=$(_107),_108=$(_108);while(_107=_107.parentNode){if(_107==_108){return true;}}return false;},scrollTo:function(_109){_109=$(_109);var x=_109.x?_109.x:_109.offsetLeft,y=_109.y?_109.y:_109.offsetTop;window.scrollTo(x,y);return _109;},getStyle:function(_10b,_10c){_10b=$(_10b);var _10d=_10b.style[_10c.camelize()];if(!_10d){if(document.defaultView&&document.defaultView.getComputedStyle){var css=document.defaultView.getComputedStyle(_10b,null);_10d=css?css.getPropertyValue(_10c):null;}else{if(_10b.currentStyle){_10d=_10b.currentStyle[_10c.camelize()];}}}if(window.opera&&["left","top","right","bottom"].include(_10c)){if(Element.getStyle(_10b,"position")=="static"){_10d="auto";}}return _10d=="auto"?null:_10d;},setStyle:function(_10f,_110){_10f=$(_10f);for(var name in _110){_10f.style[name.camelize()]=_110[name];}return _10f;},getDimensions:function(_112){_112=$(_112);if(Element.getStyle(_112,"display")!="none"){return {width:_112.offsetWidth,height:_112.offsetHeight};}var els=_112.style;var _114=els.visibility;var _115=els.position;els.visibility="hidden";els.position="absolute";els.display="";var _116=_112.clientWidth;var _117=_112.clientHeight;els.display="none";els.position=_115;els.visibility=_114;return {width:_116,height:_117};},makePositioned:function(_118){_118=$(_118);var pos=Element.getStyle(_118,"position");if(pos=="static"||!pos){_118._madePositioned=true;_118.style.position="relative";if(window.opera){_118.style.top=0;_118.style.left=0;}}return _118;},undoPositioned:function(_11a){_11a=$(_11a);if(_11a._madePositioned){_11a._madePositioned=undefined;_11a.style.position=_11a.style.top=_11a.style.left=_11a.style.bottom=_11a.style.right="";}return _11a;},makeClipping:function(_11b){_11b=$(_11b);if(_11b._overflow){return;}_11b._overflow=_11b.style.overflow||"auto";if((Element.getStyle(_11b,"overflow")||"visible")!="hidden"){_11b.style.overflow="hidden";}return _11b;},undoClipping:function(_11c){_11c=$(_11c);if(!_11c._overflow){return;}_11c.style.overflow=_11c._overflow=="auto"?"":_11c._overflow;delete _11c._overflow;return _11c;}};if(document.all){Element.Methods.update=function(_11d,html){_11d=$(_11d);var _11f=_11d.tagName.toUpperCase();if(["THEAD","TBODY","TR","TD"].indexOf(_11f)>-1){var div=document.createElement("div");switch(_11f){case "THEAD":case "TBODY":div.innerHTML="<table><tbody>"+html.stripScripts()+"</tbody></table>";depth=2;break;case "TR":div.innerHTML="<table><tbody><tr>"+html.stripScripts()+"</tr></tbody></table>";depth=3;break;case "TD":div.innerHTML="<table><tbody><tr><td>"+html.stripScripts()+"</td></tr></tbody></table>";depth=4;}$A(_11d.childNodes).each(function(node){_11d.removeChild(node);});depth.times(function(){div=div.firstChild;});$A(div.childNodes).each(function(node){_11d.appendChild(node);});}else{_11d.innerHTML=html.stripScripts();}setTimeout(function(){html.evalScripts();},10);return _11d;};}Object.extend(Element,Element.Methods);var _nativeExtensions=false;if(!window.HTMLElement&&/Konqueror|Safari|KHTML/.test(navigator.userAgent)){["","Form","Input","TextArea","Select"].each(function(tag){var _124=window["HTML"+tag+"Element"]={};_124.prototype=document.createElement(tag?tag.toLowerCase():"div").__proto__;});}Element.addMethods=function(_125){Object.extend(Element.Methods,_125||{});function copy(_126,_127){var _128=Element.extend.cache;for(var _129 in _126){var _12a=_126[_129];_127[_129]=_128.findOrStore(_12a);}}if(typeof HTMLElement!="undefined"){copy(Element.Methods,HTMLElement.prototype);copy(Form.Methods,HTMLFormElement.prototype);[HTMLInputElement,HTMLTextAreaElement,HTMLSelectElement].each(function(_12b){copy(Form.Element.Methods,_12b.prototype);});_nativeExtensions=true;}};var Toggle=new Object();Toggle.display=Element.toggle;Abstract.Insertion=function(_12c){this.adjacency=_12c;};Abstract.Insertion.prototype={initialize:function(_12d,_12e){this.element=$(_12d);this.content=_12e.stripScripts();if(this.adjacency&&this.element.insertAdjacentHTML){try{this.element.insertAdjacentHTML(this.adjacency,this.content);}catch(e){var _12f=this.element.tagName.toLowerCase();if(_12f=="tbody"||_12f=="tr"){this.insertContent(this.contentFromAnonymousTable());}else{throw e;}}}else{this.range=this.element.ownerDocument.createRange();if(this.initializeRange){this.initializeRange();}this.insertContent([this.range.createContextualFragment(this.content)]);}setTimeout(function(){_12e.evalScripts();},10);},contentFromAnonymousTable:function(){var div=document.createElement("div");div.innerHTML="<table><tbody>"+this.content+"</tbody></table>";return $A(div.childNodes[0].childNodes[0].childNodes);}};var Insertion=new Object();Insertion.Before=Class.create();Insertion.Before.prototype=Object.extend(new Abstract.Insertion("beforeBegin"),{initializeRange:function(){this.range.setStartBefore(this.element);},insertContent:function(_131){_131.each((function(_132){this.element.parentNode.insertBefore(_132,this.element);}).bind(this));}});Insertion.Top=Class.create();Insertion.Top.prototype=Object.extend(new Abstract.Insertion("afterBegin"),{initializeRange:function(){this.range.selectNodeContents(this.element);this.range.collapse(true);},insertContent:function(_133){_133.reverse(false).each((function(_134){this.element.insertBefore(_134,this.element.firstChild);}).bind(this));}});Insertion.Bottom=Class.create();Insertion.Bottom.prototype=Object.extend(new Abstract.Insertion("beforeEnd"),{initializeRange:function(){this.range.selectNodeContents(this.element);this.range.collapse(this.element);},insertContent:function(_135){_135.each((function(_136){this.element.appendChild(_136);}).bind(this));}});Insertion.After=Class.create();Insertion.After.prototype=Object.extend(new Abstract.Insertion("afterEnd"),{initializeRange:function(){this.range.setStartAfter(this.element);},insertContent:function(_137){_137.each((function(_138){this.element.parentNode.insertBefore(_138,this.element.nextSibling);}).bind(this));}});Element.ClassNames=Class.create();Element.ClassNames.prototype={initialize:function(_139){this.element=$(_139);},_each:function(_13a){this.element.className.split(/\s+/).select(function(name){return name.length>0;})._each(_13a);},set:function(_13c){this.element.className=_13c;},add:function(_13d){if(this.include(_13d)){return;}this.set(this.toArray().concat(_13d).join(" "));},remove:function(_13e){if(!this.include(_13e)){return;}this.set(this.select(function(_13f){return _13f!=_13e;}).join(" "));},toString:function(){return this.toArray().join(" ");}};Object.extend(Element.ClassNames.prototype,Enumerable);var Selector=Class.create();Selector.prototype={initialize:function(_140){this.params={classNames:[]};this.expression=_140.toString().strip();this.parseExpression();this.compileMatcher();},parseExpression:function(){function abort(_141){throw "Parse error in selector: "+_141;}if(this.expression==""){abort("empty expression");}var _142=this.params,expr=this.expression,match,modifier,clause,rest;while(match=expr.match(/^(.*)\[([a-z0-9_:-]+?)(?:([~\|!]?=)(?:"([^"]*)"|([^\]\s]*)))?\]$/i)){_142.attributes=_142.attributes||[];_142.attributes.push({name:match[2],operator:match[3],value:match[4]||match[5]||""});expr=match[1];}if(expr=="*"){return this.params.wildcard=true;}while(match=expr.match(/^([^a-z0-9_-])?([a-z0-9_-]+)(.*)/i)){modifier=match[1],clause=match[2],rest=match[3];switch(modifier){case "#":_142.id=clause;break;case ".":_142.classNames.push(clause);break;case "":case undefined:_142.tagName=clause.toUpperCase();break;default:abort(expr.inspect());}expr=rest;}if(expr.length>0){abort(expr.inspect());}},buildMatchExpression:function(){var _143=this.params,conditions=[],clause;if(_143.wildcard){conditions.push("true");}if(clause=_143.id){conditions.push("element.id == "+clause.inspect());}if(clause=_143.tagName){conditions.push("element.tagName.toUpperCase() == "+clause.inspect());}if((clause=_143.classNames).length>0){for(var i=0;i<clause.length;i++){conditions.push("Element.hasClassName(element, "+clause[i].inspect()+")");}}if(clause=_143.attributes){clause.each(function(_145){var _146="element.getAttribute("+_145.name.inspect()+")";var _147=function(_148){return _146+" && "+_146+".split("+_148.inspect()+")";};switch(_145.operator){case "=":conditions.push(_146+" == "+_145.value.inspect());break;case "~=":conditions.push(_147(" ")+".include("+_145.value.inspect()+")");break;case "|=":conditions.push(_147("-")+".first().toUpperCase() == "+_145.value.toUpperCase().inspect());break;case "!=":conditions.push(_146+" != "+_145.value.inspect());break;case "":case undefined:conditions.push(_146+" != null");break;default:throw "Unknown operator "+_145.operator+" in selector";}});}return conditions.join(" && ");},compileMatcher:function(){this.match=new Function("element","if (!element.tagName) return false;       return "+this.buildMatchExpression());},findElements:function(_149){var _14a;if(_14a=$(this.params.id)){if(this.match(_14a)){if(!_149||Element.childOf(_14a,_149)){return [_14a];}}}_149=(_149||document).getElementsByTagName(this.params.tagName||"*");var _14b=[];for(var i=0;i<_149.length;i++){if(this.match(_14a=_149[i])){_14b.push(Element.extend(_14a));}}return _14b;},toString:function(){return this.expression;}};Object.extend(Selector,{matchElements:function(_14d,_14e){var _14f=new Selector(_14e);return _14d.select(_14f.match.bind(_14f));},findElement:function(_150,_151,_152){if(typeof _151=="number"){_152=_151,_151=false;}return Selector.matchElements(_150,_151||"*")[_152||0];},findChildElements:function(_153,_154){return _154.map(function(_155){return _155.strip().split(/\s+/).inject([null],function(_156,expr){var _158=new Selector(expr);return _156.inject([],function(_159,_15a){return _159.concat(_158.findElements(_15a||_153));});});}).flatten();}});function $$(){return Selector.findChildElements(document,$A(arguments));}var Form={reset:function(form){$(form).reset();return form;}};Form.Methods={serialize:function(form){var _15d=Form.getElements($(form));var _15e=new Array();for(var i=0;i<_15d.length;i++){var _160=Form.Element.serialize(_15d[i]);if(_160){_15e.push(_160);}}return _15e.join("&");},getElements:function(form){form=$(form);var _162=new Array();for(var _163 in Form.Element.Serializers){var _164=form.getElementsByTagName(_163);for(var j=0;j<_164.length;j++){_162.push(_164[j]);}}return _162;},getInputs:function(form,_167,name){form=$(form);var _169=form.getElementsByTagName("input");if(!_167&&!name){return _169;}var _16a=new Array();for(var i=0;i<_169.length;i++){var _16c=_169[i];if((_167&&_16c.type!=_167)||(name&&_16c.name!=name)){continue;}_16a.push(_16c);}return _16a;},disable:function(form){form=$(form);var _16e=Form.getElements(form);for(var i=0;i<_16e.length;i++){var _170=_16e[i];_170.blur();_170.disabled="true";}return form;},enable:function(form){form=$(form);var _172=Form.getElements(form);for(var i=0;i<_172.length;i++){var _174=_172[i];_174.disabled="";}return form;},findFirstElement:function(form){return Form.getElements(form).find(function(_176){return _176.type!="hidden"&&!_176.disabled&&["input","select","textarea"].include(_176.tagName.toLowerCase());});},focusFirstElement:function(form){form=$(form);Field.activate(Form.findFirstElement(form));return form;}};Object.extend(Form,Form.Methods);Form.Element={focus:function(_178){$(_178).focus();return _178;},select:function(_179){$(_179).select();return _179;}};Form.Element.Methods={serialize:function(_17a){_17a=$(_17a);var _17b=_17a.tagName.toLowerCase();var _17c=Form.Element.Serializers[_17b](_17a);if(_17c){var key=encodeURIComponent(_17c[0]);if(key.length==0){return;}if(_17c[1].constructor!=Array){_17c[1]=[_17c[1]];}return _17c[1].map(function(_17e){return key+"="+encodeURIComponent(_17e);}).join("&");}},getValue:function(_17f){_17f=$(_17f);var _180=_17f.tagName.toLowerCase();var _181=Form.Element.Serializers[_180](_17f);if(_181){return _181[1];}},clear:function(_182){$(_182).value="";return _182;},present:function(_183){return $(_183).value!="";},activate:function(_184){_184=$(_184);_184.focus();if(_184.select){_184.select();}return _184;},disable:function(_185){_185=$(_185);_185.disabled="";return _185;},enable:function(_186){_186=$(_186);_186.blur();_186.disabled="true";return _186;}};Object.extend(Form.Element,Form.Element.Methods);var Field=Form.Element;Form.Element.Serializers={input:function(_187){switch(_187.type.toLowerCase()){case "checkbox":case "radio":return Form.Element.Serializers.inputSelector(_187);default:return Form.Element.Serializers.textarea(_187);}return false;},inputSelector:function(_188){if(_188.checked){return [_188.name,_188.value];}},textarea:function(_189){return [_189.name,_189.value];},select:function(_18a){return Form.Element.Serializers[_18a.type=="select-one"?"selectOne":"selectMany"](_18a);},selectOne:function(_18b){var _18c="",opt,index=_18b.selectedIndex;if(index>=0){opt=_18b.options[index];_18c=opt.value||opt.text;}return [_18b.name,_18c];},selectMany:function(_18d){var _18e=[];for(var i=0;i<_18d.length;i++){var opt=_18d.options[i];if(opt.selected){_18e.push(opt.value||opt.text);}}return [_18d.name,_18e];}};var $F=Form.Element.getValue;Abstract.TimedObserver=function(){};Abstract.TimedObserver.prototype={initialize:function(_191,_192,_193){this.frequency=_192;this.element=$(_191);this.callback=_193;this.lastValue=this.getValue();this.registerCallback();},registerCallback:function(){setInterval(this.onTimerEvent.bind(this),this.frequency*1000);},onTimerEvent:function(){var _194=this.getValue();if(this.lastValue!=_194){this.callback(this.element,_194);this.lastValue=_194;}}};Form.Element.Observer=Class.create();Form.Element.Observer.prototype=Object.extend(new Abstract.TimedObserver(),{getValue:function(){return Form.Element.getValue(this.element);}});Form.Observer=Class.create();Form.Observer.prototype=Object.extend(new Abstract.TimedObserver(),{getValue:function(){return Form.serialize(this.element);}});Abstract.EventObserver=function(){};Abstract.EventObserver.prototype={initialize:function(_195,_196){this.element=$(_195);this.callback=_196;this.lastValue=this.getValue();if(this.element.tagName.toLowerCase()=="form"){this.registerFormCallbacks();}else{this.registerCallback(this.element);}},onElementEvent:function(){var _197=this.getValue();if(this.lastValue!=_197){this.callback(this.element,_197);this.lastValue=_197;}},registerFormCallbacks:function(){var _198=Form.getElements(this.element);for(var i=0;i<_198.length;i++){this.registerCallback(_198[i]);}},registerCallback:function(_19a){if(_19a.type){switch(_19a.type.toLowerCase()){case "checkbox":case "radio":Event.observe(_19a,"click",this.onElementEvent.bind(this));break;default:Event.observe(_19a,"change",this.onElementEvent.bind(this));break;}}}};Form.Element.EventObserver=Class.create();Form.Element.EventObserver.prototype=Object.extend(new Abstract.EventObserver(),{getValue:function(){return Form.Element.getValue(this.element);}});Form.EventObserver=Class.create();Form.EventObserver.prototype=Object.extend(new Abstract.EventObserver(),{getValue:function(){return Form.serialize(this.element);}});if(!window.Event){var Event=new Object();}Object.extend(Event,{KEY_BACKSPACE:8,KEY_TAB:9,KEY_RETURN:13,KEY_ESC:27,KEY_LEFT:37,KEY_UP:38,KEY_RIGHT:39,KEY_DOWN:40,KEY_DELETE:46,KEY_HOME:36,KEY_END:35,KEY_PAGEUP:33,KEY_PAGEDOWN:34,element:function(_19b){return _19b.target||_19b.srcElement;},isLeftClick:function(_19c){return (((_19c.which)&&(_19c.which==1))||((_19c.button)&&(_19c.button==1)));},pointerX:function(_19d){return _19d.pageX||(_19d.clientX+(document.documentElement.scrollLeft||document.body.scrollLeft));},pointerY:function(_19e){return _19e.pageY||(_19e.clientY+(document.documentElement.scrollTop||document.body.scrollTop));},stop:function(_19f){if(_19f.preventDefault){_19f.preventDefault();_19f.stopPropagation();}else{_19f.returnValue=false;_19f.cancelBubble=true;}},findElement:function(_1a0,_1a1){var _1a2=Event.element(_1a0);while(_1a2.parentNode&&(!_1a2.tagName||(_1a2.tagName.toUpperCase()!=_1a1.toUpperCase()))){_1a2=_1a2.parentNode;}return _1a2;},observers:false,_observeAndCache:function(_1a3,name,_1a5,_1a6){if(!this.observers){this.observers=[];}if(_1a3.addEventListener){this.observers.push([_1a3,name,_1a5,_1a6]);_1a3.addEventListener(name,_1a5,_1a6);}else{if(_1a3.attachEvent){this.observers.push([_1a3,name,_1a5,_1a6]);_1a3.attachEvent("on"+name,_1a5);}}},unloadCache:function(){if(!Event.observers){return;}for(var i=0;i<Event.observers.length;i++){Event.stopObserving.apply(this,Event.observers[i]);Event.observers[i][0]=null;}Event.observers=false;},observe:function(_1a8,name,_1aa,_1ab){_1a8=$(_1a8);_1ab=_1ab||false;if(name=="keypress"&&(navigator.appVersion.match(/Konqueror|Safari|KHTML/)||_1a8.attachEvent)){name="keydown";}Event._observeAndCache(_1a8,name,_1aa,_1ab);},stopObserving:function(_1ac,name,_1ae,_1af){_1ac=$(_1ac);_1af=_1af||false;if(name=="keypress"&&(navigator.appVersion.match(/Konqueror|Safari|KHTML/)||_1ac.detachEvent)){name="keydown";}if(_1ac.removeEventListener){_1ac.removeEventListener(name,_1ae,_1af);}else{if(_1ac.detachEvent){try{_1ac.detachEvent("on"+name,_1ae);}catch(e){}}}}});if(navigator.appVersion.match(/\bMSIE\b/)){Event.observe(window,"unload",Event.unloadCache,false);}var Position={includeScrollOffsets:false,prepare:function(){this.deltaX=window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0;this.deltaY=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0;},realOffset:function(_1b0){var _1b1=0,valueL=0;do{_1b1+=_1b0.scrollTop||0;valueL+=_1b0.scrollLeft||0;_1b0=_1b0.parentNode;}while(_1b0);return [valueL,_1b1];},cumulativeOffset:function(_1b2){var _1b3=0,valueL=0;do{_1b3+=_1b2.offsetTop||0;valueL+=_1b2.offsetLeft||0;_1b2=_1b2.offsetParent;}while(_1b2);return [valueL,_1b3];},positionedOffset:function(_1b4){var _1b5=0,valueL=0;do{_1b5+=_1b4.offsetTop||0;valueL+=_1b4.offsetLeft||0;_1b4=_1b4.offsetParent;if(_1b4){p=Element.getStyle(_1b4,"position");if(p=="relative"||p=="absolute"){break;}}}while(_1b4);return [valueL,_1b5];},offsetParent:function(_1b6){if(_1b6.offsetParent){return _1b6.offsetParent;}if(_1b6==document.body){return _1b6;}while((_1b6=_1b6.parentNode)&&_1b6!=document.body){if(Element.getStyle(_1b6,"position")!="static"){return _1b6;}}return document.body;},setup_cache:function(){this.cache_setup=0;},within:function(_1b7,x,y){if(this.includeScrollOffsets){return this.withinIncludingScrolloffsets(_1b7,x,y);}this.xcomp=x;this.ycomp=y;if(!this.cache_setup){setTimeout(this.setup_cache.bind(this),200);this.cache_setup=1;this.stored_offsets={};}this.offset=this.stored_offsets[_1b7.id];if(!this.offset){this.offset=this.cumulativeOffset(_1b7);this.stored_offsets[_1b7.id]=this.offset;}return (y>=this.offset[1]&&y<this.offset[1]+_1b7.offsetHeight&&x>=this.offset[0]&&x<this.offset[0]+_1b7.offsetWidth);},withinIncludingScrolloffsets:function(_1ba,x,y){var _1bd=this.realOffset(_1ba);this.xcomp=x+_1bd[0]-this.deltaX;this.ycomp=y+_1bd[1]-this.deltaY;this.offset=this.cumulativeOffset(_1ba);return (this.ycomp>=this.offset[1]&&this.ycomp<this.offset[1]+_1ba.offsetHeight&&this.xcomp>=this.offset[0]&&this.xcomp<this.offset[0]+_1ba.offsetWidth);},overlap:function(mode,_1bf){if(!mode){return 0;}if(mode=="vertical"){return ((this.offset[1]+_1bf.offsetHeight)-this.ycomp)/_1bf.offsetHeight;}if(mode=="horizontal"){return ((this.offset[0]+_1bf.offsetWidth)-this.xcomp)/_1bf.offsetWidth;}},page:function(_1c0){var _1c1=0,valueL=0;var _1c2=_1c0;do{_1c1+=_1c2.offsetTop||0;valueL+=_1c2.offsetLeft||0;if(_1c2.offsetParent==document.body){if(Element.getStyle(_1c2,"position")=="absolute"){break;}}}while(_1c2=_1c2.offsetParent);_1c2=_1c0;do{if(!window.opera||_1c2.tagName=="BODY"){_1c1-=_1c2.scrollTop||0;valueL-=_1c2.scrollLeft||0;}}while(_1c2=_1c2.parentNode);return [valueL,_1c1];},clone:function(_1c3,_1c4){var _1c5=Object.extend({setLeft:true,setTop:true,setWidth:true,setHeight:true,offsetTop:0,offsetLeft:0},arguments[2]||{});_1c3=$(_1c3);var p=Position.page(_1c3);_1c4=$(_1c4);var _1c7=[0,0];var _1c8=null;if(Element.getStyle(_1c4,"position")=="absolute"){_1c8=Position.offsetParent(_1c4);_1c7=Position.page(_1c8);}if(_1c8==document.body){_1c7[0]-=document.body.offsetLeft;_1c7[1]-=document.body.offsetTop;}if(_1c5.setLeft){_1c4.style.left=(p[0]-_1c7[0]+_1c5.offsetLeft)+"px";}if(_1c5.setTop){_1c4.style.top=(p[1]-_1c7[1]+_1c5.offsetTop)+"px";}if(_1c5.setWidth){_1c4.style.width=_1c3.offsetWidth+"px";}if(_1c5.setHeight){_1c4.style.height=_1c3.offsetHeight+"px";}},absolutize:function(_1c9){_1c9=$(_1c9);if(_1c9.style.position=="absolute"){return;}Position.prepare();var _1ca=Position.positionedOffset(_1c9);var top=_1ca[1];var left=_1ca[0];var _1cd=_1c9.clientWidth;var _1ce=_1c9.clientHeight;_1c9._originalLeft=left-parseFloat(_1c9.style.left||0);_1c9._originalTop=top-parseFloat(_1c9.style.top||0);_1c9._originalWidth=_1c9.style.width;_1c9._originalHeight=_1c9.style.height;_1c9.style.position="absolute";_1c9.style.top=top+"px";_1c9.style.left=left+"px";_1c9.style.width=_1cd+"px";_1c9.style.height=_1ce+"px";},relativize:function(_1cf){_1cf=$(_1cf);if(_1cf.style.position=="relative"){return;}Position.prepare();_1cf.style.position="relative";var top=parseFloat(_1cf.style.top||0)-(_1cf._originalTop||0);var left=parseFloat(_1cf.style.left||0)-(_1cf._originalLeft||0);_1cf.style.top=top+"px";_1cf.style.left=left+"px";_1cf.style.height=_1cf._originalHeight;_1cf.style.width=_1cf._originalWidth;}};if(/Konqueror|Safari|KHTML/.test(navigator.userAgent)){Position.cumulativeOffset=function(_1d2){var _1d3=0,valueL=0;do{_1d3+=_1d2.offsetTop||0;valueL+=_1d2.offsetLeft||0;if(_1d2.offsetParent==document.body){if(Element.getStyle(_1d2,"position")=="absolute"){break;}}_1d2=_1d2.offsetParent;}while(_1d2);return [valueL,_1d3];};}Element.addMethods();function getElementsBySelector(_1d4,_1d5){var _1d6=_1d5.split(" ");var i;var _1d8=[_1d4];var _1d9=false;for(i=0;i<_1d6.length;++i){var _1da=_1d6[i];var _1db;_1db=_1da.split("#");if(_1db.length>1){var j;var _1dd=_1db[0];var sel=_1db[1];var els=[];for(j=0;j<_1d8.length;++j){els[els.length]=$A(_1d8[j].getElementsByTagName(_1dd||"*")).filter(function(el){return el.id==sel;});}_1d8=els.flatten();_1d9=true;continue;}_1db=_1da.split(".");if(_1db.length>1){var j;var _1e2=_1db[0];var sel=_1db[1];var els=[];for(j=0;j<_1d8.length;++j){els[els.length]=$A(_1d8[j].getElementsByTagName(_1e2||"*")).filter(function(el){return hasClass(el,sel);});}_1d8=els.flatten();_1d9=true;continue;}}return _1d9?_1d8:[];}var Behavior={rules:[],apply:function(){var i;for(i=0;i<Behavior.rules.length;++i){var _1e7=Behavior.rules[i];var rule;for(rule in _1e7){if(rule instanceof Function){continue;}var _1e9=$$(rule);var _1ea=getElementsBySelector(document,rule);_1ea.each(function(_1eb){_1e7[rule](_1eb);});}}},applySelectedRule:function(_1ec){var i;for(i=0;i<Behavior.rules.length;++i){var _1ee=Behavior.rules[i];var rule=_1ee[_1ec];if(!rule||!(rule instanceof Function)){continue;}var _1f0=getElementsBySelector(document,_1ec);_1f0.each(function(_1f1){rule(_1f1);});}},register:function(_1f2){Behavior.rules.push(_1f2);},init:function(){Event.observe(window,"load",Behavior.apply);}};Behavior.init();var Rico={Version:"1.1.2",prototypeVersion:parseFloat(Prototype.Version.split(".")[0]+"."+Prototype.Version.split(".")[1])};if((typeof Prototype=="undefined")||Rico.prototypeVersion<1.3){throw ("Rico requires the Prototype JavaScript framework >= 1.3");}Rico.ArrayExtensions=new Array();if(Object.prototype.extend){Rico.ArrayExtensions[Rico.ArrayExtensions.length]=Object.prototype.extend;}else{Object.prototype.extend=function(_1f3){return Object.extend.apply(this,[this,_1f3]);};Rico.ArrayExtensions[Rico.ArrayExtensions.length]=Object.prototype.extend;}if(Array.prototype.push){Rico.ArrayExtensions[Rico.ArrayExtensions.length]=Array.prototype.push;}if(!Array.prototype.remove){Array.prototype.remove=function(dx){if(isNaN(dx)||dx>this.length){return false;}for(var i=0,n=0;i<this.length;i++){if(i!=dx){this[n++]=this[i];}}this.length-=1;};Rico.ArrayExtensions[Rico.ArrayExtensions.length]=Array.prototype.remove;}if(!Array.prototype.removeItem){Array.prototype.removeItem=function(item){for(var i=0;i<this.length;i++){if(this[i]==item){this.remove(i);break;}}};Rico.ArrayExtensions[Rico.ArrayExtensions.length]=Array.prototype.removeItem;}if(!Array.prototype.indices){Array.prototype.indices=function(){var _1f8=new Array();for(index in this){var _1f9=false;for(var i=0;i<Rico.ArrayExtensions.length;i++){if(this[index]==Rico.ArrayExtensions[i]){_1f9=true;break;}}if(!_1f9){_1f8[_1f8.length]=index;}}return _1f8;};Rico.ArrayExtensions[Rico.ArrayExtensions.length]=Array.prototype.indices;}if(window.DOMParser&&window.XMLSerializer&&window.Node&&Node.prototype&&Node.prototype.__defineGetter__){if(!Document.prototype.loadXML){Document.prototype.loadXML=function(s){var doc2=(new DOMParser()).parseFromString(s,"text/xml");while(this.hasChildNodes()){this.removeChild(this.lastChild);}for(var i=0;i<doc2.childNodes.length;i++){this.appendChild(this.importNode(doc2.childNodes[i],true));}};}Document.prototype.__defineGetter__("xml",function(){return (new XMLSerializer()).serializeToString(this);});}document.getElementsByTagAndClassName=function(_1fe,_1ff){if(_1fe==null){_1fe="*";}var _200=document.getElementsByTagName(_1fe)||document.all;var _201=new Array();if(_1ff==null){return _200;}for(var i=0;i<_200.length;i++){var _203=_200[i];var _204=_203.className.split(" ");for(var j=0;j<_204.length;j++){if(_204[j]==_1ff){_201.push(_203);break;}}}return _201;};Rico.Color=Class.create();Rico.Color.prototype={initialize:function(red,_207,blue){this.rgb={r:red,g:_207,b:blue};},setRed:function(r){this.rgb.r=r;},setGreen:function(g){this.rgb.g=g;},setBlue:function(b){this.rgb.b=b;},setHue:function(h){var hsb=this.asHSB();hsb.h=h;this.rgb=Rico.Color.HSBtoRGB(hsb.h,hsb.s,hsb.b);},setSaturation:function(s){var hsb=this.asHSB();hsb.s=s;this.rgb=Rico.Color.HSBtoRGB(hsb.h,hsb.s,hsb.b);},setBrightness:function(b){var hsb=this.asHSB();hsb.b=b;this.rgb=Rico.Color.HSBtoRGB(hsb.h,hsb.s,hsb.b);},darken:function(_212){var hsb=this.asHSB();this.rgb=Rico.Color.HSBtoRGB(hsb.h,hsb.s,Math.max(hsb.b-_212,0));},brighten:function(_214){var hsb=this.asHSB();this.rgb=Rico.Color.HSBtoRGB(hsb.h,hsb.s,Math.min(hsb.b+_214,1));},blend:function(_216){this.rgb.r=Math.floor((this.rgb.r+_216.rgb.r)/2);this.rgb.g=Math.floor((this.rgb.g+_216.rgb.g)/2);this.rgb.b=Math.floor((this.rgb.b+_216.rgb.b)/2);},isBright:function(){var hsb=this.asHSB();return this.asHSB().b>0.5;},isDark:function(){return !this.isBright();},asRGB:function(){return "rgb("+this.rgb.r+","+this.rgb.g+","+this.rgb.b+")";},asHex:function(){return "#"+this.rgb.r.toColorPart()+this.rgb.g.toColorPart()+this.rgb.b.toColorPart();},asHSB:function(){return Rico.Color.RGBtoHSB(this.rgb.r,this.rgb.g,this.rgb.b);},toString:function(){return this.asHex();}};Rico.Color.createFromHex=function(_218){if(_218.length==4){var _219=_218;var _21a="#";for(var i=1;i<4;i++){_21a+=(_219.charAt(i)+_219.charAt(i));}}if(_21a.indexOf("#")==0){_21a=_21a.substring(1);}var red=_21a.substring(0,2);var _21d=_21a.substring(2,4);var blue=_21a.substring(4,6);return new Rico.Color(parseInt(red,16),parseInt(_21d,16),parseInt(blue,16));};Rico.Color.createColorFromBackground=function(elem){var _220=RicoUtil.getElementsComputedStyle($(elem),"backgroundColor","background-color");if(_220=="transparent"&&elem.parentNode){return Rico.Color.createColorFromBackground(elem.parentNode);}if(_220==null){return new Rico.Color(255,255,255);}if(_220.indexOf("rgb(")==0){var _221=_220.substring(4,_220.length-1);var _222=_221.split(",");return new Rico.Color(parseInt(_222[0]),parseInt(_222[1]),parseInt(_222[2]));}else{if(_220.indexOf("#")==0){return Rico.Color.createFromHex(_220);}else{return new Rico.Color(255,255,255);}}};Rico.Color.HSBtoRGB=function(hue,_224,_225){var red=0;var _227=0;var blue=0;if(_224==0){red=parseInt(_225*255+0.5);_227=red;blue=red;}else{var h=(hue-Math.floor(hue))*6;var f=h-Math.floor(h);var p=_225*(1-_224);var q=_225*(1-_224*f);var t=_225*(1-(_224*(1-f)));switch(parseInt(h)){case 0:red=(_225*255+0.5);_227=(t*255+0.5);blue=(p*255+0.5);break;case 1:red=(q*255+0.5);_227=(_225*255+0.5);blue=(p*255+0.5);break;case 2:red=(p*255+0.5);_227=(_225*255+0.5);blue=(t*255+0.5);break;case 3:red=(p*255+0.5);_227=(q*255+0.5);blue=(_225*255+0.5);break;case 4:red=(t*255+0.5);_227=(p*255+0.5);blue=(_225*255+0.5);break;case 5:red=(_225*255+0.5);_227=(p*255+0.5);blue=(q*255+0.5);break;}}return {r:parseInt(red),g:parseInt(_227),b:parseInt(blue)};};Rico.Color.RGBtoHSB=function(r,g,b){var hue;var _232;var _233;var cmax=(r>g)?r:g;if(b>cmax){cmax=b;}var cmin=(r<g)?r:g;if(b<cmin){cmin=b;}_233=cmax/255;if(cmax!=0){_232=(cmax-cmin)/cmax;}else{_232=0;}if(_232==0){hue=0;}else{var redc=(cmax-r)/(cmax-cmin);var _237=(cmax-g)/(cmax-cmin);var _238=(cmax-b)/(cmax-cmin);if(r==cmax){hue=_238-_237;}else{if(g==cmax){hue=2+redc-_238;}else{hue=4+_237-redc;}}hue=hue/6;if(hue<0){hue=hue+1;}}return {h:hue,s:_232,b:_233};};Rico.DragAndDrop=Class.create();Rico.DragAndDrop.prototype={initialize:function(){this.dropZones=new Array();this.draggables=new Array();this.currentDragObjects=new Array();this.dragElement=null;this.lastSelectedDraggable=null;this.currentDragObjectVisible=false;this.interestedInMotionEvents=false;this._mouseDown=this._mouseDownHandler.bindAsEventListener(this);this._mouseMove=this._mouseMoveHandler.bindAsEventListener(this);this._mouseUp=this._mouseUpHandler.bindAsEventListener(this);},registerDropZone:function(_239){this.dropZones[this.dropZones.length]=_239;},deregisterDropZone:function(_23a){var _23b=new Array();var j=0;for(var i=0;i<this.dropZones.length;i++){if(this.dropZones[i]!=_23a){_23b[j++]=this.dropZones[i];}}this.dropZones=_23b;},clearDropZones:function(){this.dropZones=new Array();},registerDraggable:function(_23e){this.draggables[this.draggables.length]=_23e;this._addMouseDownHandler(_23e);},clearSelection:function(){for(var i=0;i<this.currentDragObjects.length;i++){this.currentDragObjects[i].deselect();}this.currentDragObjects=new Array();this.lastSelectedDraggable=null;},hasSelection:function(){return this.currentDragObjects.length>0;},setStartDragFromElement:function(e,_241){this.origPos=RicoUtil.toDocumentPosition(_241);this.startx=e.screenX-this.origPos.x;this.starty=e.screenY-this.origPos.y;this.interestedInMotionEvents=this.hasSelection();this._terminateEvent(e);},updateSelection:function(_242,_243){if(!_243){this.clearSelection();}if(_242.isSelected()){this.currentDragObjects.removeItem(_242);_242.deselect();if(_242==this.lastSelectedDraggable){this.lastSelectedDraggable=null;}}else{this.currentDragObjects[this.currentDragObjects.length]=_242;_242.select();this.lastSelectedDraggable=_242;}},_mouseDownHandler:function(e){if(arguments.length==0){e=event;}var _245=e.which!=undefined;if((_245&&e.which!=1)||(!_245&&e.button!=1)){return;}var _246=e.target?e.target:e.srcElement;var _247=_246.draggable;var _248=_246;while(_247==null&&_248.parentNode){_248=_248.parentNode;_247=_248.draggable;}if(_247==null){return;}this.updateSelection(_247,e.ctrlKey);if(this.hasSelection()){for(var i=0;i<this.dropZones.length;i++){this.dropZones[i].clearPositionCache();}}this.setStartDragFromElement(e,_247.getMouseDownHTMLElement());},_mouseMoveHandler:function(e){var _24b=e.which!=undefined;if(!this.interestedInMotionEvents){return;}if(!this.hasSelection()){return;}if(!this.currentDragObjectVisible){this._startDrag(e);}if(!this.activatedDropZones){this._activateRegisteredDropZones();}this._updateDraggableLocation(e);this._updateDropZonesHover(e);this._terminateEvent(e);},_makeDraggableObjectVisible:function(e){if(!this.hasSelection()){return;}var _24d;if(this.currentDragObjects.length>1){_24d=this.currentDragObjects[0].getMultiObjectDragGUI(this.currentDragObjects);}else{_24d=this.currentDragObjects[0].getSingleObjectDragGUI();}if(RicoUtil.getElementsComputedStyle(_24d,"position")!="absolute"){_24d.style.position="absolute";}if(_24d.parentNode==null||_24d.parentNode.nodeType==11){document.body.appendChild(_24d);}this.dragElement=_24d;this._updateDraggableLocation(e);this.currentDragObjectVisible=true;},_leftOffset:function(e){return e.offsetX?document.body.scrollLeft:0;},_topOffset:function(e){return e.offsetY?document.body.scrollTop:0;},_updateDraggableLocation:function(e){var _251=this.dragElement.style;if(navigator.userAgent.toLowerCase().indexOf("safari")>=0){_251.left=(e.screenX-this.startx)+"px";_251.top=(e.screenY-this.starty)+"px";}else{_251.left=(e.screenX+this._leftOffset(e)-this.startx)+"px";_251.top=(e.screenY+this._topOffset(e)-this.starty)+"px";}},_updateDropZonesHover:function(e){var n=this.dropZones.length;for(var i=0;i<n;i++){if(this.dropZones[i].canAccept(this.currentDragObjects)){if(this._mousePointInDropZone(e,this.dropZones[i])){this.dropZones[i].showHover(this.currentDragObjects,e);}else{this.dropZones[i].hideHover(this.currentDragObjects);}}}},_startDrag:function(e){for(var i=0;i<this.currentDragObjects.length;i++){this.currentDragObjects[i].startDrag();}this._makeDraggableObjectVisible(e);},_mouseUpHandler:function(e){if(!this.hasSelection()){return;}var _258=e.which!=undefined;if((_258&&e.which!=1)||(!_258&&e.button!=1)){return;}this.interestedInMotionEvents=false;if(this.dragElement==null){this._terminateEvent(e);return;}if(this._placeDraggableInDropZone(e)){this._completeDropOperation(e);}else{this._terminateEvent(e);new Rico.Effect.Position(this.dragElement,this.origPos.x,this.origPos.y,200,20,{complete:this._doCancelDragProcessing.bind(this)});}Event.stopObserving(document.body,"mousemove",this._mouseMove);Event.stopObserving(document.body,"mouseup",this._mouseUp);},_retTrue:function(){return true;},_completeDropOperation:function(e){if(this.dragElement!=this.currentDragObjects[0].getMouseDownHTMLElement()){if(this.dragElement.parentNode!=null){this.dragElement.parentNode.removeChild(this.dragElement);}}this._deactivateRegisteredDropZones();this._endDrag();this.clearSelection();this.dragElement=null;this.currentDragObjectVisible=false;this._terminateEvent(e);},_doCancelDragProcessing:function(){this._cancelDrag();if(this.dragElement!=this.currentDragObjects[0].getMouseDownHTMLElement()&&this.dragElement){if(this.dragElement.parentNode!=null){this.dragElement.parentNode.removeChild(this.dragElement);}}this._deactivateRegisteredDropZones();this.dragElement=null;this.currentDragObjectVisible=false;},_placeDraggableInDropZone:function(e){var _25b=false;var n=this.dropZones.length;for(var i=0;i<n;i++){if(this.dropZones[i].canAccept(this.currentDragObjects)){if(this._mousePointInDropZone(e,this.dropZones[i])){this.dropZones[i].hideHover(this.currentDragObjects);this.dropZones[i].accept(this.currentDragObjects);_25b=true;break;}}}return _25b;},_cancelDrag:function(){for(var i=0;i<this.currentDragObjects.length;i++){this.currentDragObjects[i].cancelDrag();}},_endDrag:function(){for(var i=0;i<this.currentDragObjects.length;i++){this.currentDragObjects[i].endDrag();}},_mousePointInDropZone:function(e,_261){var _262=_261.getAbsoluteRect();return e.clientY>_262.top+this._topOffset(e)&&e.clientY<_262.bottom+this._topOffset(e)&&e.clientX>_262.left+this._leftOffset(e)&&e.clientX<_262.right+this._leftOffset(e);},_addMouseDownHandler:function(_263){htmlElement=_263.getMouseDownHTMLElement();if(htmlElement!=null){htmlElement.draggable=_263;Event.observe(htmlElement,"mousedown",this._onmousedown.bindAsEventListener(this));Event.observe(htmlElement,"mousedown",this._mouseDown);}},_activateRegisteredDropZones:function(){var n=this.dropZones.length;for(var i=0;i<n;i++){var _266=this.dropZones[i];if(_266.canAccept(this.currentDragObjects)){_266.activate(this.currentDragObjects);}}this.activatedDropZones=true;},_deactivateRegisteredDropZones:function(){var n=this.dropZones.length;for(var i=0;i<n;i++){this.dropZones[i].deactivate();}this.activatedDropZones=false;},_onmousedown:function(){Event.observe(document.body,"mousemove",this._mouseMove);Event.observe(document.body,"mouseup",this._mouseUp);},_terminateEvent:function(e){if(e.stopPropagation!=undefined){e.stopPropagation();}else{if(e.cancelBubble!=undefined){e.cancelBubble=true;}}if(e.preventDefault!=undefined){e.preventDefault();}else{e.returnValue=false;}},initializeEventHandlers:function(){if(typeof document.implementation!="undefined"&&document.implementation.hasFeature("HTML","1.0")&&document.implementation.hasFeature("Events","2.0")&&document.implementation.hasFeature("CSS","2.0")){document.addEventListener("mouseup",this._mouseUpHandler.bindAsEventListener(this),false);document.addEventListener("mousemove",this._mouseMoveHandler.bindAsEventListener(this),false);}else{document.attachEvent("onmouseup",this._mouseUpHandler.bindAsEventListener(this));document.attachEvent("onmousemove",this._mouseMoveHandler.bindAsEventListener(this));}}};var dndMgr=new Rico.DragAndDrop();dndMgr.initializeEventHandlers();Rico.Draggable=Class.create();Rico.Draggable.prototype={initialize:function(type,_26b){this.type=type;this.htmlElement=$(_26b);this.selected=false;},getMouseDownHTMLElement:function(){return this.htmlElement;},select:function(){this.selected=true;if(this.showingSelected){return;}var _26c=this.getMouseDownHTMLElement();var _26d=Rico.Color.createColorFromBackground(_26c);_26d.isBright()?_26d.darken(0.033):_26d.brighten(0.033);this.saveBackground=RicoUtil.getElementsComputedStyle(_26c,"backgroundColor","background-color");this.showingSelected=true;},deselect:function(){this.selected=false;if(!this.showingSelected){return;}var _26e=this.getMouseDownHTMLElement();this.showingSelected=false;},isSelected:function(){return this.selected;},startDrag:function(){},cancelDrag:function(){},endDrag:function(){},getSingleObjectDragGUI:function(){return this.htmlElement;},getMultiObjectDragGUI:function(_26f){return this.htmlElement;},getDroppedGUI:function(){return this.htmlElement;},toString:function(){return this.type+":"+this.htmlElement+":";}};Rico.Dropzone=Class.create();Rico.Dropzone.prototype={initialize:function(_270){this.htmlElement=$(_270);this.absoluteRect=null;},getHTMLElement:function(){return this.htmlElement;},clearPositionCache:function(){this.absoluteRect=null;},getAbsoluteRect:function(){if(this.absoluteRect==null){var _271=this.getHTMLElement();var pos=RicoUtil.toViewportPosition(_271);this.absoluteRect={top:pos.y,left:pos.x,bottom:pos.y+_271.offsetHeight,right:pos.x+_271.offsetWidth};}return this.absoluteRect;},activate:function(){var _273=this.getHTMLElement();if(_273==null||this.showingActive){return;}this.showingActive=true;this.saveBackgroundColor=_273.style.backgroundColor;var _274="#ffea84";},deactivate:function(){var _275=this.getHTMLElement();if(_275==null||!this.showingActive){return;}this.showingActive=false;this.saveBackgroundColor=null;},showHover:function(){var _276=this.getHTMLElement();if(_276==null||this.showingHover){return;}this.saveBorderWidth=_276.style.borderWidth;this.saveBorderStyle=_276.style.borderStyle;this.saveBorderColor=_276.style.borderColor;this.showingHover=true;_276.style.borderWidth="1px";_276.style.borderStyle="solid";_276.style.borderColor="#ffff00";},hideHover:function(){var _277=this.getHTMLElement();if(_277==null||!this.showingHover){return;}_277.style.borderWidth=this.saveBorderWidth;_277.style.borderStyle=this.saveBorderStyle;_277.style.borderColor=this.saveBorderColor;this.showingHover=false;},canAccept:function(_278){return true;},accept:function(_279){var _27a=this.getHTMLElement();if(_27a==null){return;}n=_279.length;for(var i=0;i<n;i++){var _27c=_279[i].getDroppedGUI();if(RicoUtil.getElementsComputedStyle(_27c,"position")=="absolute"){_27c.style.position="static";_27c.style.top="";_27c.style.top="";}_27a.appendChild(_27c);}}};Rico.Effect={};Rico.Effect.SizeAndPosition=Class.create();Rico.Effect.SizeAndPosition.prototype={initialize:function(_27d,x,y,w,h,_282,_283,_284){this.element=$(_27d);this.x=x;this.y=y;this.w=w;this.h=h;this.duration=_282;this.steps=_283;this.options=arguments[7]||{};this.sizeAndPosition();},sizeAndPosition:function(){if(this.isFinished()){if(this.options.complete){this.options.complete(this);}return;}if(this.timer){clearTimeout(this.timer);}var _285=Math.round(this.duration/this.steps);var _286=this.element.offsetLeft;var _287=this.element.offsetTop;var _288=this.element.offsetWidth;var _289=this.element.offsetHeight;this.x=(this.x)?this.x:_286;this.y=(this.y)?this.y:_287;this.w=(this.w)?this.w:_288;this.h=(this.h)?this.h:_289;var difX=this.steps>0?(this.x-_286)/this.steps:0;var difY=this.steps>0?(this.y-_287)/this.steps:0;var difW=this.steps>0?(this.w-_288)/this.steps:0;var difH=this.steps>0?(this.h-_289)/this.steps:0;this.moveBy(difX,difY);this.resizeBy(difW,difH);this.duration-=_285;this.steps--;this.timer=setTimeout(this.sizeAndPosition.bind(this),_285);},isFinished:function(){return this.steps<=0;},moveBy:function(difX,difY){var _290=this.element.offsetLeft;var _291=this.element.offsetTop;var _292=parseInt(difX);var _293=parseInt(difY);var _294=this.element.style;if(_292!=0){_294.left=(_290+_292)+"px";}if(_293!=0){_294.top=(_291+_293)+"px";}},resizeBy:function(difW,difH){var _297=this.element.offsetWidth;var _298=this.element.offsetHeight;var _299=parseInt(difW);var _29a=parseInt(difH);var _29b=this.element.style;if(_299!=0){_29b.width=(_297+_299)+"px";}if(_29a!=0){_29b.height=(_298+_29a)+"px";}}};Rico.Effect.Size=Class.create();Rico.Effect.Size.prototype={initialize:function(_29c,w,h,_29f,_2a0,_2a1){new Rico.Effect.SizeAndPosition(_29c,null,null,w,h,_29f,_2a0,_2a1);}};Rico.Effect.Position=Class.create();Rico.Effect.Position.prototype={initialize:function(_2a2,x,y,_2a5,_2a6,_2a7){new Rico.Effect.SizeAndPosition(_2a2,x,y,null,null,_2a5,_2a6,_2a7);}};var RicoUtil={getElementsComputedStyle:function(_2a8,_2a9,_2aa){if(arguments.length==2){_2aa=_2a9;}var el=$(_2a8);if(el.currentStyle){return el.currentStyle[_2a9];}else{cs=document.defaultView.getComputedStyle(el,null);if(cs){return cs.getPropertyValue(_2aa);}else{return null;}}},createXmlDocument:function(){if(document.implementation&&document.implementation.createDocument){var doc=document.implementation.createDocument("","",null);if(doc.readyState==null){doc.readyState=1;doc.addEventListener("load",function(){doc.readyState=4;if(typeof doc.onreadystatechange=="function"){doc.onreadystatechange();}},false);}return doc;}if(window.ActiveXObject){return Try.these(function(){return new ActiveXObject("MSXML2.DomDocument");},function(){return new ActiveXObject("Microsoft.DomDocument");},function(){return new ActiveXObject("MSXML.DomDocument");},function(){return new ActiveXObject("MSXML3.DomDocument");})||false;}return null;},toViewportPosition:function(_2ad){return this._toAbsolute(_2ad,true);},toDocumentPosition:function(_2ae){return this._toAbsolute(_2ae,false);},_toAbsolute:function(_2af,_2b0){if(navigator.userAgent.toLowerCase().indexOf("msie")==-1){return this._toAbsoluteMozilla(_2af,_2b0);}var x=0;var y=0;var _2b3=_2af;while(_2b3){var _2b4=0;var _2b5=0;if(_2b3!=_2af){var _2b6=parseInt(this.getElementsComputedStyle(_2b3,"borderLeftWidth"));var _2b7=parseInt(this.getElementsComputedStyle(_2b3,"borderTopWidth"));_2b6=isNaN(_2b6)?0:_2b6;_2b7=isNaN(_2b7)?0:_2b7;}x+=_2b3.offsetLeft-_2b3.scrollLeft+_2b6;y+=_2b3.offsetTop-_2b3.scrollTop+_2b7;_2b3=_2b3.offsetParent;}if(_2b0){x-=this.docScrollLeft();y-=this.docScrollTop();}return {x:x,y:y};},_toAbsoluteMozilla:function(_2b8,_2b9){var x=0;var y=0;var _2bc=_2b8;while(_2bc){x+=_2bc.offsetLeft;y+=_2bc.offsetTop;_2bc=_2bc.offsetParent;}_2bc=_2b8;while(_2bc&&_2bc!=document.body&&_2bc!=document.documentElement){if(_2bc.scrollLeft){x-=_2bc.scrollLeft;}if(_2bc.scrollTop){y-=_2bc.scrollTop;}_2bc=_2bc.parentNode;}if(_2b9){x-=this.docScrollLeft();y-=this.docScrollTop();}return {x:x,y:y};},docScrollLeft:function(){if(window.pageXOffset){return window.pageXOffset;}else{if(document.documentElement&&document.documentElement.scrollLeft){return document.documentElement.scrollLeft;}else{if(document.body){return document.body.scrollLeft;}else{return 0;}}}},docScrollTop:function(){if(window.pageYOffset){return window.pageYOffset;}else{if(document.documentElement&&document.documentElement.scrollTop){return document.documentElement.scrollTop;}else{if(document.body){return document.body.scrollTop;}else{return 0;}}}}};String.prototype.parseColor=function(){var _2bd="#";if(this.slice(0,4)=="rgb("){var cols=this.slice(4,this.length-1).split(",");var i=0;do{_2bd+=parseInt(cols[i]).toColorPart();}while(++i<3);}else{if(this.slice(0,1)=="#"){if(this.length==4){for(var i=1;i<4;i++){_2bd+=(this.charAt(i)+this.charAt(i)).toLowerCase();}}if(this.length==7){_2bd=this.toLowerCase();}}}return (_2bd.length==7?_2bd:(arguments[0]||this));};Element.collectTextNodes=function(_2c1){return $A($(_2c1).childNodes).collect(function(node){return (node.nodeType==3?node.nodeValue:(node.hasChildNodes()?Element.collectTextNodes(node):""));}).flatten().join("");};Element.collectTextNodesIgnoreClass=function(_2c3,_2c4){return $A($(_2c3).childNodes).collect(function(node){return (node.nodeType==3?node.nodeValue:((node.hasChildNodes()&&!Element.hasClassName(node,_2c4))?Element.collectTextNodesIgnoreClass(node,_2c4):""));}).flatten().join("");};Element.setContentZoom=function(_2c6,_2c7){_2c6=$(_2c6);Element.setStyle(_2c6,{fontSize:(_2c7/100)+"em"});if(navigator.appVersion.indexOf("AppleWebKit")>0){window.scrollBy(0,0);}};Element.getOpacity=function(_2c8){var _2c9;if(_2c9=Element.getStyle(_2c8,"opacity")){return parseFloat(_2c9);}if(_2c9=(Element.getStyle(_2c8,"filter")||"").match(/alpha\(opacity=(.*)\)/)){if(_2c9[1]){return parseFloat(_2c9[1])/100;}}return 1;};Element.setOpacity=function(_2ca,_2cb){_2ca=$(_2ca);if(_2cb==1){Element.setStyle(_2ca,{opacity:(/Gecko/.test(navigator.userAgent)&&!/Konqueror|Safari|KHTML/.test(navigator.userAgent))?0.999999:1});if(/MSIE/.test(navigator.userAgent)&&!window.opera){Element.setStyle(_2ca,{filter:Element.getStyle(_2ca,"filter").replace(/alpha\([^\)]*\)/gi,"")});}}else{if(_2cb<0.00001){_2cb=0;}Element.setStyle(_2ca,{opacity:_2cb});if(/MSIE/.test(navigator.userAgent)&&!window.opera){Element.setStyle(_2ca,{filter:Element.getStyle(_2ca,"filter").replace(/alpha\([^\)]*\)/gi,"")+"alpha(opacity="+_2cb*100+")"});}}};Element.getInlineOpacity=function(_2cc){return $(_2cc).style.opacity||"";};Element.childrenWithClassName=function(_2cd,_2ce,_2cf){var _2d0=new RegExp("(^|\\s)"+_2ce+"(\\s|$)");var _2d1=$A($(_2cd).getElementsByTagName("*"))[_2cf?"detect":"select"](function(c){return (c.className&&c.className.match(_2d0));});if(!_2d1){_2d1=[];}return _2d1;};Element.forceRerendering=function(_2d3){try{_2d3=$(_2d3);var n=document.createTextNode(" ");_2d3.appendChild(n);_2d3.removeChild(n);}catch(e){}};Array.prototype.call=function(){var args=arguments;this.each(function(f){f.apply(this,args);});};var Effect={_elementDoesNotExistError:{name:"ElementDoesNotExistError",message:"The specified DOM element does not exist, but is required for this effect to operate"},tagifyText:function(_2d7){if(typeof Builder=="undefined"){throw ("Effect.tagifyText requires including script.aculo.us' builder.js library");}var _2d8="position:relative";if(/MSIE/.test(navigator.userAgent)&&!window.opera){_2d8+=";zoom:1";}_2d7=$(_2d7);$A(_2d7.childNodes).each(function(_2d9){if(_2d9.nodeType==3){_2d9.nodeValue.toArray().each(function(_2da){_2d7.insertBefore(Builder.node("span",{style:_2d8},_2da==" "?String.fromCharCode(160):_2da),_2d9);});Element.remove(_2d9);}});},multiple:function(_2db,_2dc){var _2dd;if(((typeof _2db=="object")||(typeof _2db=="function"))&&(_2db.length)){_2dd=_2db;}else{_2dd=$(_2db).childNodes;}var _2de=Object.extend({speed:0.1,delay:0},arguments[2]||{});var _2df=_2de.delay;$A(_2dd).each(function(_2e0,_2e1){new _2dc(_2e0,Object.extend(_2de,{delay:_2e1*_2de.speed+_2df}));});},PAIRS:{"slide":["SlideDown","SlideUp"],"blind":["BlindDown","BlindUp"],"appear":["Appear","Fade"]},toggle:function(_2e2,_2e3){_2e2=$(_2e2);_2e3=(_2e3||"appear").toLowerCase();var _2e4=Object.extend({queue:{position:"end",scope:(_2e2.id||"global"),limit:1}},arguments[2]||{});Effect[_2e2.visible()?Effect.PAIRS[_2e3][1]:Effect.PAIRS[_2e3][0]](_2e2,_2e4);}};var Effect2=Effect;Effect.Transitions={};Effect.Transitions.linear=Prototype.K;Effect.Transitions.sinoidal=function(pos){return (-Math.cos(pos*Math.PI)/2)+0.5;};Effect.Transitions.reverse=function(pos){return 1-pos;};Effect.Transitions.flicker=function(pos){return ((-Math.cos(pos*Math.PI)/4)+0.75)+Math.random()/4;};Effect.Transitions.wobble=function(pos){return (-Math.cos(pos*Math.PI*(9*pos))/2)+0.5;};Effect.Transitions.pulse=function(pos){return (Math.floor(pos*10)%2==0?(pos*10-Math.floor(pos*10)):1-(pos*10-Math.floor(pos*10)));};Effect.Transitions.none=function(pos){return 0;};Effect.Transitions.full=function(pos){return 1;};Effect.ScopedQueue=Class.create();Object.extend(Object.extend(Effect.ScopedQueue.prototype,Enumerable),{initialize:function(){this.effects=[];this.interval=null;},_each:function(_2ec){this.effects._each(_2ec);},add:function(_2ed){var _2ee=new Date().getTime();var _2ef=(typeof _2ed.options.queue=="string")?_2ed.options.queue:_2ed.options.queue.position;switch(_2ef){case "front":this.effects.findAll(function(e){return e.state=="idle";}).each(function(e){e.startOn+=_2ed.finishOn;e.finishOn+=_2ed.finishOn;});break;case "end":_2ee=this.effects.pluck("finishOn").max()||_2ee;break;}_2ed.startOn+=_2ee;_2ed.finishOn+=_2ee;if(!_2ed.options.queue.limit||(this.effects.length<_2ed.options.queue.limit)){this.effects.push(_2ed);}if(!this.interval){this.interval=setInterval(this.loop.bind(this),40);}},remove:function(_2f2){this.effects=this.effects.reject(function(e){return e==_2f2;});if(this.effects.length==0){clearInterval(this.interval);this.interval=null;}},loop:function(){var _2f4=new Date().getTime();this.effects.invoke("loop",_2f4);}});Effect.Queues={instances:$H(),get:function(_2f5){if(typeof _2f5!="string"){return _2f5;}if(!this.instances[_2f5]){this.instances[_2f5]=new Effect.ScopedQueue();}return this.instances[_2f5];}};Effect.Queue=Effect.Queues.get("global");Effect.DefaultOptions={transition:Effect.Transitions.sinoidal,duration:1,fps:25,sync:false,from:0,to:1,delay:0,queue:"parallel"};Effect.Base=function(){};Effect.Base.prototype={position:null,start:function(_2f6){this.options=Object.extend(Object.extend({},Effect.DefaultOptions),_2f6||{});this.currentFrame=0;this.state="idle";this.startOn=this.options.delay*1000;this.finishOn=this.startOn+(this.options.duration*1000);this.event("beforeStart");if(!this.options.sync){Effect.Queues.get(typeof this.options.queue=="string"?"global":this.options.queue.scope).add(this);}},loop:function(_2f7){if(_2f7>=this.startOn){if(_2f7>=this.finishOn){this.render(1);this.cancel();this.event("beforeFinish");if(this.finish){this.finish();}this.event("afterFinish");return;}var pos=(_2f7-this.startOn)/(this.finishOn-this.startOn);var _2f9=Math.round(pos*this.options.fps*this.options.duration);if(_2f9>this.currentFrame){this.render(pos);this.currentFrame=_2f9;}}},render:function(pos){if(this.state=="idle"){this.state="running";this.event("beforeSetup");if(this.setup){this.setup();}this.event("afterSetup");}if(this.state=="running"){if(this.options.transition){pos=this.options.transition(pos);}pos*=(this.options.to-this.options.from);pos+=this.options.from;this.position=pos;this.event("beforeUpdate");if(this.update){this.update(pos);}this.event("afterUpdate");}},cancel:function(){if(!this.options.sync){Effect.Queues.get(typeof this.options.queue=="string"?"global":this.options.queue.scope).remove(this);}this.state="finished";},event:function(_2fb){if(this.options[_2fb+"Internal"]){this.options[_2fb+"Internal"](this);}if(this.options[_2fb]){this.options[_2fb](this);}},inspect:function(){return "#<Effect:"+$H(this).inspect()+",options:"+$H(this.options).inspect()+">";}};Effect.Parallel=Class.create();Object.extend(Object.extend(Effect.Parallel.prototype,Effect.Base.prototype),{initialize:function(_2fc){this.effects=_2fc||[];this.start(arguments[1]);},update:function(_2fd){this.effects.invoke("render",_2fd);},finish:function(_2fe){this.effects.each(function(_2ff){_2ff.render(1);_2ff.cancel();_2ff.event("beforeFinish");if(_2ff.finish){_2ff.finish(_2fe);}_2ff.event("afterFinish");});}});Effect.Opacity=Class.create();Object.extend(Object.extend(Effect.Opacity.prototype,Effect.Base.prototype),{initialize:function(_300){this.element=$(_300);if(!this.element){throw (Effect._elementDoesNotExistError);}if(/MSIE/.test(navigator.userAgent)&&!window.opera&&(!this.element.currentStyle.hasLayout)){this.element.setStyle({zoom:1});}var _301=Object.extend({from:this.element.getOpacity()||0,to:1},arguments[1]||{});this.start(_301);},update:function(_302){this.element.setOpacity(_302);}});Effect.Move=Class.create();Object.extend(Object.extend(Effect.Move.prototype,Effect.Base.prototype),{initialize:function(_303){this.element=$(_303);if(!this.element){throw (Effect._elementDoesNotExistError);}var _304=Object.extend({x:0,y:0,mode:"relative"},arguments[1]||{});this.start(_304);},setup:function(){this.element.makePositioned();this.originalLeft=parseFloat(this.element.getStyle("left")||"0");this.originalTop=parseFloat(this.element.getStyle("top")||"0");if(this.options.mode=="absolute"){this.options.x=this.options.x-this.originalLeft;this.options.y=this.options.y-this.originalTop;}},update:function(_305){this.element.setStyle({left:Math.round(this.options.x*_305+this.originalLeft)+"px",top:Math.round(this.options.y*_305+this.originalTop)+"px"});}});Effect.MoveBy=function(_306,_307,_308){return new Effect.Move(_306,Object.extend({x:_308,y:_307},arguments[3]||{}));};Effect.Scale=Class.create();Object.extend(Object.extend(Effect.Scale.prototype,Effect.Base.prototype),{initialize:function(_309,_30a){this.element=$(_309);if(!this.element){throw (Effect._elementDoesNotExistError);}var _30b=Object.extend({scaleX:true,scaleY:true,scaleContent:true,scaleFromCenter:false,scaleMode:"box",scaleFrom:100,scaleTo:_30a},arguments[2]||{});this.start(_30b);},setup:function(){this.restoreAfterFinish=this.options.restoreAfterFinish||false;this.elementPositioning=this.element.getStyle("position");this.originalStyle={};["top","left","width","height","fontSize"].each(function(k){this.originalStyle[k]=this.element.style[k];}.bind(this));this.originalTop=this.element.offsetTop;this.originalLeft=this.element.offsetLeft;var _30d=this.element.getStyle("font-size")||"100%";["em","px","%","pt"].each(function(_30e){if(_30d.indexOf(_30e)>0){this.fontSize=parseFloat(_30d);this.fontSizeType=_30e;}}.bind(this));this.factor=(this.options.scaleTo-this.options.scaleFrom)/100;this.dims=null;if(this.options.scaleMode=="box"){this.dims=[this.element.offsetHeight,this.element.offsetWidth];}if(/^content/.test(this.options.scaleMode)){this.dims=[this.element.scrollHeight,this.element.scrollWidth];}if(!this.dims){this.dims=[this.options.scaleMode.originalHeight,this.options.scaleMode.originalWidth];}},update:function(_30f){var _310=(this.options.scaleFrom/100)+(this.factor*_30f);if(this.options.scaleContent&&this.fontSize){this.element.setStyle({fontSize:this.fontSize*_310+this.fontSizeType});}this.setDimensions(this.dims[0]*_310,this.dims[1]*_310);},finish:function(_311){if(this.restoreAfterFinish){this.element.setStyle(this.originalStyle);}},setDimensions:function(_312,_313){var d={};if(this.options.scaleX){d.width=Math.round(_313)+"px";}if(this.options.scaleY){d.height=Math.round(_312)+"px";}if(this.options.scaleFromCenter){var topd=(_312-this.dims[0])/2;var _316=(_313-this.dims[1])/2;if(this.elementPositioning=="absolute"){if(this.options.scaleY){d.top=this.originalTop-topd+"px";}if(this.options.scaleX){d.left=this.originalLeft-_316+"px";}}else{if(this.options.scaleY){d.top=-topd+"px";}if(this.options.scaleX){d.left=-_316+"px";}}}this.element.setStyle(d);}});Effect.Highlight=Class.create();Object.extend(Object.extend(Effect.Highlight.prototype,Effect.Base.prototype),{initialize:function(_317){this.element=$(_317);if(!this.element){throw (Effect._elementDoesNotExistError);}var _318=Object.extend({startcolor:"#ffff99"},arguments[1]||{});this.start(_318);},setup:function(){if(this.element.getStyle("display")=="none"){this.cancel();return;}this.oldStyle={backgroundImage:this.element.getStyle("background-image")};this.element.setStyle({backgroundImage:"none"});if(!this.options.endcolor){this.options.endcolor=this.element.getStyle("background-color").parseColor("#ffffff");}if(!this.options.restorecolor){this.options.restorecolor=this.element.getStyle("background-color");}this._base=$R(0,2).map(function(i){return parseInt(this.options.startcolor.slice(i*2+1,i*2+3),16);}.bind(this));this._delta=$R(0,2).map(function(i){return parseInt(this.options.endcolor.slice(i*2+1,i*2+3),16)-this._base[i];}.bind(this));},update:function(_31b){this.element.setStyle({backgroundColor:$R(0,2).inject("#",function(m,v,i){return m+(Math.round(this._base[i]+(this._delta[i]*_31b)).toColorPart());}.bind(this))});},finish:function(){this.element.setStyle(Object.extend(this.oldStyle,{backgroundColor:this.options.restorecolor}));}});Effect.ScrollTo=Class.create();Object.extend(Object.extend(Effect.ScrollTo.prototype,Effect.Base.prototype),{initialize:function(_31f){this.element=$(_31f);this.start(arguments[1]||{});},setup:function(){Position.prepare();var _320=Position.cumulativeOffset(this.element);if(this.options.offset){_320[1]+=this.options.offset;}var max=window.innerHeight?window.height-window.innerHeight:document.body.scrollHeight-(document.documentElement.clientHeight?document.documentElement.clientHeight:document.body.clientHeight);this.scrollStart=Position.deltaY;this.delta=(_320[1]>max?max:_320[1])-this.scrollStart;},update:function(_322){Position.prepare();window.scrollTo(Position.deltaX,this.scrollStart+(_322*this.delta));}});Effect.Fade=function(_323){_323=$(_323);var _324=_323.getInlineOpacity();var _325=Object.extend({from:_323.getOpacity()||1,to:0,afterFinishInternal:function(_326){if(_326.options.to!=0){return;}_326.element.hide();_326.element.setStyle({opacity:_324});}},arguments[1]||{});return new Effect.Opacity(_323,_325);};Effect.Appear=function(_327){_327=$(_327);var _328=Object.extend({from:(_327.getStyle("display")=="none"?0:_327.getOpacity()||0),to:1,afterFinishInternal:function(_329){_329.element.forceRerendering();},beforeSetup:function(_32a){_32a.element.setOpacity(_32a.options.from);_32a.element.show();}},arguments[1]||{});return new Effect.Opacity(_327,_328);};Effect.Puff=function(_32b){_32b=$(_32b);var _32c={opacity:_32b.getInlineOpacity(),position:_32b.getStyle("position"),top:_32b.style.top,left:_32b.style.left,width:_32b.style.width,height:_32b.style.height};return new Effect.Parallel([new Effect.Scale(_32b,200,{sync:true,scaleFromCenter:true,scaleContent:true,restoreAfterFinish:true}),new Effect.Opacity(_32b,{sync:true,to:0})],Object.extend({duration:1,beforeSetupInternal:function(_32d){Position.absolutize(_32d.effects[0].element);},afterFinishInternal:function(_32e){_32e.effects[0].element.hide();_32e.effects[0].element.setStyle(_32c);}},arguments[1]||{}));};Effect.BlindUp=function(_32f){_32f=$(_32f);_32f.makeClipping();return new Effect.Scale(_32f,0,Object.extend({scaleContent:false,scaleX:false,restoreAfterFinish:true,afterFinishInternal:function(_330){_330.element.hide();_330.element.undoClipping();}},arguments[1]||{}));};Effect.BlindDown=function(_331){_331=$(_331);var _332=_331.getDimensions();return new Effect.Scale(_331,100,Object.extend({scaleContent:false,scaleX:false,scaleFrom:0,scaleMode:{originalHeight:_332.height,originalWidth:_332.width},restoreAfterFinish:true,afterSetup:function(_333){_333.element.makeClipping();_333.element.setStyle({height:"0px"});_333.element.show();},afterFinishInternal:function(_334){_334.element.undoClipping();}},arguments[1]||{}));};Effect.SwitchOff=function(_335){_335=$(_335);var _336=_335.getInlineOpacity();return new Effect.Appear(_335,Object.extend({duration:0.4,from:0,transition:Effect.Transitions.flicker,afterFinishInternal:function(_337){new Effect.Scale(_337.element,1,{duration:0.3,scaleFromCenter:true,scaleX:false,scaleContent:false,restoreAfterFinish:true,beforeSetup:function(_338){_338.element.makePositioned();_338.element.makeClipping();},afterFinishInternal:function(_339){_339.element.hide();_339.element.undoClipping();_339.element.undoPositioned();_339.element.setStyle({opacity:_336});}});}},arguments[1]||{}));};Effect.DropOut=function(_33a){_33a=$(_33a);var _33b={top:_33a.getStyle("top"),left:_33a.getStyle("left"),opacity:_33a.getInlineOpacity()};return new Effect.Parallel([new Effect.Move(_33a,{x:0,y:100,sync:true}),new Effect.Opacity(_33a,{sync:true,to:0})],Object.extend({duration:0.5,beforeSetup:function(_33c){_33c.effects[0].element.makePositioned();},afterFinishInternal:function(_33d){_33d.effects[0].element.hide();_33d.effects[0].element.undoPositioned();_33d.effects[0].element.setStyle(_33b);}},arguments[1]||{}));};Effect.Shake=function(_33e){_33e=$(_33e);var _33f={top:_33e.getStyle("top"),left:_33e.getStyle("left")};return new Effect.Move(_33e,{x:20,y:0,duration:0.05,afterFinishInternal:function(_340){new Effect.Move(_340.element,{x:-40,y:0,duration:0.1,afterFinishInternal:function(_341){new Effect.Move(_341.element,{x:40,y:0,duration:0.1,afterFinishInternal:function(_342){new Effect.Move(_342.element,{x:-40,y:0,duration:0.1,afterFinishInternal:function(_343){new Effect.Move(_343.element,{x:40,y:0,duration:0.1,afterFinishInternal:function(_344){new Effect.Move(_344.element,{x:-20,y:0,duration:0.05,afterFinishInternal:function(_345){_345.element.undoPositioned();_345.element.setStyle(_33f);}});}});}});}});}});}});};Effect.SlideDown=function(_346){_346=$(_346);_346.cleanWhitespace();var _347=$(_346.firstChild).getStyle("bottom");var _348=_346.getDimensions();return new Effect.Scale(_346,100,Object.extend({scaleContent:false,scaleX:false,scaleFrom:window.opera?0:1,scaleMode:{originalHeight:_348.height,originalWidth:_348.width},restoreAfterFinish:true,afterSetup:function(_349){_349.element.makePositioned();_349.element.firstChild.makePositioned();if(window.opera){_349.element.setStyle({top:""});}_349.element.makeClipping();_349.element.setStyle({height:"0px"});_349.element.show();},afterUpdateInternal:function(_34a){_34a.element.firstChild.setStyle({bottom:(_34a.dims[0]-_34a.element.clientHeight)+"px"});},afterFinishInternal:function(_34b){_34b.element.undoClipping();if(/MSIE/.test(navigator.userAgent)&&!window.opera){_34b.element.undoPositioned();_34b.element.firstChild.undoPositioned();}else{_34b.element.firstChild.undoPositioned();_34b.element.undoPositioned();}_34b.element.firstChild.setStyle({bottom:_347});}},arguments[1]||{}));};Effect.SlideUp=function(_34c){_34c=$(_34c);_34c.cleanWhitespace();var _34d=$(_34c.firstChild).getStyle("bottom");return new Effect.Scale(_34c,window.opera?0:1,Object.extend({scaleContent:false,scaleX:false,scaleMode:"box",scaleFrom:100,restoreAfterFinish:true,beforeStartInternal:function(_34e){_34e.element.makePositioned();_34e.element.firstChild.makePositioned();if(window.opera){_34e.element.setStyle({top:""});}_34e.element.makeClipping();_34e.element.show();},afterUpdateInternal:function(_34f){_34f.element.firstChild.setStyle({bottom:(_34f.dims[0]-_34f.element.clientHeight)+"px"});},afterFinishInternal:function(_350){_350.element.hide();_350.element.undoClipping();_350.element.firstChild.undoPositioned();_350.element.undoPositioned();_350.element.setStyle({bottom:_34d});}},arguments[1]||{}));};Effect.Squish=function(_351){return new Effect.Scale(_351,window.opera?1:0,{restoreAfterFinish:true,beforeSetup:function(_352){_352.element.makeClipping(_352.element);},afterFinishInternal:function(_353){_353.element.hide(_353.element);_353.element.undoClipping(_353.element);}});};Effect.Grow=function(_354){_354=$(_354);var _355=Object.extend({direction:"center",moveTransition:Effect.Transitions.sinoidal,scaleTransition:Effect.Transitions.sinoidal,opacityTransition:Effect.Transitions.full},arguments[1]||{});var _356={top:_354.style.top,left:_354.style.left,height:_354.style.height,width:_354.style.width,opacity:_354.getInlineOpacity()};var dims=_354.getDimensions();var _358,initialMoveY;var _359,moveY;switch(_355.direction){case "top-left":_358=initialMoveY=_359=moveY=0;break;case "top-right":_358=dims.width;initialMoveY=moveY=0;_359=-dims.width;break;case "bottom-left":_358=_359=0;initialMoveY=dims.height;moveY=-dims.height;break;case "bottom-right":_358=dims.width;initialMoveY=dims.height;_359=-dims.width;moveY=-dims.height;break;case "center":_358=dims.width/2;initialMoveY=dims.height/2;_359=-dims.width/2;moveY=-dims.height/2;break;}return new Effect.Move(_354,{x:_358,y:initialMoveY,duration:0.01,beforeSetup:function(_35a){_35a.element.hide();_35a.element.makeClipping();_35a.element.makePositioned();},afterFinishInternal:function(_35b){new Effect.Parallel([new Effect.Opacity(_35b.element,{sync:true,to:1,from:0,transition:_355.opacityTransition}),new Effect.Move(_35b.element,{x:_359,y:moveY,sync:true,transition:_355.moveTransition}),new Effect.Scale(_35b.element,100,{scaleMode:{originalHeight:dims.height,originalWidth:dims.width},sync:true,scaleFrom:window.opera?1:0,transition:_355.scaleTransition,restoreAfterFinish:true})],Object.extend({beforeSetup:function(_35c){_35c.effects[0].element.setStyle({height:"0px"});_35c.effects[0].element.show();},afterFinishInternal:function(_35d){_35d.effects[0].element.undoClipping();_35d.effects[0].element.undoPositioned();_35d.effects[0].element.setStyle(_356);}},_355));}});};Effect.Shrink=function(_35e){_35e=$(_35e);var _35f=Object.extend({direction:"center",moveTransition:Effect.Transitions.sinoidal,scaleTransition:Effect.Transitions.sinoidal,opacityTransition:Effect.Transitions.none},arguments[1]||{});var _360={top:_35e.style.top,left:_35e.style.left,height:_35e.style.height,width:_35e.style.width,opacity:_35e.getInlineOpacity()};var dims=_35e.getDimensions();var _362,moveY;switch(_35f.direction){case "top-left":_362=moveY=0;break;case "top-right":_362=dims.width;moveY=0;break;case "bottom-left":_362=0;moveY=dims.height;break;case "bottom-right":_362=dims.width;moveY=dims.height;break;case "center":_362=dims.width/2;moveY=dims.height/2;break;}return new Effect.Parallel([new Effect.Opacity(_35e,{sync:true,to:0,from:1,transition:_35f.opacityTransition}),new Effect.Scale(_35e,window.opera?1:0,{sync:true,transition:_35f.scaleTransition,restoreAfterFinish:true}),new Effect.Move(_35e,{x:_362,y:moveY,sync:true,transition:_35f.moveTransition})],Object.extend({beforeStartInternal:function(_363){_363.effects[0].element.makePositioned();_363.effects[0].element.makeClipping();},afterFinishInternal:function(_364){_364.effects[0].element.hide();_364.effects[0].element.undoClipping();_364.effects[0].element.undoPositioned();_364.effects[0].element.setStyle(_360);}},_35f));};Effect.Pulsate=function(_365){_365=$(_365);var _366=arguments[1]||{};var _367=_365.getInlineOpacity();var _368=_366.transition||Effect.Transitions.sinoidal;var _369=function(pos){return _368(1-Effect.Transitions.pulse(pos));};_369.bind(_368);return new Effect.Opacity(_365,Object.extend(Object.extend({duration:3,from:0,afterFinishInternal:function(_36b){_36b.element.setStyle({opacity:_367});}},_366),{transition:_369}));};Effect.Fold=function(_36c){_36c=$(_36c);var _36d={top:_36c.style.top,left:_36c.style.left,width:_36c.style.width,height:_36c.style.height};Element.makeClipping(_36c);return new Effect.Scale(_36c,5,Object.extend({scaleContent:false,scaleX:false,afterFinishInternal:function(_36e){new Effect.Scale(_36c,1,{scaleContent:false,scaleY:false,afterFinishInternal:function(_36f){_36f.element.hide();_36f.element.undoClipping();_36f.element.setStyle(_36d);}});}},arguments[1]||{}));};["setOpacity","getOpacity","getInlineOpacity","forceRerendering","setContentZoom","collectTextNodes","collectTextNodesIgnoreClass","childrenWithClassName"].each(function(f){Element.Methods[f]=Element[f];});Element.Methods.visualEffect=function(_371,_372,_373){s=_372.gsub(/_/,"-").camelize();effect_class=s.charAt(0).toUpperCase()+s.substring(1);new Effect[effect_class](_371,_373);return $(_371);};Element.addMethods();if(typeof console=="undefined"){console={log:function(msg){}};}function safeify(func,name){return function(){try{return func.apply(this,arguments);}catch(e){console.log("Error in "+(name||func)+" at "+e.lineNumber+": "+e);return null;}};}function find(_377,item){if(len_of(_377)){var i;for(i=0;i<_377.length;i++){if(_377[i]==item){return i;}}}return -1;}function insertBeforeInList(_37a,_37b,_37c){if(len_of(_37a)){var i;for(i=_37a.length-1;i>-1;i--){_37a[i+1]=_37a[i];if(_37a[i]==_37c){_37a[i]=_37b;return i;}}}_37a[0]=_37b;return -1;}function insertAfterInList(_37e,_37f,_380){if(len_of(_37e)){var i;for(i=_37e.length-1;i>-1;i--){_37e[i+1]=_37e[i];if(_37e[i]==_380){_37e[i+1]=_37f;return i;}}}_37e[0]=_37f;return -1;}function addClass(_382,_383){if(!hasClass(_382,_383)){_382.className+=_382.className?" "+_383:_383;}}function removeClass(_384,_385){var re=new RegExp("\\b"+_385+"\\b");_384.className=_384.className.replace(re,"").trim().replace("  "," ");}function hasClass(_387,_388){return new RegExp("\\b"+_388+"\\b").test(_387.className);}function len_of(_389){return (_389&&_389.length?_389.length:0);}function evalHTML(_38a){if(typeof (_38a)!="string"){return null;}_38a=_38a.strip();if(_38a.length==0){return null;}var _38b=document.createElement("DIV");_38b.innerHTML="<TABLE><TBODY>"+_38a+"</TBODY></TABLE>";var body=_38b.firstChild.firstChild;var html=document.createDocumentFragment();var _38e;for(i=0;i<body.childNodes.length;i++){_38e=body.childNodes[i];html.appendChild(_38e);}return html;}function addLoadEvent(func){var _390=window.onload;if(typeof window.onload!="function"){window.onload=func;}else{window.onload=function(){if(_390){_390();}func();};}}function toggle(obj){if(obj.style.display=="none"){obj.style.display=obj.getAttribute("desired_display");}else{obj.setAttribute("desired_display",obj.style.display);obj.style.display="none";}}function insertAfter(_392,_393){if(_393.nextSibling){_393.parentNode.insertBefore(_392,_393.nextSibling);}else{_393.parentNode.appendChild(_392);}}function debugThing(){}var AddTaskDraggable=Class.create();AddTaskDraggable.prototype=(new Rico.Draggable()).extend({initialize:function(_394,name){this.type="AddTask";this.refElement=$(_394);this.htmlElement=this.refElement;this.name=name;}});var ColumnDraggable=Class.create();ColumnDraggable.prototype=(new Rico.Draggable()).extend({initialize:function(name){this.type="Column";this.htmlElement=$(name+"-heading");this.name=name;this.parent=$("column-heading");},startDrag:function(){var _397=this.htmlElement;var _398=false;$A(this.parent.getElementsByClassName("draggable-column-heading")).each(function(col,i){if(col==_397){col.tmpIndex=null;_398=true;}else{col.tmpIndex=_398?i-1:i;}});$A($("tasks").getElementsByClassName(this.name+"-column")).each(function(col){addClass(col,"currently-dragged-column");});},__finishDrag:function(){$A($("tasks").getElementsByClassName(this.name+"-column")).each(function(col){removeClass(col,"currently-dragged-column");});},endDrag:function(){this.__finishDrag();},cancelDrag:function(){this.__finishDrag();},getSingleObjectDragGUI:function(){var el=this.htmlElement;var div=document.createElement("div");div.className="customDraggable";div.style.width=this.htmlElement.offsetWidth;var text=el.innerHTML;new Insertion.Top(div,text);return div;}});var TaskItemDraggable=Class.create();TaskItemDraggable.prototype=(new Rico.Draggable()).extend({initialize:function(_3a0,_3a1,_3a2,name){this.type="Custom";this.refElement=$(_3a1);this.htmlElement=$(_3a0);this.owner=$(_3a2);this.name=name;},startDrag:function(){addClass(this.refElement,"drag");this.owner.dropzones.each(function(_3a4){dndMgr.deregisterDropZone(_3a4);});var _3a5=function(list){$A(list).each(function(node){addClass($("draggable_"+node.getAttribute("task_id")),"undroppable");_3a5(node.childTasks);node.dropzones.each(function(_3a8){dndMgr.deregisterDropZone(_3a8);});});};_3a5(this.owner.childTasks);},cancelDrag:function(){removeClass(this.refElement,"drag");this.endDrag();},endDrag:function(){this.owner.dropzones.each(function(_3a9){dndMgr.registerDropZone(_3a9);});var reg=function(list){$A(list).each(function(node){removeClass($("draggable_"+node.getAttribute("task_id")),"undroppable");reg(node.childTasks);node.dropzones.each(function(_3ad){dndMgr.registerDropZone(_3ad);});});};reg(this.owner.childTasks);},getSingleObjectDragGUI:function(){var el=this.htmlElement;var div=document.createElement("div");div.className="customDraggable";div.style.width=this.htmlElement.offsetWidth;var text=el.innerHTML;new Insertion.Top(div,text);return div;}});var ColumnDropzone=Class.create();ColumnDropzone.prototype=(new Rico.Dropzone()).extend({lastColIndex:-1,initialize:function(name){this.colName=name;this.htmlElement=$(name+"-heading");this.absoluteRect=null;this.acceptedObjects=[];this.halfWidth=this.htmlElement.offsetWidth/2;},canAccept:function(_3b2){var l=_3b2[0];if(l.type!="Column"){return false;}if(l.name==this.colName){return false;}return true;},activate:function(_3b4){return;},showHover:function(_3b5,e){var _3b7=this.__mouseInMyLeftHalf(e);var _3b8=this.htmlElement.tmpIndex;if(_3b7){_3b8-=0.5;}else{_3b8+=0.5;}if(_3b8==ColumnDropzone.lastColIndex){return;}if(_3b7){moveSecondBeforeFirst(this.colName,_3b5[0].name);}else{moveSecondAfterFirst(this.colName,_3b5[0].name);}ColumnDropzone.lastColIndex=_3b8;},hideHover:function(_3b9){return;},__mouseInMyLeftHalf:function(e){return e.clientX<(this.getAbsoluteRect().left+this.halfWidth+(e.offsetX?document.body.scrollLeft:0));},accept:function(_3bb){ColumnDropzone.lastColLeft=ColumnDropzone.lastColRight=null;var _3bc=[];$A($("column-heading").getElementsByTagName("TH")).each(function(col){var name=col.id.replace("-heading","");if(name=="status"){return;}_3bc[_3bc.length]=name;});_3bc=_3bc.join(",");setPermalink("columnOrder",_3bc);}});var TaskItemDropzone=Class.create();TaskItemDropzone.prototype=(new Rico.Dropzone()).extend({initialize:function(_3bf,_3c0,_3c1,_3c2,_3c3,_3c4){this.htmlElement=$(_3bf);this.refElement=$(_3c0);this.owner=$(_3c1);this.absoluteRect=null;this.acceptedObjects=[];this.task_id=_3c2;this.indicator=$(_3c4);this.drop_reparent=_3c3;},showHover:function(){removeClass(this.indicator,"hidden");},activate:function(){return;},hideHover:function(){addClass(this.indicator,"hidden");},canAccept:function(_3c5){var l=_3c5.length;var i;for(i=0;i<l;i++){if(_3c5[i].type=="Column"){return false;}}return true;},accept:function(_3c8){var l=_3c8.length;var i;for(i=0;i<l;i++){doDrop(_3c8[i].refElement,this.refElement,this);}}});function createColumnDragDrop(_3cb){dndMgr.registerDraggable(new ColumnDraggable(_3cb));dndMgr.registerDropZone(new ColumnDropzone(_3cb));}function createDragDrop(){if(!initialized&&hasReorderableTasks()){initialized=true;dndMgr.registerDropZone(new TaskItemDropzone("sibling_dropzone_0","sibling_dropzone_0",0,0,false,"sibling_dropzone_indicator_0"));$A($("tasks").getElementsByClassName("task-item")).each(function(node){enableDragDrop(node);});if($("deadline-heading")){createColumnDragDrop("deadline");}if($("updated-heading")){createColumnDragDrop("updated");}if($("priority-heading")){createColumnDragDrop("priority");}if($("owner-heading")){createColumnDragDrop("owner");}}}function enableDragDrop(node){var id=node.getAttribute("task_id");dndMgr.registerDraggable(node.draggable=new TaskItemDraggable("draggable_"+id,"draggable_"+id,node.id,"draggable-name"));node.dropzones=[];dndMgr.registerDropZone(node.dropzones[0]=new TaskItemDropzone("child_dropzone_"+id,"child_dropzone_"+id,node.id,id,true,"child_dropzone_indicator_"+id));dndMgr.registerDropZone(node.dropzones[1]=new TaskItemDropzone("sibling_dropzone_"+id,"sibling_dropzone_"+id,node.id,id,false,"sibling_dropzone_indicator_"+id));}var myrules={".draggable":function(_3cf){_3cf.onclick=function(e){e=e||event;if(hasClass(_3cf,"drag")){removeClass(_3cf,"drag");return false;}else{if(e.target&&e.target.doclick){return e.target.doclick(e);}else{if(e.srcElement&&e.srcElement.doclick){return e.srcElement.doclick(e);}}}};},"a#add_a_task":function(_3d1){_3d1.doclick=function(){showTaskCreate();return false;};},"img.treewidget":function(_3d2){_3d2.doclick=function(){toggleCollapse(_3d2.id.replace("handle_",""));return false;};},"a.task_item":function(_3d3){_3d3.doclick=function(){return true;};},"a#show_description":function(_3d4){_3d4.onclick=function(){$("hideable_add_description").hide();$("hideable_title_label").show();$("description_field").show();$("text").focus();return false;};},".post-link":function(_3d5){var form=Builder.node("form",{action:_3d5.getAttribute("href"),method:"POST"});form.style.display="inline";_3d5.parentNode.insertBefore(form,_3d5);_3d5.onclick=function(){var msg=_3d5.getAttribute("confirm_msg");if((msg&&confirm(msg))||!msg){form.submit();}return false;};},"th.draggable-column-heading":function(_3d8){_3d8.onclick=function(){if(!this.columnName){this.columnName=this.id.replace("-heading","");}sortBy(this.columnName);return false;};},".unfolded":function(_3d9){_3d9.onclick=unfold;},"a.uses_permalink":function(_3da){var _3db=$("permalink");if(_3db){_3da.href=_3da.getAttribute("base_href")+"?"+_3db.getAttribute("permalink");}}};Behavior.register(myrules);function showFilterColumn(_3dc){$(_3dc+"-filter-label").hide();$(_3dc+"_filter").show();$(_3dc+"_filter").focus();}function hasTasks(){return $("tasks");}function hasReorderableTasks(){var _3dd=hasTasks();return _3dd&&_3dd.getAttribute("hasReorderableTasks")=="True"&&_3dd.getElementsByTagName("TH").length;}function setTaskParents(){var _3de=hasTasks();if(_3de){$A(_3de.getElementsByClassName("task-item")).each(function(task){var _3e0;var _3e1;if(!task.childTasks){task.childTasks=[];}if((_3e0=task.getAttribute("parentID"))&&(_3e1=$("task_"+_3e0))){if(len_of(_3e1.childTasks)){_3e1.childTasks[_3e1.childTasks.length]=task;}else{_3e1.childTasks=[task];}}});}}function setupEmptyList(){in_task_show=$("subtasks")?1:0;if($("tasks")&&!($("tasks").getElementsByClassName("task-item").length)&&!in_task_show){showTaskCreate();}}function filterDeadline(task){var _3e3=$("deadline_filter").value;if(_3e3=="All"){return false;}var _3e4=task.getAttribute("deadline");if(_3e3=="None"){if(_3e4!="None"){return true;}else{return false;}}if(_3e4=="None"){return true;}var _3e5=_3e3.split(",");if(_3e5.length==1){var _3e6=new Date();_3e6.setHours(0,0,0,0);_3e6.setDate(_3e6.getDate()+parseInt(_3e5[0]));var db=new DateBocks();_3e4=db.parseDateString(_3e4);_3e4.setHours(0,0,0,0);return !_3e6.equalsTo(_3e4);}var min;var max;min=parseInt(_3e5[0]);max=parseInt(_3e5[1]);var _3ea=new Date();_3ea.setHours(0,0,0,0);var _3eb=new Date();_3eb.setHours(0,0,0,0);_3ea.setDate(_3ea.getDate()-min);_3eb.setDate(_3eb.getDate()+max+1);var db=new DateBocks();var _3ed=db.parseDateString(_3e4);if(_3ed>_3eb){return true;}if(min<max&&(_3ed<=_3ea)){return true;}return false;}function filterUpdated(task){var _3ef=$("updated_filter").value;if(_3ef=="All"){return false;}if(_3ef=="None"){if(task.getAttribute("updated")){return true;}else{return false;}}var _3f0=_3ef.split(",");var min;var max;if(_3f0.length==1){min=-1*parseInt(_3f0[0]);max=parseInt(_3f0[0]);}else{min=-1*parseInt(_3f0[0]);max=-1*parseInt(_3f0[1]);}var _3f3=new Date();var _3f4=new Date();_3f3.setDate(_3f3.getDate()-min);_3f4.setDate(_3f4.getDate()+max+1);var _3f5=task.getAttribute("updated");if(_3f5){var db=new DateBocks();var _3f7=db.parseDateString(_3f5);if(!(_3f7<_3f4)){return true;}if(min>=max&&!(_3f7>=_3f3)){return true;}return false;}else{return true;}}function filterField(_3f8,task){if(_3f8=="deadline"){return filterDeadline(task);}if(_3f8=="updated"){return filterUpdated(task);}var _3fa=$(_3f8+"_filter").value.replace(" ","%20");if(_3fa=="All"){return false;}console.log(task.getAttribute(_3f8));if(task.getAttribute(_3f8)!=_3fa){return true;}}function filterNodeByAllFields(node){var _3fc=false;var _3fd=$("task_"+node.getAttribute("parentID"));node.depth_adjustment=0;if(_3fd){node.depth_adjustment=_3fd.depth_adjustment||0;}$A(["status","deadline","priority","owner","updated"]).each(function(_3fe){var _3ff=false;var _400=$(_3fe+"_filter");if(!_400){return;}var _401=_400.value;setPermalink(_3fe,_401);if(_401=="All"){_3ff=true;}if(!_3ff&&!_3fc){if(filterField(_3fe,node)){var _402=$("second_line_"+node.getAttribute("task_id"));if(_402){_402.hide();}--node.depth_adjustment;_3fc=true;}}reindentTask(node.getAttribute("task_id"),node.depth_adjustment);});return _3fc;}function filterListByAllFields(){$A($("tasks").getElementsByClassName("task-item")).each(function(node){if(filterNodeByAllFields(node)){node.hide();$("second_line_"+node.getAttribute("task_id")).hide();}else{node.show();$("second_line_"+node.getAttribute("task_id")).show();}});}filterLookups=new Object;filterLookups.deadline=new Object;filterLookups.deadline["Past due"]="-1";filterLookups.deadline["Due today"]="0";filterLookups.deadline["Due tomorrow"]="1";filterLookups.deadline["Due in the next week"]="0,7";filterLookups.deadline["No deadline"]="None";filterLookups.priority=new Object;filterLookups.priority["No priority"]="None";filterLookups.owner=new Object;filterLookups.owner["No owner"]="None";filterLookups.updated=new Object;filterLookups.updated["Today"]="0";filterLookups.updated["Yesterday"]="-1";filterLookups.updated["In the past week"]="-7,0";function sortAndFilter(){if(!hasReorderableTasks()||!$("permalink")){return;}var _404=$("permalink").getAttribute("permalink");_404=_404.split("&");var i;var _406=false;var _407=false;var _408=false;for(i=0;i<_404.length;++i){var key=_404[i].split("=");var val=key[1];key=key[0];if(key=="sortBy"){_407=val;}else{if(key=="sortOrder"){if(val=="up"||val=="down"){_408=val;}}else{var _40b=$(key+"_filter");if(_40b){_40b.value=val;if(_40b.value!=val){val=filterLookups[key][val];_40b.value=val;}if(_40b.value==val){_406=true;}}}}}if(_407){sortBy(_407,_408);}if(_406){filterListByAllFields();}}function viewChangeableField(_40c,_40d){selected_form=$(_40d+"-form_"+_40c);selected_label=$(_40d+"-label_"+_40c);selected_label.hide();selected_form.show();$(_40d+"_"+_40c).focus();}function hideChangeableField(_40e,_40f){selected_form=null;selected_label=null;$(_40f+"-form_"+_40e).hide();$(_40f+"-label_"+_40e).show();}function restoreAddTask(){$("add_task_anchor").appendChild($("movable_add_task"));showTaskCreate();$("add_task_form_parentID").setAttribute("value",0);$("add_task_form_siblingID").setAttribute("value",0);return false;}function doneAddingTask(req){$("error").innerHTML="";var _411=parseInt($("add_task_form_parentID").getAttribute("value"));var _412=parseInt($("add_task_form_siblingID").getAttribute("value"));var _413=evalHTML(req.responseText);var _414=_413.firstChild;var _415=$("no_tasks_placeholder");if(_415){_415.parentNode.removeChild(_415);}var _416=$("tasks");if(_412!=0){var _417=$("task_"+_412);insertAfter(_413,_417);}else{if(_411!=0&&!hasClass(_416,"all_tasks")){var _418=$("task_"+_411);insertAfter(_413,_418);updateTaskItem(_411);if($("movable_add_task")){$("movable_add_task").parentNode.appendChild($("movable_add_task"));}}else{target=_416;for(i=0;i<_416.childNodes.length;++i){child=_416.childNodes[i];if(child.tagName=="TBODY"){target=child;break;}}tt=target;nf=_413;target.appendChild(_413);}}_414.childTasks=[];enableDragDrop(_414);Behavior.apply();$A($("add_task_form").getElements()).each(function(node){if(node.type=="checkbox"){node.checked=false;}else{if(node.type=="submit"||node.type=="hidden"){return;}else{node.value="";}}});$("title").focus();if($("post_add_task")){eval($("post_add_task").getAttribute("func"))();}return;}doneAddingTask=safeify(doneAddingTask,"doneAddingTask");function failedAddingTask(req){$("error").innerHTML=req.responseText;console.log("failed to add task");}function changeField(_41b,_41c){if(changeEventsDisabled){return;}var _41d=$(_41c+"_"+_41b);_41d.disabled=true;var _41e=$("authenticator").value;var _41f=$("global-values").getAttribute("change_url");var url=_41f+_41b+"?field="+_41c+"&authenticator="+_41e;var _421=(_41d.type=="checkbox")?_41d.checked:_41d.value;_421=encodeURIComponent(_421);var _422=$("task_"+_41b);var _423=_422.getAttribute("is_preview");var _424=_422.getAttribute("is_flat");var _425=_422.getAttribute("editable_title");var _426=$("global-values");_426=(_426?_426.getAttribute("depth"):0);var _427;if($("permalink")){_427=$("permalink").getAttribute("permalink");if(_427){_427=_427.match(/columnOrder=[\w,]+/);if(_427){_427=_427[0];}}}var req=new Ajax.Request(url,{asynchronous:true,evalScripts:true,method:"post",parameters:_41c+"="+_421+"&is_preview="+_423+"&is_flat="+_424+"&editable_title="+_425+"&depth="+_426+(_427?"&columnOrder="+_427:""),onSuccess:doneChangingField.bind([_41b,_41c]),onFailure:failedChangingField.bind([_41b,_41c])});}var selected_form;var selected_label;function recalculateUncompletedChildren(_429){var _42a=0;var _42b=function(task){if(task.getAttribute("status")!="done"){++_42a;}task.childTasks.each(function(_42d){_42b(_42d);});};_429.childTasks.each(function(_42e){_42b(_42e);});var _42f=_429.getElementsByClassName("num_subtasks")[0];_42f.innerHTML=_42a;if(_42a==0){_42f.parentNode.hide();}else{_42f.parentNode.show();}var _430=_429.getElementsByClassName("the-word-task")[0];if(_42a==1){_430.innerHTML="task";}else{_430.innerHTML="tasks";}}function updateTaskItem(_431){var _432=$("title_"+_431);var _433=$("task_"+_431);var _434=$("handle_"+_431);var _435;if(_433.getAttribute("status")=="done"){_435="completed-task";}else{var db=new DateBocks();var date=_433.getAttribute("deadline");_435="uncompleted-task";if(date&&date!="None"){var now=new Date();if(date&&db.parseDateString(date)<now){_435="overdue-task";}}}var root;if(_433.childNodes[1].nodeType==1){root=(parseInt(_433.childNodes[1].getAttribute("depth"))===0)?"root-task":"sub-task";}else{root="root-task";}_432.setAttribute("class",_435+" "+root);if(len_of(_433.childTasks)){expandTask(_431);}else{flattenTask(_431);}recalculateUncompletedChildren(_433);uncompletedTasks=0;$A(document.getElementsByClassName("task-item")).each(function(task){if(task.getAttribute("status")!="done"){++uncompletedTasks;}});}function revertField(_43b,_43c){var _43d=$(_43c+"_"+_43b);var orig=_43d.getAttribute("originalvalue");var _43f=$(_43c+"-label_"+_43b);_43d.value=orig;_43f.innerHTML=orig;hideChangeableField(_43b,_43c);}function doneChangingField(req){if(req.status==200){succeededChangingField.bind(this)(req);}else{failedChangingField.bind(this)(req);}}function updateParentTask(_441){recalculateUncompletedChildren(_441);var _442=_441.getAttribute("parentID");if(_442){var _443=$("task_"+_442);if(_443){updateParentTask(_443);}}}function succeededChangingField(req){var _445=this[0];var _446=this[1];var _447=$(_446+"_"+_445);_447.disabled=false;var _448=evalHTML(req.responseText);var _449=$("task_"+_445);var _44a=$("task_"+_449.getAttribute("parentID"));_449.parentNode.replaceChild(_448,_449);_448=$("task_"+_445);_448.childTasks=_449.childTasks;var _44b;if(_44a&&len_of(_44a.childTasks)){for(_44b=0;_44b<_44a.childTasks.length;_44b++){if(_44a.childTasks[_44b]==_449){break;}}}if(_44a&&_44a.getAttribute("is_flat")!="True"){if(len_of(_44a.childTasks)){if(_44b>=_44a.childTasks.length){_44a.childTasks[length]=_448;}else{insertBeforeInList(_44a.childTasks,_448,_44a.childTasks[_44b]);}}else{_44a.childTasks[0]=_448;}_44a.childTasks.removeItem(_449);}if($("post_edit_task")){func=eval($("post_edit_task").getAttribute("func"));func(_445,_446);}enableDragDrop(_448);if(_44a){updateParentTask(_44a);}}function failedChangingField(req){var _44d=this[0];var _44e=this[1];var _44f=$(_44e+"_"+_44d);var _450=$(_44e+"-label_"+_44d);revertField(_44d,_44e);_44f.disabled=false;_450.style.color="red";}function reindentTask(_451,_452){var task=$("task_"+_451);var _454=task.getElementsByTagName("SPAN")[0];var _455=$$("#task_"+_451+" .handle")[0];var _456=parseInt(_454.getAttribute("depth"))+_452;_455.style.marginLeft=15*_456+"px";}function doneMovingTask(req){var _458=eval(req.responseText);var _459=$$("#breaking-row")[0].parentNode;var _45a=_459;_458.each(function(_45b){var task=$("task_"+_45b.id);if(_45b.has_children){expandTask(_45b.id);}else{flattenTask(_45b.id);}var _45d=_45b.depth;var _45e=task.getElementsByTagName("SPAN")[0];_45e.setAttribute("depth",_45d);var _45f=$$("#task_"+_45b.id+" .handle")[0];_45f.style.marginLeft=15*_45d+"px";var _460=$("second_line_"+_45b.id);insertAfter(task,_45a);insertAfter(_460,task);_45a=_460;});}function showTaskCreate(){removeClass($("create"),"hidden");$("show_create").hide();$("title").focus();return false;}var mode="view";function doneDestroyingTask(req){var _462=this;$("task_"+_462).remove();$("second_line_"+_462).remove();}function failedDestroyingTask(req){var _464=this;$("task_"+_464).show();$("second_line_"+_464).show();}function destroyTask(_465,_466){var _467=_465.getAttribute("task_id");$("task_"+_467).hide();$("second_line_"+_467).hide();var req=new Ajax.Request("/task/destroy/"+_467,{asynchronous:true,evalScripts:true,method:"post",onSuccess:doneDestroyingTask.bind(_467),onFailure:failedDestroyingTask.bind(_467)});}function doDrop(_469,_46a,_46b){var id;if(_46a==_469){return;}if(!_469.id.match("draggable")){if(_46a.id.match(/^title_/)){id=parseInt(_46a.id.replace(/^title_/,""));$("add_task_form_parentID").setAttribute("value",id);$("add_task_form_siblingID").setAttribute("value",0);var _46d=$("task_"+id);var tr=document.createElement("TR");tr.className="taskrow";var td=document.createElement("TD");td.appendChild(_469);tr.appendChild(td);insertAfter(tr,_46d);}else{id=parseInt(_46a.id.replace(/^handle_/,""));$("add_task_form_parentID").setAttribute("value",0);$("add_task_form_siblingID").setAttribute("value",id);var _470=$("task_"+id);var _471=_470.parentNode;var tr=document.createElement("TR");tr.className="taskrow";tr.appendChild(_469);insertAfter(_469,_470);}return;}var _473=_469.id.replace("draggable_","");var _474=$("task_"+_473).getAttribute("parentID");id=parseInt(_46b.task_id);var _475=$("global-values").getAttribute("move_url");if(_46b.drop_reparent){var _476=$("task_"+id);new Ajax.Request(_475+_473,{asynchronous:true,evalScripts:true,method:"post",parameters:"new_parent="+id,onSuccess:doneMovingTask,onFailure:debugThing});}else{var _477=$("task_"+id);new Ajax.Request(_475+_473,{asynchronous:true,evalScripts:true,method:"post",parameters:"new_sibling="+id,onSuccess:doneMovingTask,onFailure:debugThing});}}function removeRow(ul,row){ul.removeChild(row);var id=row.getAttribute("task_id");row.second_line=$("second_line_"+id);ul.removeChild(row.second_line);}function sortListBy(ul,_47c,_47d,_47e){if(!_47e){_47e="0";}items=$A(ul.getElementsByClassName("task-item")).filter(function(i){return i.getAttribute("parentID")==_47e;});var _480=(_47c=="priority");var _481={"High":1,"Medium":2,"Low":3,"None":4};for(i=0;i<items.length;i++){var item=items[i];var _483=item.getAttribute(_47c);var _484=item.getAttribute("sort_index");if(_480){key=_481[_483];}else{if(_483){key=_483;}else{if(_47d==1){key=undefined;}else{key=0;}}}items[i]=[key,_484,item];}items=items.sort();if(_47d<0){items=items.reverse();}ul=ul.getElementsByTagName("TBODY")[0];for(i=0;i<items.length;i++){var item=items[i][2];items[i]=item;removeRow(ul,item);$A(item.childTasks).each(function(i){removeRow(ul,i);});}items.each(function(x){ul.appendChild(x);ul.appendChild(x.second_line);$A(x.childTasks).each(function(i){ul.appendChild(i);ul.appendChild(i.second_line);});if(len_of(x.childTasks)){sortListBy($("tasks"),_47c,_47d,x.getAttribute("task_id"));}});}function setCollapse(_489,val){var node=$("task_"+_489);var _48c=$("handle_"+_489);var _48d=val?"minus.png":"plus.png";if(val){if(!filterNodeByAllFields(node)){node.show();$("second_line_"+_489).show();}}else{node.hide();$("second_line_"+_489).hide();}if(!val||_48c.src.match("plus.png")){$A(node.childTasks).each(function(n){setCollapse(n.getAttribute("task_id"),val);});}}function toggleCollapse(_48f){var _490=$("handle_"+_48f);if(_490.src.match("minus.png")){_490.src=_490.src.replace("minus.png","plus.png");$A($("task_"+_48f).childTasks).each(function(node){setCollapse(node.getAttribute("task_id"),1);});}else{if(_490.src.match("plus.png")){_490.src=_490.src.replace("plus.png","minus.png");$A($("task_"+_48f).childTasks).each(function(node){setCollapse(node.getAttribute("task_id"),0);});}}}function expandTask(_493){var _494=$("handle_"+_493);if(_494.src.match("blank.png")){_494.src=_494.src.replace("blank.png","plus.png");}else{if(_494.src.match("minus.png")){toggleCollapse(_493);}}}function flattenTask(_495){var _496=$("handle_"+_495);_496.src=_496.src.replace(/(plus|minus).png$/,"blank.png");}function sortBy(_497,_498){$A(document.getElementsByClassName("sort-arrows")).each(function(e){e.hide();});$A(document.getElementsByClassName("column-heading")).each(function(e){if(hasClass(e,_497+"-column")){if(!_498){_498=e.getAttribute("sortOrder")=="up"?"down":"up";}e.setAttribute("sortOrder",_498);addClass(e,"selected-column");_498=e.getAttribute("sortOrder");}else{e.setAttribute("sortOrder","");removeClass(e,"selected-column");}});$(_497+"-arrows").show();var _49b=(_498=="up")?"down":"up";addClass($(_497+"-"+_49b+"-arrow"),"grayed-out");removeClass($(_497+"-"+_498+"-arrow"),"grayed-out");setPermalink("sortBy",_497);setPermalink("sortOrder",_498);sortListBy($("tasks"),_497,_498=="up"?1:-1);}var initialized=false;function unfold(){var _49c=$("edit_"+this.id);_49c.style["display"]="block";$(this).hide();}function setPermalink(_49d,_49e){var _49f=$("permalink");if(!_49f){return;}var _4a0=_49f.getAttribute("permalink");function wrapitup(){_49f.setAttribute("permalink",_4a0);_49f.href=_49f.getAttribute("base")+"?"+_49f.getAttribute("permalink");Behavior.applySelectedRule("a.uses_permalink");}var _4a1=_4a0.split("&");var i;for(i=0;i<_4a1.length;++i){var key=_4a1[i].split("=");var val=key[1];var key=key[0];if(key==_49d){if(_49e=="All"){_4a0=_4a0.replace(key+"="+val+"&","");}else{_4a0=_4a0.replace(key+"="+val,_49d+"="+_49e);}wrapitup();return;}}if(_49e=="All"){return;}_4a0+=(_49d+"="+_49e+"&");wrapitup();}function onBodyClick(_4a6){trigger=Event.element(_4a6);node=trigger;while(node.parentNode){if(node==selected_form){return;}node=node.parentNode;}if(selected_form){selected_form.hide();selected_form=null;selected_label.show();selected_label=null;}}function moveSecondNextToFirst(a,b,_4a9){var x=a+"-column";var y=b+"-column";$A($("tasks").getElementsByTagName("TR")).each(function(row){var one=row.getElementsByClassName(x)[0];var two=row.getElementsByClassName(y)[0];if(one&&two){if(_4a9){row.insertBefore(two,one);}else{insertAfter(two,one);}}});}function moveSecondBeforeFirst(a,b){moveSecondNextToFirst(a,b,true);}function moveSecondAfterFirst(a,b){moveSecondNextToFirst(a,b,false);}Event.observe(document,"mousedown",onBodyClick);addLoadEvent(createDragDrop);addLoadEvent(setupEmptyList);addLoadEvent(setTaskParents);addLoadEvent(sortAndFilter);function utc(d){return Date.UTC(d.getFullYear(),d.getMonth(),d.getDate());}function date_diff(_4b4,_4b5){var _4b6=utc(_4b4);var _4b7=utc(_4b5);return (_4b6-_4b7)/86400000;}function dayOfWeek(day){return "SunMonTueWedThuFriSatSun".substr(day*3,3);}function monthName(_4b9){var _4ba=["January","February","March","April","May","June","July","August","September","October","November","December"];return _4ba[_4b9];}function pretty_date_engine(now,date){var diff=date_diff(date,now);if(diff==-1){return "Yesterday";}if(diff==0){return "Today";}if(diff==1){return "Tomorrow";}if(diff<7&&diff>0){return dayOfWeek(date.getDay());}if(diff<90&&date.getYear()==now.getYear()){return monthName(date.getMonth())+" "+date.getDate();}return monthName(date.getMonth())+" "+date.getDate()+", "+date.getFullYear();}function pretty_date_from_text(text,now){if(text=="No deadline"){return text;}console.log(text);parts=text.split("/");return pretty_date(new Date(parseInt(parts[2],10),parseInt(parts[0],10)-1,parseInt(parts[1],10)),now);}function pretty_date(date,now){if(!now){now=new Date();}return pretty_date_engine(now,date);}function test_pretty_date(){var now=new Date(2006,0,1);var _4c3=[["Today",new Date(2006,0,1)],["Tomorrow",new Date(2006,0,2)],["Yesterday",new Date(2005,11,31)],["December 30, 2005",new Date(2005,11,30)],["Tue",new Date(2006,0,3)],["Sat",new Date(2006,0,7)],["January 8",new Date(2006,0,8)],["December 8, 2006",new Date(2006,11,8)],["January 8, 2007",new Date(2007,0,8)]];var i;for(i=0;i<_4c3.length;i++){var date=_4c3[i][1];var pd=pretty_date_engine(now,date);if(pd!=_4c3[i][0]){alert("failure mapping "+date+" to "+_4c3[i][0]+", got "+pd);}}now=new Date(2006,0,1);_4c3=[["Today","01/01/2006"],["Tomorrow","01/02/2006"],["Yesterday","12/31/2005"],["December 30, 2005","12/30/2005"],["Tue","01/03/2006"],["Sat","01/07/2006"],["January 8","01/08/2006"],["December 8, 2006","12/08/2006"],["January 8, 2007","01/08/2007"]];var i;for(i=0;i<_4c3.length;i++){var date=_4c3[i][1];var pd=pretty_date_from_text(date,now);if(pd!=_4c3[i][0]){alert("failure mapping "+date+" to "+_4c3[i][0]+", got "+pd);}}}var Builder={NODEMAP:{AREA:"map",CAPTION:"table",COL:"table",COLGROUP:"table",LEGEND:"fieldset",OPTGROUP:"select",OPTION:"select",PARAM:"object",TBODY:"table",TD:"table",TFOOT:"table",TH:"table",THEAD:"table",TR:"table"},node:function(_4ca){_4ca=_4ca.toUpperCase();var _4cb=this.NODEMAP[_4ca]||"div";var _4cc=document.createElement(_4cb);try{_4cc.innerHTML="<"+_4ca+"></"+_4ca+">";}catch(e){}var _4cd=_4cc.firstChild||null;if(_4cd&&(_4cd.tagName!=_4ca)){_4cd=_4cd.getElementsByTagName(_4ca)[0];}if(!_4cd){_4cd=document.createElement(_4ca);}if(!_4cd){return;}if(arguments[1]){if(this._isStringOrNumber(arguments[1])||(arguments[1] instanceof Array)){this._children(_4cd,arguments[1]);}else{var _4ce=this._attributes(arguments[1]);if(_4ce.length){try{_4cc.innerHTML="<"+_4ca+" "+_4ce+"></"+_4ca+">";}catch(e){}_4cd=_4cc.firstChild||null;if(!_4cd){_4cd=document.createElement(_4ca);for(attr in arguments[1]){_4cd[attr=="class"?"className":attr]=arguments[1][attr];}}if(_4cd.tagName!=_4ca){_4cd=_4cc.getElementsByTagName(_4ca)[0];}}}}if(arguments[2]){this._children(_4cd,arguments[2]);}return _4cd;},_text:function(text){return document.createTextNode(text);},_attributes:function(_4d0){var _4d1=[];for(attribute in _4d0){_4d1.push((attribute=="className"?"class":attribute)+"=\""+_4d0[attribute].toString().escapeHTML()+"\"");}return _4d1.join(" ");},_children:function(_4d2,_4d3){if(typeof _4d3=="object"){_4d3.flatten().each(function(e){if(typeof e=="object"){_4d2.appendChild(e);}else{if(Builder._isStringOrNumber(e)){_4d2.appendChild(Builder._text(e));}}});}else{if(Builder._isStringOrNumber(_4d3)){_4d2.appendChild(Builder._text(_4d3));}}},_isStringOrNumber:function(_4d5){return (typeof _4d5=="string"||typeof _4d5=="number");}};if(typeof Effect=="undefined"){throw ("controls.js requires including script.aculo.us' effects.js library");}var changeEventsDisabled=false;function reEnableChangeEvents(){changeEventsDisabled=false;}var Autocompleter={};Autocompleter.Base=function(){};Autocompleter.Base.prototype={baseInitialize:function(_4d6,_4d7,_4d8){this.element=$(_4d6);this.update=$(_4d7);this.hasFocus=false;this.changed=false;this.active=false;this.index=0;this.entryCount=0;if(this.setOptions){this.setOptions(_4d8);}else{this.options=_4d8||{};}this.options.paramName=this.options.paramName||this.element.name;this.options.tokens=this.options.tokens||[];this.options.frequency=this.options.frequency||0.4;this.options.minChars=this.options.minChars||1;this.options.onShow=this.options.onShow||function(_4d9,_4da){if(!_4da.style.position||_4da.style.position=="absolute"){_4da.style.position="absolute";Position.clone(_4d9,_4da,{setHeight:false,offsetTop:_4d9.offsetHeight});}Effect.Appear(_4da,{duration:0.15});};this.options.onHide=this.options.onHide||function(_4db,_4dc){new Effect.Fade(_4dc,{duration:0.15});};if(typeof (this.options.tokens)=="string"){this.options.tokens=new Array(this.options.tokens);}this.observer=null;this.element.setAttribute("autocomplete","off");Element.hide(this.update);Event.observe(this.element,"blur",this.onBlur.bindAsEventListener(this));Event.observe(this.element,"keypress",this.onKeyPress.bindAsEventListener(this));},show:function(){if(Element.getStyle(this.update,"display")=="none"){this.options.onShow(this.element,this.update);}if(!this.iefix&&(navigator.appVersion.indexOf("MSIE")>0)&&(navigator.userAgent.indexOf("Opera")<0)&&(Element.getStyle(this.update,"position")=="absolute")){new Insertion.After(this.update,"<iframe id=\""+this.update.id+"_iefix\" "+"style=\"display:none;position:absolute;filter:progid:DXImageTransform.Microsoft.Alpha(opacity=0);\" "+"src=\"javascript:false;\" frameborder=\"0\" scrolling=\"no\"></iframe>");this.iefix=$(this.update.id+"_iefix");}if(this.iefix){setTimeout(this.fixIEOverlapping.bind(this),50);}},fixIEOverlapping:function(){Position.clone(this.update,this.iefix,{setTop:(!this.update.style.height)});this.iefix.style.zIndex=1;this.update.style.zIndex=2;Element.show(this.iefix);},hide:function(){this.stopIndicator();if(Element.getStyle(this.update,"display")!="none"){this.options.onHide(this.element,this.update);}if(this.iefix){Element.hide(this.iefix);}},startIndicator:function(){if(this.options.indicator){Element.show(this.options.indicator);}},stopIndicator:function(){if(this.options.indicator){Element.hide(this.options.indicator);}},onKeyPress:function(_4dd){if(this.active){switch(_4dd.keyCode){case Event.KEY_TAB:case Event.KEY_RETURN:this.selectEntry();Event.stop(_4dd);case Event.KEY_ESC:this.hide();this.active=false;Event.stop(_4dd);return;case Event.KEY_LEFT:case Event.KEY_RIGHT:return;case Event.KEY_UP:this.markPrevious();this.render();if(navigator.appVersion.indexOf("AppleWebKit")>0){Event.stop(_4dd);}return;case Event.KEY_DOWN:this.markNext();this.render();if(navigator.appVersion.indexOf("AppleWebKit")>0){Event.stop(_4dd);}return;}}else{if(_4dd.keyCode==Event.KEY_TAB||_4dd.keyCode==Event.KEY_RETURN||(navigator.appVersion.indexOf("AppleWebKit")>0&&_4dd.keyCode==0)){return;}}this.changed=true;this.hasFocus=true;if(this.observer){clearTimeout(this.observer);}this.observer=setTimeout(this.onObserverEvent.bind(this),this.options.frequency*1000);},activate:function(){this.changed=false;this.hasFocus=true;this.getUpdatedChoices();},onHover:function(_4de){var _4df=Event.findElement(_4de,"LI");if(this.index!=_4df.autocompleteIndex){this.index=_4df.autocompleteIndex;this.render();}Event.stop(_4de);},onClick:function(_4e0){changeEventsDisabled=false;var _4e1=Event.findElement(_4e0,"LI");this.index=_4e1.autocompleteIndex;this.selectEntry();this.hide();},onBlur:function(_4e2){changeEventsDisabled=true;setTimeout(reEnableChangeEvents,250);setTimeout(this.hide.bind(this),250);this.hasFocus=false;this.active=false;},render:function(){if(this.entryCount>0){for(var i=0;i<this.entryCount;i++){this.index==i?Element.addClassName(this.getEntry(i),"selected"):Element.removeClassName(this.getEntry(i),"selected");}if(this.hasFocus){this.show();this.active=true;}}else{this.active=false;this.hide();}},markPrevious:function(){if(this.index>0){this.index--;}else{this.index=this.entryCount-1;}this.getEntry(this.index).scrollIntoView(true);},markNext:function(){if(this.index<this.entryCount-1){this.index++;}else{this.index=0;}this.getEntry(this.index).scrollIntoView(false);},getEntry:function(_4e4){return this.update.firstChild.childNodes[_4e4];},getCurrentEntry:function(){return this.getEntry(this.index);},selectEntry:function(){this.active=false;this.updateElement(this.getCurrentEntry());},updateElement:function(_4e5){if(this.options.updateElement){this.options.updateElement(_4e5);return;}var _4e6="";if(this.options.select){var _4e7=document.getElementsByClassName(this.options.select,_4e5)||[];if(_4e7.length>0){_4e6=Element.collectTextNodes(_4e7[0],this.options.select);}}else{_4e6=Element.collectTextNodesIgnoreClass(_4e5,"informal");}var _4e8=this.findLastToken();if(_4e8!=-1){var _4e9=this.element.value.substr(0,_4e8+1);var _4ea=this.element.value.substr(_4e8+1).match(/^\s+/);if(_4ea){_4e9+=_4ea[0];}this.element.value=_4e9+_4e6;}else{this.element.value=_4e6;}this.element.focus();if(this.options.afterUpdateElement){this.options.afterUpdateElement(this.element,_4e5);}},updateChoices:function(_4eb){if(!this.changed&&this.hasFocus){this.update.innerHTML=_4eb;Element.cleanWhitespace(this.update);Element.cleanWhitespace(this.update.firstChild);if(this.update.firstChild&&this.update.firstChild.childNodes){this.entryCount=this.update.firstChild.childNodes.length;for(var i=0;i<this.entryCount;i++){var _4ed=this.getEntry(i);_4ed.autocompleteIndex=i;this.addObservers(_4ed);}}else{this.entryCount=0;}this.stopIndicator();this.index=0;if(this.entryCount==1&&this.options.autoSelect){this.selectEntry();this.hide();}else{this.render();}}},addObservers:function(_4ee){Event.observe(_4ee,"mouseover",this.onHover.bindAsEventListener(this));Event.observe(_4ee,"click",this.onClick.bindAsEventListener(this));},onObserverEvent:function(){this.changed=false;if(this.getToken().length>=this.options.minChars){this.startIndicator();this.getUpdatedChoices();}else{this.active=false;this.hide();}},getToken:function(){var _4ef=this.findLastToken();if(_4ef!=-1){var ret=this.element.value.substr(_4ef+1).replace(/^\s+/,"").replace(/\s+$/,"");}else{var ret=this.element.value;}return /\n/.test(ret)?"":ret;},findLastToken:function(){var _4f2=-1;for(var i=0;i<this.options.tokens.length;i++){var _4f4=this.element.value.lastIndexOf(this.options.tokens[i]);if(_4f4>_4f2){_4f2=_4f4;}}return _4f2;}};Ajax.Autocompleter=Class.create();Object.extend(Object.extend(Ajax.Autocompleter.prototype,Autocompleter.Base.prototype),{initialize:function(_4f5,_4f6,url,_4f8){this.baseInitialize(_4f5,_4f6,_4f8);this.options.asynchronous=true;this.options.onComplete=this.onComplete.bind(this);this.options.defaultParams=this.options.parameters||null;this.url=url;},getUpdatedChoices:function(){entry=encodeURIComponent(this.options.paramName)+"="+encodeURIComponent(this.getToken());this.options.parameters=this.options.callback?this.options.callback(this.element,entry):entry;if(this.options.defaultParams){this.options.parameters+="&"+this.options.defaultParams;}new Ajax.Request(this.url,this.options);},onComplete:function(_4f9){this.updateChoices(_4f9.responseText);}});Autocompleter.Local=Class.create();Autocompleter.Local.prototype=Object.extend(new Autocompleter.Base(),{initialize:function(_4fa,_4fb,_4fc,_4fd){this.baseInitialize(_4fa,_4fb,_4fd);this.options.array=_4fc;},getUpdatedChoices:function(){this.updateChoices(this.options.selector(this));},setOptions:function(_4fe){this.options=Object.extend({choices:10,partialSearch:true,partialChars:2,ignoreCase:true,fullSearch:false,selector:function(_4ff){var ret=[];var _501=[];var _502=_4ff.getToken();var _503=0;for(var i=0;i<_4ff.options.array.length&&ret.length<_4ff.options.choices;i++){var elem=_4ff.options.array[i];var _506=_4ff.options.ignoreCase?elem.toLowerCase().indexOf(_502.toLowerCase()):elem.indexOf(_502);while(_506!=-1){if(_506==0&&elem.length!=_502.length){ret.push("<li><strong>"+elem.substr(0,_502.length)+"</strong>"+elem.substr(_502.length)+"</li>");break;}else{if(_502.length>=_4ff.options.partialChars&&_4ff.options.partialSearch&&_506!=-1){if(_4ff.options.fullSearch||/\s/.test(elem.substr(_506-1,1))){_501.push("<li>"+elem.substr(0,_506)+"<strong>"+elem.substr(_506,_502.length)+"</strong>"+elem.substr(_506+_502.length)+"</li>");break;}}}_506=_4ff.options.ignoreCase?elem.toLowerCase().indexOf(_502.toLowerCase(),_506+1):elem.indexOf(_502,_506+1);}}if(_501.length){ret=ret.concat(_501.slice(0,_4ff.options.choices-ret.length));}return "<ul>"+ret.join("")+"</ul>";}},_4fe||{});}});Field.scrollFreeActivate=function(_507){setTimeout(function(){Field.activate(_507);},1);};Ajax.InPlaceEditor=Class.create();Ajax.InPlaceEditor.defaultHighlightColor="#FFFF99";Ajax.InPlaceEditor.prototype={initialize:function(_508,url,_50a){this.url=url;this.element=$(_508);this.options=Object.extend({okButton:true,okText:"ok",cancelLink:true,cancelText:"cancel",savingText:"Saving...",clickToEditText:"Click to edit",okText:"ok",rows:1,onComplete:function(_50b,_50c){new Effect.Highlight(_50c,{startcolor:this.options.highlightcolor});},onFailure:function(_50d){alert("Error communicating with the server: "+_50d.responseText.stripTags());},callback:function(form){return Form.serialize(form);},handleLineBreaks:true,loadingText:"Loading...",savingClassName:"inplaceeditor-saving",loadingClassName:"inplaceeditor-loading",formClassName:"inplaceeditor-form",highlightcolor:Ajax.InPlaceEditor.defaultHighlightColor,highlightendcolor:"#FFFFFF",externalControl:null,submitOnBlur:false,ajaxOptions:{},evalScripts:false},_50a||{});if(!this.options.formId&&this.element.id){this.options.formId=this.element.id+"-inplaceeditor";if($(this.options.formId)){this.options.formId=null;}}if(this.options.externalControl){this.options.externalControl=$(this.options.externalControl);}this.originalBackground=Element.getStyle(this.element,"background-color");if(!this.originalBackground){this.originalBackground="transparent";}this.element.title=this.options.clickToEditText;this.onclickListener=this.enterEditMode.bindAsEventListener(this);this.mouseoverListener=this.enterHover.bindAsEventListener(this);this.mouseoutListener=this.leaveHover.bindAsEventListener(this);Event.observe(this.element,"click",this.onclickListener);Event.observe(this.element,"mouseover",this.mouseoverListener);Event.observe(this.element,"mouseout",this.mouseoutListener);if(this.options.externalControl){Event.observe(this.options.externalControl,"click",this.onclickListener);Event.observe(this.options.externalControl,"mouseover",this.mouseoverListener);Event.observe(this.options.externalControl,"mouseout",this.mouseoutListener);}},enterEditMode:function(evt){if(this.saving){return;}if(this.editing){return;}this.editing=true;this.onEnterEditMode();if(this.options.externalControl){Element.hide(this.options.externalControl);}Element.hide(this.element);this.createForm();this.element.parentNode.insertBefore(this.form,this.element);if(!this.options.loadTextURL){Field.scrollFreeActivate(this.editField);}if(evt){Event.stop(evt);}return false;},createForm:function(){this.form=document.createElement("form");this.form.id=this.options.formId;Element.addClassName(this.form,this.options.formClassName);this.form.onsubmit=this.onSubmit.bind(this);this.createEditField();if(this.options.textarea){var br=document.createElement("br");this.form.appendChild(br);}if(this.options.okButton){okButton=document.createElement("input");okButton.type="submit";okButton.value=this.options.okText;okButton.className="editor_ok_button";this.form.appendChild(okButton);}if(this.options.cancelLink){cancelLink=document.createElement("a");cancelLink.href="#";cancelLink.appendChild(document.createTextNode(this.options.cancelText));cancelLink.onclick=this.onclickCancel.bind(this);cancelLink.className="editor_cancel";this.form.appendChild(cancelLink);}},hasHTMLLineBreaks:function(_511){if(!this.options.handleLineBreaks){return false;}return _511.match(/<br/i)||_511.match(/<p>/i);},convertHTMLLineBreaks:function(_512){return _512.replace(/<br>/gi,"\n").replace(/<br\/>/gi,"\n").replace(/<\/p>/gi,"\n").replace(/<p>/gi,"");},createEditField:function(){var text;if(this.options.loadTextURL){text=this.options.loadingText;}else{text=this.getText();}var obj=this;if(this.options.rows==1&&!this.hasHTMLLineBreaks(text)){this.options.textarea=false;var _515=document.createElement("input");_515.obj=this;_515.type="text";_515.name="value";_515.value=text;_515.style.backgroundColor=this.options.highlightcolor;_515.className="editor_field";var size=this.options.size||this.options.cols||0;if(size!=0){_515.size=size;}if(this.options.submitOnBlur){_515.onblur=this.onSubmit.bind(this);}this.editField=_515;}else{this.options.textarea=true;var _517=document.createElement("textarea");_517.obj=this;_517.name="value";_517.value=this.convertHTMLLineBreaks(text);_517.rows=this.options.rows;_517.cols=this.options.cols||40;_517.className="editor_field";if(this.options.submitOnBlur){_517.onblur=this.onSubmit.bind(this);}this.editField=_517;}if(this.options.loadTextURL){this.loadExternalText();}this.form.appendChild(this.editField);},getText:function(){return this.element.innerHTML;},loadExternalText:function(){Element.addClassName(this.form,this.options.loadingClassName);this.editField.disabled=true;new Ajax.Request(this.options.loadTextURL,Object.extend({asynchronous:true,onComplete:this.onLoadedExternalText.bind(this)},this.options.ajaxOptions));},onLoadedExternalText:function(_518){Element.removeClassName(this.form,this.options.loadingClassName);this.editField.disabled=false;this.editField.value=_518.responseText.stripTags();Field.scrollFreeActivate(this.editField);},onclickCancel:function(){this.onComplete();this.leaveEditMode();return false;},onFailure:function(_519){this.options.onFailure(_519);if(this.oldInnerHTML){this.element.innerHTML=this.oldInnerHTML;this.oldInnerHTML=null;}return false;},onSubmit:function(){var form=this.form;var _51b=this.editField.value;this.onLoading();if(this.options.evalScripts){new Ajax.Request(this.url,Object.extend({parameters:this.options.callback(form,_51b),onComplete:this.onComplete.bind(this),onFailure:this.onFailure.bind(this),asynchronous:true,evalScripts:true},this.options.ajaxOptions));}else{new Ajax.Updater({success:this.element,failure:null},this.url,Object.extend({parameters:this.options.callback(form,_51b),onComplete:this.onComplete.bind(this),onFailure:this.onFailure.bind(this)},this.options.ajaxOptions));}if(arguments.length>1){Event.stop(arguments[0]);}return false;},onLoading:function(){this.saving=true;this.removeForm();this.leaveHover();this.showSaving();},showSaving:function(){this.oldInnerHTML=this.element.innerHTML;this.element.innerHTML=this.options.savingText;Element.addClassName(this.element,this.options.savingClassName);this.element.style.backgroundColor=this.originalBackground;Element.show(this.element);},removeForm:function(){if(this.form){if(this.form.parentNode){Element.remove(this.form);}this.form=null;}},enterHover:function(){if(this.saving){return;}this.element.style.backgroundColor=this.options.highlightcolor;if(this.effect){this.effect.cancel();}Element.addClassName(this.element,this.options.hoverClassName);},leaveHover:function(){if(this.options.backgroundColor){this.element.style.backgroundColor=this.oldBackground;}Element.removeClassName(this.element,this.options.hoverClassName);if(this.saving){return;}this.effect=new Effect.Highlight(this.element,{startcolor:this.options.highlightcolor,endcolor:this.options.highlightendcolor,restorecolor:this.originalBackground});},leaveEditMode:function(){Element.removeClassName(this.element,this.options.savingClassName);this.removeForm();this.leaveHover();this.element.style.backgroundColor=this.originalBackground;Element.show(this.element);if(this.options.externalControl){Element.show(this.options.externalControl);}this.editing=false;this.saving=false;this.oldInnerHTML=null;this.onLeaveEditMode();},onComplete:function(_51c){this.leaveEditMode();this.options.onComplete.bind(this)(_51c,this.element);},onEnterEditMode:function(){},onLeaveEditMode:function(){},dispose:function(){if(this.oldInnerHTML){this.element.innerHTML=this.oldInnerHTML;}this.leaveEditMode();Event.stopObserving(this.element,"click",this.onclickListener);Event.stopObserving(this.element,"mouseover",this.mouseoverListener);Event.stopObserving(this.element,"mouseout",this.mouseoutListener);if(this.options.externalControl){Event.stopObserving(this.options.externalControl,"click",this.onclickListener);Event.stopObserving(this.options.externalControl,"mouseover",this.mouseoverListener);Event.stopObserving(this.options.externalControl,"mouseout",this.mouseoutListener);}}};Ajax.InPlaceCollectionEditor=Class.create();Object.extend(Ajax.InPlaceCollectionEditor.prototype,Ajax.InPlaceEditor.prototype);Object.extend(Ajax.InPlaceCollectionEditor.prototype,{createEditField:function(){if(!this.cached_selectTag){var _51d=document.createElement("select");var _51e=this.options.collection||[];var _51f;_51e.each(function(e,i){_51f=document.createElement("option");_51f.value=(e instanceof Array)?e[0]:e;if((typeof this.options.value=="undefined")&&((e instanceof Array)?this.element.innerHTML==e[1]:e==_51f.value)){_51f.selected=true;}if(this.options.value==_51f.value){_51f.selected=true;}_51f.appendChild(document.createTextNode((e instanceof Array)?e[1]:e));_51d.appendChild(_51f);}.bind(this));this.cached_selectTag=_51d;}this.editField=this.cached_selectTag;if(this.options.loadTextURL){this.loadExternalText();}this.form.appendChild(this.editField);this.options.callback=function(form,_523){return "value="+encodeURIComponent(_523);};}});Form.Element.DelayedObserver=Class.create();Form.Element.DelayedObserver.prototype={initialize:function(_524,_525,_526){this.delay=_525||0.5;this.element=$(_524);this.callback=_526;this.timer=null;this.lastValue=$F(this.element);Event.observe(this.element,"keyup",this.delayedListener.bindAsEventListener(this));},delayedListener:function(_527){if(this.lastValue==$F(this.element)){return;}if(this.timer){clearTimeout(this.timer);}this.timer=setTimeout(this.onTimerEvent.bind(this),this.delay*1000);this.lastValue=$F(this.element);},onTimerEvent:function(){this.timer=null;this.callback(this.element,$F(this.element));}};function updateItem(list){list=$(list);var _529=list.getElementsByTagName("li");$(list.getAttribute("field")).value=$A(_529).map(getItemName).join(",");}function deleteItem(_52a){var list=$(_52a).parentNode;$(_52a).remove();updateItem(list);}function getItemName(_52c){return _52c.getElementsByTagName("span")[0].childNodes[0].nodeValue;}function addItem(list,item){item=item.replace(/[^A-Za-z0-9 ]/g,"");if(item.length<1){return;}var _52f=$(list);var _530=_52f.getElementsByTagName("li");for(var i=0;i<_530.length;++i){if(getItemName(_530[i])==item){return;}}var _532=+list+"_"+"item_"+_530.length;var li=Builder.node("li",{className:"removable_list_item"},[Builder.node("span",item)]);var _534=_52f.firstChild;while(_534.nextSibling){_534=_534.nextSibling;}_52f.insertBefore(li,_534);li.appendChild(Builder.node("span",{className:"command delete_button"},"[ - ]"));Behavior.applySelectedRule("li.removable_list_item .delete_button");updateItem(list);}var myrules={"li.removable_list_item .delete_button":function(_535){_535.onclick=function(){deleteItem(_535.parentNode);};}};Behavior.register(myrules);Array.prototype.indexOf=function(item){for(var i=0;i<this.length;i++){if(this[i]==item){return i;}}return -1;};Array.prototype.filter=function(test){var _539=[];for(var i=0;i<this.length;i++){if(test(this[i])){_539[_539.length]=this[i];}}return _539;};String.prototype.right=function(_53b){if(_53b>=this.length){return this;}else{return this.substr(this.length-_53b,_53b);}};String.prototype.trim=function(){return this.replace(/^\s+|\s+$/,"");};var Class={create:function(){return function(){this.initialize.apply(this,arguments);};}};Object.extend=function(_53c,_53d){for(var _53e in _53d){_53c[_53e]=_53d[_53e];}return _53c;};var DateBocks=Class.create();DateBocks.VERSION="3.0.0";DateBocks.prototype={dateType:"iso",messageSpanSuffix:"Msg",messageSpanErrorClass:"error",messageSpanSuccessClass:"",dateBocksElementId:"",autoRollOver:true,calendarAlign:"Br",calendarIfFormat:null,calendarFormatString:null,"monthNames":["January","February","March","April","May","June","July","August","September","October","November","December"],"weekdayNames":["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dateParsePatterns:[{re:/^tod|now/i,handler:function(db,bits){return new Date();}},{re:/^tom/i,handler:function(db,bits){var d=new Date();d.setDate(d.getDate()+1);return d;}},{re:/^yes/i,handler:function(db,bits){var d=new Date();d.setDate(d.getDate()-1);return d;}},{re:/^(\d{1,2})(st|nd|rd|th)?$/i,handler:function(db,bits){var d=new Date();var yyyy=d.getFullYear();var dd=parseInt(bits[1],10);var mm=d.getMonth();if(db.dateInRange(yyyy,mm,dd)){return db.getDateObj(yyyy,mm,dd);}}},{re:/^(\d{1,2})(?:st|nd|rd|th)? (?:of\s)?(\w+)$/i,handler:function(db,bits){var d=new Date();var yyyy=d.getFullYear();var dd=parseInt(bits[1],10);var mm=db.parseMonth(bits[2]);if(db.dateInRange(yyyy,mm,dd)){return db.getDateObj(yyyy,mm,dd);}}},{re:/^(\d{1,2})(?:st|nd|rd|th)? (?:of )?(\w+),? (\d{4})$/i,handler:function(db,bits){var d=new Date();d.setDate(parseInt(bits[1],10));d.setMonth(db.parseMonth(bits[2]));d.setYear(bits[3]);return d;}},{re:/^(\w+) (\d{1,2})(?:st|nd|rd|th)?$/i,handler:function(db,bits){var d=new Date();var yyyy=d.getFullYear();var dd=parseInt(bits[2],10);var mm=db.parseMonth(bits[1]);if(db.dateInRange(yyyy,mm,dd)){return db.getDateObj(yyyy,mm,dd);}}},{re:/^(\w+) (\d{1,2})(?:st|nd|rd|th)?,? (\d{4})$/i,handler:function(db,bits){var yyyy=parseInt(bits[3],10);var dd=parseInt(bits[2],10);var mm=db.parseMonth(bits[1]);if(db.dateInRange(yyyy,mm,dd)){return db.getDateObj(yyyy,mm,dd);}}},{re:/((next|last)\s(week|month|year))/i,handler:function(db,bits){var _563=new Date();var dd=_563.getDate();var mm=_563.getMonth();var yyyy=_563.getFullYear();switch(bits[3]){case "week":var _567=(bits[2]=="next")?(dd+7):(dd-7);_563.setDate(_567);break;case "month":var _568=(bits[2]=="next")?(mm+1):(mm-1);_563.setMonth(_568);break;case "year":var _569=(bits[2]=="next")?(yyyy+1):(yyyy-1);_563.setYear(_569);break;}return _563;}},{re:/^(next|this)?\s?(\w+)$/i,handler:function(db,bits){var d=new Date();var day=d.getDay();var _56e=db.parseWeekday(bits[2]);var _56f=_56e-day;if(_56e<=day){_56f+=7;}d.setDate(d.getDate()+_56f);return d;}},{re:/^last (\w+)$/i,handler:function(db,bits){var d=new Date();var wd=d.getDay();var nwd=db.parseWeekday(bits[1]);var _575=(-1*(wd+7-nwd))%7;if(0==_575){_575=-7;}d.setDate(d.getDate()+_575);return d;}},{re:/(\d{1,2})\/(\d{1,2})\/(\d{4})/,handler:function(db,bits){if(db.dateType=="dd/mm/yyyy"){var yyyy=parseInt(bits[3],10);var dd=parseInt(bits[1],10);var mm=parseInt(bits[2],10)-1;}else{var yyyy=parseInt(bits[3],10);var dd=parseInt(bits[2],10);var mm=parseInt(bits[1],10)-1;}if(db.dateInRange(yyyy,mm,dd)){return db.getDateObj(yyyy,mm,dd);}}},{re:/(\d{1,2})\/(\d{1,2})\/(\d{1,2})/,handler:function(db,bits){var d=new Date();var yyyy=d.getFullYear()-(d.getFullYear()%100)+parseInt(bits[3],10);var dd=parseInt(bits[2],10);var mm=parseInt(bits[1],10)-1;if(db.dateInRange(yyyy,mm,dd)){return db.getDateObj(yyyy,mm,dd);}}},{re:/(\d{1,2})\/(\d{1,2})/,handler:function(db,bits){var d=new Date();var yyyy=d.getFullYear();var dd=parseInt(bits[2],10);var mm=parseInt(bits[1],10)-1;if(db.dateInRange(yyyy,mm,dd)){return db.getDateObj(yyyy,mm,dd);}}},{re:/(\d{1,2})-(\d{1,2})-(\d{4})/,handler:function(db,bits){if(db.dateType=="dd-mm-yyyy"){var yyyy=parseInt(bits[3],10);var dd=parseInt(bits[1],10);var mm=parseInt(bits[2],10)-1;}else{var yyyy=parseInt(bits[3],10);var dd=parseInt(bits[2],10);var mm=parseInt(bits[1],10)-1;}if(db.dateInRange(yyyy,mm,dd)){return db.getDateObj(yyyy,mm,dd);}}},{re:/(\d{1,2})\.(\d{1,2})\.(\d{4})/,handler:function(db,bits){var dd=parseInt(bits[1],10);var mm=parseInt(bits[2],10)-1;var yyyy=parseInt(bits[3],10);if(db.dateInRange(yyyy,mm,dd)){return db.getDateObj(yyyy,mm,dd);}}},{re:/(\d{4})-(\d{1,2})-(\d{1,2})/,handler:function(db,bits){var yyyy=parseInt(bits[1],10);var dd=parseInt(bits[3],10);var mm=parseInt(bits[2],10)-1;if(db.dateInRange(yyyy,mm,dd)){return db.getDateObj(yyyy,mm,dd);}}},{re:/(\d{1,2})-(\d{1,2})-(\d{1,2})/,handler:function(db,bits){var d=new Date();var yyyy=d.getFullYear()-(d.getFullYear()%100)+parseInt(bits[1],10);var dd=parseInt(bits[3],10);var mm=parseInt(bits[2],10)-1;if(db.dateInRange(yyyy,mm,dd)){return db.getDateObj(yyyy,mm,dd);}}},{re:/(\d{1,2})-(\d{1,2})/,handler:function(db,bits){var d=new Date();var yyyy=d.getFullYear();var dd=parseInt(bits[2],10);var mm=parseInt(bits[1],10)-1;if(db.dateInRange(yyyy,mm,dd)){return db.getDateObj(yyyy,mm,dd);}}}],initialize:function(_5a8){Object.extend(this,_5a8);switch(this.dateType){case "mm/dd/yyyy":case "us":this.calendarIfFormat="%m/%d/%Y";this.calendarFormatString="mm/dd/yyyy";break;case "mm.dd.yyyy":case "de":this.calendarIfFormat="%m.%d.%Y";this.calendarFormatString="mm.dd.yyyy";break;case "dd/mm/yyyy":this.calendarIfFormat="%d/%m/%Y";this.calendarFormatString="dd/mm/yyyy";break;case "dd-mm-yyyy":this.calendarIfFormat="%d-%m-%Y";this.calendarFormatString="dd-mm-yyyy";break;case "yyyy-mm-dd":case "iso":case "default":default:this.calendarIfFormat="%Y-%m-%d";this.calendarFormatString="yyyy-mm-dd";break;}},parseMonth:function(_5a9){var _5aa=this.monthNames.filter(function(item){return new RegExp("^"+_5a9,"i").test(item);});if(_5aa.length==0){throw new Error("Invalid month string");}if(_5aa.length<1){throw new Error("Ambiguous month");}return this.monthNames.indexOf(_5aa[0]);},parseWeekday:function(_5ac){var _5ad=this.weekdayNames.filter(function(item){return new RegExp("^"+_5ac,"i").test(item);});if(_5ad.length==0){throw new Error("Invalid day string");}if(_5ad.length<1){throw new Error("Ambiguous weekday");}return this.weekdayNames.indexOf(_5ad[0]);},dateInRange:function(yyyy,mm,dd){if(mm<0||mm>11){throw new Error("Invalid month value.  Valid months values are 1 to 12");}if(!this.autoRollOver){var d=(11==mm)?new Date(yyyy+1,0,0):new Date(yyyy,mm+1,0);if(dd<1||dd>d.getDate()){throw new Error("Invalid date value.  Valid date values for "+this.monthNames[mm]+" are 1 to "+d.getDate().toString());}}return true;},getDateObj:function(yyyy,mm,dd){var obj=new Date();obj.setDate(1);obj.setYear(yyyy);obj.setMonth(mm);obj.setDate(dd);return obj;},parseDateString:function(s){var _5b8=this.dateParsePatterns;for(var i=0;i<_5b8.length;i++){var re=_5b8[i].re;var _5bb=_5b8[i].handler;var bits=re.exec(s);if(bits){return _5bb(this,bits);}}throw new Error("Invalid date string");},zeroPad:function(_5bd){if(_5bd<10){return "0"+_5bd;}else{return _5bd;}},magicDate:function(){var _5be=document.getElementById(this.dateBocksElementId);var _5bf=document.getElementById(_5be.id+this.messageSpanSuffix);try{var num=_5be.id.replace("deadline_","");if(!_5be.value){console.log("OO");if(num!=_5be.id){return changeField(num,"deadline");}}var d=this.parseDateString(_5be.value);var day=this.zeroPad(d.getDate());var _5c3=this.zeroPad(d.getMonth()+1);var year=d.getFullYear();switch(this.dateType){case "dd/mm/yyyy":_5be.value=day+"/"+_5c3+"/"+year;break;case "dd-mm-yyyy":_5be.value=day+"-"+_5c3+"-"+year;break;case "mm/dd/yyyy":case "us":_5be.value=_5c3+"/"+day+"/"+year;break;case "mm.dd.yyyy":case "de":_5be.value=_5c3+"."+day+"."+year;break;case "default":case "iso":case "yyyy-mm-dd":default:_5be.value=year+"-"+_5c3+"-"+day;break;}_5be.className="";if(_5bf){_5bf.innerHTML=d.toDateString();_5bf.className=this.messageSpanSuccessClass;}if(num!=_5be.id){changeField(num,"deadline");}}catch(e){if(_5bf){var _5c5=e.message;if(_5c5.indexOf("is null or not an object")>-1){_5c5="Invalid date string";}_5bf.innerHTML=_5c5;_5bf.className=this.messageSpanErrorClass;}}},trim:function(_5c6){return _5c6.replace(/^\s+|\s+$/,"");},keyObserver:function(_5c7,_5c8){var _5c9=_5c7.keyCode?_5c7.keyCode:((_5c7.which)?_5c7.which:_5c7.charCode);if(_5c9==13||_5c9==10){switch(_5c8){case "parse":this.magicDate();break;case "return":case "false":default:return false;break;}}},setDefaultFormatMessage:function(){document.getElementById(this.dateBocksElementId+"Msg").innerHTML=this.calendarFormatString;}};Calendar=function(_5ca,_5cb,_5cc,_5cd){this.activeDiv=null;this.currentDateEl=null;this.getDateStatus=null;this.getDateToolTip=null;this.getDateText=null;this.timeout=null;this.onSelected=_5cc||null;this.onClose=_5cd||null;this.dragging=false;this.hidden=false;this.minYear=1970;this.dateFormat=Calendar._TT["DEF_DATE_FORMAT"];this.ttDateFormat=Calendar._TT["TT_DATE_FORMAT"];this.isPopup=true;this.weekNumbers=true;this.firstDayOfWeek=typeof _5ca=="number"?_5ca:Calendar._FD;this.showsOtherMonths=false;this.dateStr=_5cb;this.ar_days=null;this.showsTime=false;this.time24=true;this.yearStep=2;this.hiliteToday=true;this.multiple=null;this.table=null;this.element=null;this.tbody=null;this.firstdayname=null;this.monthsCombo=null;this.yearsCombo=null;this.hilitedMonth=null;this.activeMonth=null;this.hilitedYear=null;this.activeYear=null;this.dateClicked=false;if(typeof Calendar._SDN=="undefined"){if(typeof Calendar._SDN_len=="undefined"){Calendar._SDN_len=3;}var ar=new Array();for(var i=8;i>0;){ar[--i]=Calendar._DN[i].substr(0,Calendar._SDN_len);}Calendar._SDN=ar;if(typeof Calendar._SMN_len=="undefined"){Calendar._SMN_len=3;}ar=new Array();for(var i=12;i>0;){ar[--i]=Calendar._MN[i].substr(0,Calendar._SMN_len);}Calendar._SMN=ar;}};Calendar._C=null;Calendar.is_ie=(/msie/i.test(navigator.userAgent)&&!/opera/i.test(navigator.userAgent));Calendar.is_ie5=(Calendar.is_ie&&/msie 5\.0/i.test(navigator.userAgent));Calendar.is_opera=/opera/i.test(navigator.userAgent);Calendar.is_khtml=/Konqueror|Safari|KHTML/i.test(navigator.userAgent);Calendar.getAbsolutePos=function(el){var SL=0,ST=0;var _5d3=/^div$/i.test(el.tagName);if(_5d3&&el.scrollLeft){SL=el.scrollLeft;}if(_5d3&&el.scrollTop){ST=el.scrollTop;}var r={x:el.offsetLeft-SL,y:el.offsetTop-ST};if(el.offsetParent){var tmp=this.getAbsolutePos(el.offsetParent);r.x+=tmp.x;r.y+=tmp.y;}return r;};Calendar.isRelated=function(el,evt){var _5d8=evt.relatedTarget;if(!_5d8){var type=evt.type;if(type=="mouseover"){_5d8=evt.fromElement;}else{if(type=="mouseout"){_5d8=evt.toElement;}}}while(_5d8){if(_5d8==el){return true;}_5d8=_5d8.parentNode;}return false;};Calendar.removeClass=function(el,_5db){if(!(el&&el.className)){return;}var cls=el.className.split(" ");var ar=new Array();for(var i=cls.length;i>0;){if(cls[--i]!=_5db){ar[ar.length]=cls[i];}}el.className=ar.join(" ");};Calendar.addClass=function(el,_5e0){Calendar.removeClass(el,_5e0);el.className+=" "+_5e0;};Calendar.getElement=function(ev){var f=Calendar.is_ie?window.event.srcElement:ev.currentTarget;while(f.nodeType!=1||/^div$/i.test(f.tagName)){f=f.parentNode;}return f;};Calendar.getTargetElement=function(ev){var f=Calendar.is_ie?window.event.srcElement:ev.target;while(f.nodeType!=1){f=f.parentNode;}return f;};Calendar.stopEvent=function(ev){ev||(ev=window.event);if(Calendar.is_ie){ev.cancelBubble=true;ev.returnValue=false;}else{ev.preventDefault();ev.stopPropagation();}return false;};Calendar.addEvent=function(el,_5e7,func){if(el.attachEvent){el.attachEvent("on"+_5e7,func);}else{if(el.addEventListener){el.addEventListener(_5e7,func,true);}else{el["on"+_5e7]=func;}}};Calendar.removeEvent=function(el,_5ea,func){if(el.detachEvent){el.detachEvent("on"+_5ea,func);}else{if(el.removeEventListener){el.removeEventListener(_5ea,func,true);}else{el["on"+_5ea]=null;}}};Calendar.createElement=function(type,_5ed){var el=null;if(document.createElementNS){el=document.createElementNS("http://www.w3.org/1999/xhtml",type);}else{el=document.createElement(type);}if(typeof _5ed!="undefined"){_5ed.appendChild(el);}return el;};Calendar._add_evs=function(el){with(Calendar){addEvent(el,"mouseover",dayMouseOver);addEvent(el,"mousedown",dayMouseDown);addEvent(el,"mouseout",dayMouseOut);if(is_ie){addEvent(el,"dblclick",dayMouseDblClick);el.setAttribute("unselectable",true);}}};Calendar.findMonth=function(el){if(typeof el.month!="undefined"){return el;}else{if(typeof el.parentNode.month!="undefined"){return el.parentNode;}}return null;};Calendar.findYear=function(el){if(typeof el.year!="undefined"){return el;}else{if(typeof el.parentNode.year!="undefined"){return el.parentNode;}}return null;};Calendar.showMonthsCombo=function(){var cal=Calendar._C;if(!cal){return false;}var cal=cal;var cd=cal.activeDiv;var mc=cal.monthsCombo;if(cal.hilitedMonth){Calendar.removeClass(cal.hilitedMonth,"hilite");}if(cal.activeMonth){Calendar.removeClass(cal.activeMonth,"active");}var mon=cal.monthsCombo.getElementsByTagName("div")[cal.date.getMonth()];Calendar.addClass(mon,"active");cal.activeMonth=mon;var s=mc.style;s.display="block";if(cd.navtype<0){s.left=cd.offsetLeft+"px";}else{var mcw=mc.offsetWidth;if(typeof mcw=="undefined"){mcw=50;}s.left=(cd.offsetLeft+cd.offsetWidth-mcw)+"px";}s.top=(cd.offsetTop+cd.offsetHeight)+"px";};Calendar.showYearsCombo=function(fwd){var cal=Calendar._C;if(!cal){return false;}var cal=cal;var cd=cal.activeDiv;var yc=cal.yearsCombo;if(cal.hilitedYear){Calendar.removeClass(cal.hilitedYear,"hilite");}if(cal.activeYear){Calendar.removeClass(cal.activeYear,"active");}cal.activeYear=null;var Y=cal.date.getFullYear()+(fwd?1:-1);var yr=yc.firstChild;var show=false;for(var i=12;i>0;--i){if(Y>=cal.minYear&&Y<=cal.maxYear){yr.innerHTML=Y;yr.year=Y;yr.style.display="block";show=true;}else{yr.style.display="none";}yr=yr.nextSibling;Y+=fwd?cal.yearStep:-cal.yearStep;}if(show){var s=yc.style;s.display="block";if(cd.navtype<0){s.left=cd.offsetLeft+"px";}else{var ycw=yc.offsetWidth;if(typeof ycw=="undefined"){ycw=50;}s.left=(cd.offsetLeft+cd.offsetWidth-ycw)+"px";}s.top=(cd.offsetTop+cd.offsetHeight)+"px";}};Calendar.tableMouseUp=function(ev){var cal=Calendar._C;if(!cal){return false;}if(cal.timeout){clearTimeout(cal.timeout);}var el=cal.activeDiv;if(!el){return false;}var _607=Calendar.getTargetElement(ev);ev||(ev=window.event);Calendar.removeClass(el,"active");if(_607==el||_607.parentNode==el){Calendar.cellClick(el,ev);}var mon=Calendar.findMonth(_607);var date=null;if(mon){date=new Date(cal.date);if(mon.month!=date.getMonth()){date.setMonth(mon.month);cal.setDate(date);cal.dateClicked=false;cal.callHandler();}}else{var year=Calendar.findYear(_607);if(year){date=new Date(cal.date);if(year.year!=date.getFullYear()){date.setFullYear(year.year);cal.setDate(date);cal.dateClicked=false;cal.callHandler();}}}with(Calendar){removeEvent(document,"mouseup",tableMouseUp);removeEvent(document,"mouseover",tableMouseOver);removeEvent(document,"mousemove",tableMouseOver);cal._hideCombos();_C=null;return stopEvent(ev);}};Calendar.tableMouseOver=function(ev){var cal=Calendar._C;if(!cal){return;}var el=cal.activeDiv;var _60e=Calendar.getTargetElement(ev);if(_60e==el||_60e.parentNode==el){Calendar.addClass(el,"hilite active");Calendar.addClass(el.parentNode,"rowhilite");}else{if(typeof el.navtype=="undefined"||(el.navtype!=50&&(el.navtype==0||Math.abs(el.navtype)>2))){Calendar.removeClass(el,"active");}Calendar.removeClass(el,"hilite");Calendar.removeClass(el.parentNode,"rowhilite");}ev||(ev=window.event);if(el.navtype==50&&_60e!=el){var pos=Calendar.getAbsolutePos(el);var w=el.offsetWidth;var x=ev.clientX;var dx;var _613=true;if(x>pos.x+w){dx=x-pos.x-w;_613=false;}else{dx=pos.x-x;}if(dx<0){dx=0;}var _614=el._range;var _615=el._current;var _616=Math.floor(dx/10)%_614.length;for(var i=_614.length;--i>=0;){if(_614[i]==_615){break;}}while(_616-->0){if(_613){if(--i<0){i=_614.length-1;}}else{if(++i>=_614.length){i=0;}}}var _618=_614[i];el.innerHTML=_618;cal.onUpdateTime();}var mon=Calendar.findMonth(_60e);if(mon){if(mon.month!=cal.date.getMonth()){if(cal.hilitedMonth){Calendar.removeClass(cal.hilitedMonth,"hilite");}Calendar.addClass(mon,"hilite");cal.hilitedMonth=mon;}else{if(cal.hilitedMonth){Calendar.removeClass(cal.hilitedMonth,"hilite");}}}else{if(cal.hilitedMonth){Calendar.removeClass(cal.hilitedMonth,"hilite");}var year=Calendar.findYear(_60e);if(year){if(year.year!=cal.date.getFullYear()){if(cal.hilitedYear){Calendar.removeClass(cal.hilitedYear,"hilite");}Calendar.addClass(year,"hilite");cal.hilitedYear=year;}else{if(cal.hilitedYear){Calendar.removeClass(cal.hilitedYear,"hilite");}}}else{if(cal.hilitedYear){Calendar.removeClass(cal.hilitedYear,"hilite");}}}return Calendar.stopEvent(ev);};Calendar.tableMouseDown=function(ev){if(Calendar.getTargetElement(ev)==Calendar.getElement(ev)){return Calendar.stopEvent(ev);}};Calendar.calDragIt=function(ev){var cal=Calendar._C;if(!(cal&&cal.dragging)){return false;}var posX;var posY;if(Calendar.is_ie){posY=window.event.clientY+document.body.scrollTop;posX=window.event.clientX+document.body.scrollLeft;}else{posX=ev.pageX;posY=ev.pageY;}cal.hideShowCovered();var st=cal.element.style;st.left=(posX-cal.xOffs)+"px";st.top=(posY-cal.yOffs)+"px";return Calendar.stopEvent(ev);};Calendar.calDragEnd=function(ev){var cal=Calendar._C;if(!cal){return false;}cal.dragging=false;with(Calendar){removeEvent(document,"mousemove",calDragIt);removeEvent(document,"mouseup",calDragEnd);tableMouseUp(ev);}cal.hideShowCovered();};Calendar.dayMouseDown=function(ev){var el=Calendar.getElement(ev);if(el.disabled){return false;}var cal=el.calendar;cal.activeDiv=el;Calendar._C=cal;if(el.navtype!=300){with(Calendar){if(el.navtype==50){el._current=el.innerHTML;addEvent(document,"mousemove",tableMouseOver);}else{addEvent(document,Calendar.is_ie5?"mousemove":"mouseover",tableMouseOver);}addClass(el,"hilite active");addEvent(document,"mouseup",tableMouseUp);}}else{if(cal.isPopup){cal._dragStart(ev);}}if(el.navtype==-1||el.navtype==1){if(cal.timeout){clearTimeout(cal.timeout);}cal.timeout=setTimeout("Calendar.showMonthsCombo()",250);}else{if(el.navtype==-2||el.navtype==2){if(cal.timeout){clearTimeout(cal.timeout);}cal.timeout=setTimeout((el.navtype>0)?"Calendar.showYearsCombo(true)":"Calendar.showYearsCombo(false)",250);}else{cal.timeout=null;}}return Calendar.stopEvent(ev);};Calendar.dayMouseDblClick=function(ev){Calendar.cellClick(Calendar.getElement(ev),ev||window.event);if(Calendar.is_ie){document.selection.empty();}};Calendar.dayMouseOver=function(ev){var el=Calendar.getElement(ev);if(Calendar.isRelated(el,ev)||Calendar._C||el.disabled){return false;}if(el.ttip){if(el.ttip.substr(0,1)=="_"){el.ttip=el.caldate.print(el.calendar.ttDateFormat)+el.ttip.substr(1);}el.calendar.tooltips.innerHTML=el.ttip;}if(el.navtype!=300){Calendar.addClass(el,"hilite");if(el.caldate){Calendar.addClass(el.parentNode,"rowhilite");}}return Calendar.stopEvent(ev);};Calendar.dayMouseOut=function(ev){with(Calendar){var el=getElement(ev);if(isRelated(el,ev)||_C||el.disabled){return false;}removeClass(el,"hilite");if(el.caldate){removeClass(el.parentNode,"rowhilite");}if(el.calendar){el.calendar.tooltips.innerHTML=_TT["SEL_DATE"];}return stopEvent(ev);}};Calendar.cellClick=function(el,ev){var cal=el.calendar;var _62e=false;var _62f=false;var date=null;if(typeof el.navtype=="undefined"){if(cal.currentDateEl){Calendar.removeClass(cal.currentDateEl,"selected");Calendar.addClass(el,"selected");_62e=(cal.currentDateEl==el);if(!_62e){cal.currentDateEl=el;}}cal.date.setDateOnly(el.caldate);date=cal.date;var _631=!(cal.dateClicked=!el.otherMonth);if(!_631&&!cal.currentDateEl){cal._toggleMultipleDate(new Date(date));}else{_62f=!el.disabled;}if(_631){cal._init(cal.firstDayOfWeek,date);}}else{if(el.navtype==200){Calendar.removeClass(el,"hilite");cal.callCloseHandler();return;}date=new Date(cal.date);if(el.navtype==0){date.setDateOnly(new Date());}cal.dateClicked=false;var year=date.getFullYear();var mon=date.getMonth();function setMonth(m){var day=date.getDate();var max=date.getMonthDays(m);if(day>max){date.setDate(max);}date.setMonth(m);}switch(el.navtype){case 400:Calendar.removeClass(el,"hilite");var text=Calendar._TT["ABOUT"];if(typeof text!="undefined"){text+=cal.showsTime?Calendar._TT["ABOUT_TIME"]:"";}else{text="Help and about box text is not translated into this language.\n"+"If you know this language and you feel generous please update\n"+"the corresponding file in \"lang\" subdir to match calendar-en.js\n"+"and send it back to <mihai_bazon@yahoo.com> to get it into the distribution  ;-)\n\n"+"Thank you!\n"+"http://dynarch.com/mishoo/calendar.epl\n";}alert(text);return;case -2:if(year>cal.minYear){date.setFullYear(year-1);}break;case -1:if(mon>0){setMonth(mon-1);}else{if(year-->cal.minYear){date.setFullYear(year);setMonth(11);}}break;case 1:if(mon<11){setMonth(mon+1);}else{if(year<cal.maxYear){date.setFullYear(year+1);setMonth(0);}}break;case 2:if(year<cal.maxYear){date.setFullYear(year+1);}break;case 100:cal.setFirstDayOfWeek(el.fdow);return;case 50:var _638=el._range;var _639=el.innerHTML;for(var i=_638.length;--i>=0;){if(_638[i]==_639){break;}}if(ev&&ev.shiftKey){if(--i<0){i=_638.length-1;}}else{if(++i>=_638.length){i=0;}}var _63b=_638[i];el.innerHTML=_63b;cal.onUpdateTime();return;case 0:if((typeof cal.getDateStatus=="function")&&cal.getDateStatus(date,date.getFullYear(),date.getMonth(),date.getDate())){return false;}break;}if(!date.equalsTo(cal.date)){cal.setDate(date);_62f=true;}else{if(el.navtype==0){_62f=_62e=true;}}}if(_62f){ev&&cal.callHandler();}if(_62e){Calendar.removeClass(el,"hilite");ev&&cal.callCloseHandler();}};Calendar.prototype.create=function(_par){var _63d=null;if(!_par){_63d=document.getElementsByTagName("body")[0];this.isPopup=true;}else{_63d=_par;this.isPopup=false;}this.date=this.dateStr?new Date(this.dateStr):new Date();var _63e=Calendar.createElement("table");this.table=_63e;_63e.cellSpacing=0;_63e.cellPadding=0;_63e.calendar=this;Calendar.addEvent(_63e,"mousedown",Calendar.tableMouseDown);var div=Calendar.createElement("div");this.element=div;div.className="calendar";if(this.isPopup){div.style.position="absolute";div.style.display="none";}div.appendChild(_63e);var _640=Calendar.createElement("thead",_63e);var cell=null;var row=null;var cal=this;var hh=function(text,cs,_647){cell=Calendar.createElement("td",row);cell.colSpan=cs;cell.className="button";if(_647!=0&&Math.abs(_647)<=2){cell.className+=" nav";}Calendar._add_evs(cell);cell.calendar=cal;cell.navtype=_647;cell.innerHTML="<div unselectable='on'>"+text+"</div>";return cell;};row=Calendar.createElement("tr",_640);var _648=6;(this.isPopup)&&--_648;(this.weekNumbers)&&++_648;hh("?",1,400).ttip=Calendar._TT["INFO"];this.title=hh("",_648,300);this.title.className="title";if(this.isPopup){this.title.ttip=Calendar._TT["DRAG_TO_MOVE"];this.title.style.cursor="move";hh("&#x00d7;",1,200).ttip=Calendar._TT["CLOSE"];}row=Calendar.createElement("tr",_640);row.className="headrow";this._nav_py=hh("&#x00ab;",1,-2);this._nav_py.ttip=Calendar._TT["PREV_YEAR"];this._nav_pm=hh("&#x2039;",1,-1);this._nav_pm.ttip=Calendar._TT["PREV_MONTH"];this._nav_now=hh(Calendar._TT["TODAY"],this.weekNumbers?4:3,0);this._nav_now.ttip=Calendar._TT["GO_TODAY"];this._nav_nm=hh("&#x203a;",1,1);this._nav_nm.ttip=Calendar._TT["NEXT_MONTH"];this._nav_ny=hh("&#x00bb;",1,2);this._nav_ny.ttip=Calendar._TT["NEXT_YEAR"];row=Calendar.createElement("tr",_640);row.className="daynames";if(this.weekNumbers){cell=Calendar.createElement("td",row);cell.className="name wn";cell.innerHTML=Calendar._TT["WK"];}for(var i=7;i>0;--i){cell=Calendar.createElement("td",row);if(!i){cell.navtype=100;cell.calendar=this;Calendar._add_evs(cell);}}this.firstdayname=(this.weekNumbers)?row.firstChild.nextSibling:row.firstChild;this._displayWeekdays();var _64a=Calendar.createElement("tbody",_63e);this.tbody=_64a;for(i=6;i>0;--i){row=Calendar.createElement("tr",_64a);if(this.weekNumbers){cell=Calendar.createElement("td",row);}for(var j=7;j>0;--j){cell=Calendar.createElement("td",row);cell.calendar=this;Calendar._add_evs(cell);}}if(this.showsTime){row=Calendar.createElement("tr",_64a);row.className="time";cell=Calendar.createElement("td",row);cell.className="time";cell.colSpan=2;cell.innerHTML=Calendar._TT["TIME"]||"&nbsp;";cell=Calendar.createElement("td",row);cell.className="time";cell.colSpan=this.weekNumbers?4:3;(function(){function makeTimePart(_64c,init,_64e,_64f){var part=Calendar.createElement("span",cell);part.className=_64c;part.innerHTML=init;part.calendar=cal;part.ttip=Calendar._TT["TIME_PART"];part.navtype=50;part._range=[];if(typeof _64e!="number"){part._range=_64e;}else{for(var i=_64e;i<=_64f;++i){var txt;if(i<10&&_64f>=10){txt="0"+i;}else{txt=""+i;}part._range[part._range.length]=txt;}}Calendar._add_evs(part);return part;}var hrs=cal.date.getHours();var mins=cal.date.getMinutes();var t12=!cal.time24;var pm=(hrs>12);if(t12&&pm){hrs-=12;}var H=makeTimePart("hour",hrs,t12?1:0,t12?12:23);var span=Calendar.createElement("span",cell);span.innerHTML=":";span.className="colon";var M=makeTimePart("minute",mins,0,59);var AP=null;cell=Calendar.createElement("td",row);cell.className="time";cell.colSpan=2;if(t12){AP=makeTimePart("ampm",pm?"pm":"am",["am","pm"]);}else{cell.innerHTML="&nbsp;";}cal.onSetTime=function(){var pm,hrs=this.date.getHours(),mins=this.date.getMinutes();if(t12){pm=(hrs>=12);if(pm){hrs-=12;}if(hrs==0){hrs=12;}AP.innerHTML=pm?"pm":"am";}H.innerHTML=(hrs<10)?("0"+hrs):hrs;M.innerHTML=(mins<10)?("0"+mins):mins;};cal.onUpdateTime=function(){var date=this.date;var h=parseInt(H.innerHTML,10);if(t12){if(/pm/i.test(AP.innerHTML)&&h<12){h+=12;}else{if(/am/i.test(AP.innerHTML)&&h==12){h=0;}}}var d=date.getDate();var m=date.getMonth();var y=date.getFullYear();date.setHours(h);date.setMinutes(parseInt(M.innerHTML,10));date.setFullYear(y);date.setMonth(m);date.setDate(d);this.dateClicked=false;this.callHandler();};})();}else{this.onSetTime=this.onUpdateTime=function(){};}var _661=Calendar.createElement("tfoot",_63e);row=Calendar.createElement("tr",_661);row.className="footrow";cell=hh(Calendar._TT["SEL_DATE"],this.weekNumbers?8:7,300);cell.className="ttip";if(this.isPopup){cell.ttip=Calendar._TT["DRAG_TO_MOVE"];cell.style.cursor="move";}this.tooltips=cell;div=Calendar.createElement("div",this.element);this.monthsCombo=div;div.className="combo";for(i=0;i<Calendar._MN.length;++i){var mn=Calendar.createElement("div");mn.className=Calendar.is_ie?"label-IEfix":"label";mn.month=i;mn.innerHTML=Calendar._SMN[i];div.appendChild(mn);}div=Calendar.createElement("div",this.element);this.yearsCombo=div;div.className="combo";for(i=12;i>0;--i){var yr=Calendar.createElement("div");yr.className=Calendar.is_ie?"label-IEfix":"label";div.appendChild(yr);}this._init(this.firstDayOfWeek,this.date);_63d.appendChild(this.element);};Calendar._keyEvent=function(ev){var cal=window._dynarch_popupCalendar;if(!cal||cal.multiple){return false;}(Calendar.is_ie)&&(ev=window.event);var act=(Calendar.is_ie||ev.type=="keypress"),K=ev.keyCode;if(ev.ctrlKey){switch(K){case 37:act&&Calendar.cellClick(cal._nav_pm);break;case 38:act&&Calendar.cellClick(cal._nav_py);break;case 39:act&&Calendar.cellClick(cal._nav_nm);break;case 40:act&&Calendar.cellClick(cal._nav_ny);break;default:return false;}}else{switch(K){case 32:Calendar.cellClick(cal._nav_now);break;case 27:act&&cal.callCloseHandler();break;case 37:case 38:case 39:case 40:if(act){var prev,x,y,ne,el,step;prev=K==37||K==38;step=(K==37||K==39)?1:7;function setVars(){el=cal.currentDateEl;var p=el.pos;x=p&15;y=p>>4;ne=cal.ar_days[y][x];}setVars();function prevMonth(){var date=new Date(cal.date);date.setDate(date.getDate()-step);cal.setDate(date);}function nextMonth(){var date=new Date(cal.date);date.setDate(date.getDate()+step);cal.setDate(date);}while(1){switch(K){case 37:if(--x>=0){ne=cal.ar_days[y][x];}else{x=6;K=38;continue;}break;case 38:if(--y>=0){ne=cal.ar_days[y][x];}else{prevMonth();setVars();}break;case 39:if(++x<7){ne=cal.ar_days[y][x];}else{x=0;K=40;continue;}break;case 40:if(++y<cal.ar_days.length){ne=cal.ar_days[y][x];}else{nextMonth();setVars();}break;}break;}if(ne){if(!ne.disabled){Calendar.cellClick(ne);}else{if(prev){prevMonth();}else{nextMonth();}}}}break;case 13:if(act){Calendar.cellClick(cal.currentDateEl,ev);}break;default:return false;}}return Calendar.stopEvent(ev);};Calendar.prototype._init=function(_66b,date){var _66d=new Date(),TY=_66d.getFullYear(),TM=_66d.getMonth(),TD=_66d.getDate();this.table.style.visibility="hidden";var year=date.getFullYear();if(year<this.minYear){year=this.minYear;date.setFullYear(year);}else{if(year>this.maxYear){year=this.maxYear;date.setFullYear(year);}}this.firstDayOfWeek=_66b;this.date=new Date(date);var _66f=date.getMonth();var mday=date.getDate();var _671=date.getMonthDays();date.setDate(1);var day1=(date.getDay()-this.firstDayOfWeek)%7;if(day1<0){day1+=7;}date.setDate(-day1);date.setDate(date.getDate()+1);var row=this.tbody.firstChild;var MN=Calendar._SMN[_66f];var _675=this.ar_days=new Array();var _676=Calendar._TT["WEEKEND"];var _677=this.multiple?(this.datesCells={}):null;for(var i=0;i<6;++i,row=row.nextSibling){var cell=row.firstChild;if(this.weekNumbers){cell.className="day wn";cell.innerHTML=date.getWeekNumber();cell=cell.nextSibling;}row.className="daysrow";var _67a=false,iday,dpos=_675[i]=[];for(var j=0;j<7;++j,cell=cell.nextSibling,date.setDate(iday+1)){iday=date.getDate();var wday=date.getDay();cell.className="day";cell.pos=i<<4|j;dpos[j]=cell;var _67d=(date.getMonth()==_66f);if(!_67d){if(this.showsOtherMonths){cell.className+=" othermonth";cell.otherMonth=true;}else{cell.className="emptycell";cell.innerHTML="&nbsp;";cell.disabled=true;continue;}}else{cell.otherMonth=false;_67a=true;}cell.disabled=false;cell.innerHTML=this.getDateText?this.getDateText(date,iday):iday;if(_677){_677[date.print("%Y%m%d")]=cell;}if(this.getDateStatus){var _67e=this.getDateStatus(date,year,_66f,iday);if(this.getDateToolTip){var _67f=this.getDateToolTip(date,year,_66f,iday);if(_67f){cell.title=_67f;}}if(_67e===true){cell.className+=" disabled";cell.disabled=true;}else{if(/disabled/i.test(_67e)){cell.disabled=true;}cell.className+=" "+_67e;}}if(!cell.disabled){cell.caldate=new Date(date);cell.ttip="_";if(!this.multiple&&_67d&&iday==mday&&this.hiliteToday){cell.className+=" selected";this.currentDateEl=cell;}if(date.getFullYear()==TY&&date.getMonth()==TM&&iday==TD){cell.className+=" today";cell.ttip+=Calendar._TT["PART_TODAY"];}if(_676.indexOf(wday.toString())!=-1){cell.className+=cell.otherMonth?" oweekend":" weekend";}}}if(!(_67a||this.showsOtherMonths)){row.className="emptyrow";}}this.title.innerHTML=Calendar._MN[_66f]+", "+year;this.onSetTime();this.table.style.visibility="visible";this._initMultipleDates();};Calendar.prototype._initMultipleDates=function(){if(this.multiple){if(Prototype){this.muliple.each(function(_680){var cell=this.datesCells[_680.key];var d=_680.value;if(!d){return;}if(cell){cell.className+=" selected";}});}else{for(var i in this.multiple){var cell=this.datesCells[i];var d=this.multiple[i];if(!d){continue;}if(cell){cell.className+=" selected";}}}}};Calendar.prototype._toggleMultipleDate=function(date){if(this.multiple){var ds=date.print("%Y%m%d");var cell=this.datesCells[ds];if(cell){var d=this.multiple[ds];if(!d){Calendar.addClass(cell,"selected");this.multiple[ds]=date;}else{Calendar.removeClass(cell,"selected");delete this.multiple[ds];}}}};Calendar.prototype.setDateToolTipHandler=function(_68a){this.getDateToolTip=_68a;};Calendar.prototype.setDate=function(date){if(!date.equalsTo(this.date)){this._init(this.firstDayOfWeek,date);}};Calendar.prototype.refresh=function(){this._init(this.firstDayOfWeek,this.date);};Calendar.prototype.setFirstDayOfWeek=function(_68c){this._init(_68c,this.date);this._displayWeekdays();};Calendar.prototype.setDateStatusHandler=Calendar.prototype.setDisabledHandler=function(_68d){this.getDateStatus=_68d;};Calendar.prototype.setRange=function(a,z){this.minYear=a;this.maxYear=z;};Calendar.prototype.callHandler=function(){if(this.onSelected){this.onSelected(this,this.date.print(this.dateFormat));}};Calendar.prototype.callCloseHandler=function(){if(this.onClose){this.onClose(this);}this.hideShowCovered();};Calendar.prototype.destroy=function(){var el=this.element.parentNode;el.removeChild(this.element);Calendar._C=null;window._dynarch_popupCalendar=null;};Calendar.prototype.reparent=function(_691){var el=this.element;el.parentNode.removeChild(el);_691.appendChild(el);};Calendar._checkCalendar=function(ev){var _694=window._dynarch_popupCalendar;if(!_694){return false;}var el=Calendar.is_ie?Calendar.getElement(ev):Calendar.getTargetElement(ev);for(;el!=null&&el!=_694.element;el=el.parentNode){}if(el==null){window._dynarch_popupCalendar.callCloseHandler();return Calendar.stopEvent(ev);}};Calendar.prototype.show=function(){var rows=this.table.getElementsByTagName("tr");for(var i=rows.length;i>0;){var row=rows[--i];Calendar.removeClass(row,"rowhilite");var _699=row.getElementsByTagName("td");for(var j=_699.length;j>0;){var cell=_699[--j];Calendar.removeClass(cell,"hilite");Calendar.removeClass(cell,"active");}}this.element.style.display="block";this.hidden=false;if(this.isPopup){window._dynarch_popupCalendar=this;Calendar.addEvent(document,"keydown",Calendar._keyEvent);Calendar.addEvent(document,"keypress",Calendar._keyEvent);Calendar.addEvent(document,"mousedown",Calendar._checkCalendar);}this.hideShowCovered();};Calendar.prototype.hide=function(){if(this.isPopup){Calendar.removeEvent(document,"keydown",Calendar._keyEvent);Calendar.removeEvent(document,"keypress",Calendar._keyEvent);Calendar.removeEvent(document,"mousedown",Calendar._checkCalendar);}this.element.style.display="none";this.hidden=true;this.hideShowCovered();};Calendar.prototype.showAt=function(x,y){var s=this.element.style;s.left=x+"px";s.top=y+"px";this.show();};Calendar.prototype.showAtElement=function(el,opts){var self=this;var p=Calendar.getAbsolutePos(el);if(!opts||typeof opts!="string"){this.showAt(p.x,p.y+el.offsetHeight);return true;}function fixPosition(box){if(box.x<0){box.x=0;}if(box.y<0){box.y=0;}var cp=document.createElement("div");var s=cp.style;s.position="absolute";s.right=s.bottom=s.width=s.height="0px";document.body.appendChild(cp);var br=Calendar.getAbsolutePos(cp);document.body.removeChild(cp);if(Calendar.is_ie){br.y+=document.body.scrollTop;br.x+=document.body.scrollLeft;}else{br.y+=window.scrollY;br.x+=window.scrollX;}var tmp=box.x+box.width-br.x;if(tmp>0){box.x-=tmp;}tmp=box.y+box.height-br.y;if(tmp>0){box.y-=tmp;}}this.element.style.display="block";Calendar.continuation_for_the_fucking_khtml_browser=function(){var w=self.element.offsetWidth;var h=self.element.offsetHeight;self.element.style.display="none";var _6aa=opts.substr(0,1);var _6ab="l";if(opts.length>1){_6ab=opts.substr(1,1);}switch(_6aa){case "T":p.y-=h;break;case "B":p.y+=el.offsetHeight;break;case "C":p.y+=(el.offsetHeight-h)/2;break;case "t":p.y+=el.offsetHeight-h;break;case "b":break;}switch(_6ab){case "L":p.x-=w;break;case "R":p.x+=el.offsetWidth;break;case "C":p.x+=(el.offsetWidth-w)/2;break;case "l":p.x+=el.offsetWidth-w;break;case "r":break;}p.width=w;p.height=h+40;self.monthsCombo.style.display="none";fixPosition(p);self.showAt(p.x,p.y);};if(Calendar.is_khtml){setTimeout("Calendar.continuation_for_the_fucking_khtml_browser()",10);}else{Calendar.continuation_for_the_fucking_khtml_browser();}};Calendar.prototype.setDateFormat=function(str){this.dateFormat=str;};Calendar.prototype.setTtDateFormat=function(str){this.ttDateFormat=str;};Calendar.prototype.parseDate=function(str,fmt){if(!fmt){fmt=this.dateFormat;}this.setDate(Date.parseDate(str,fmt));};Calendar.prototype.hideShowCovered=function(){if(!Calendar.is_ie&&!Calendar.is_opera){return;}function getVisib(obj){var _6b1=obj.style.visibility;if(!_6b1){if(document.defaultView&&typeof (document.defaultView.getComputedStyle)=="function"){if(!Calendar.is_khtml){_6b1=document.defaultView.getComputedStyle(obj,"").getPropertyValue("visibility");}else{_6b1="";}}else{if(obj.currentStyle){_6b1=obj.currentStyle.visibility;}else{_6b1="";}}}return _6b1;}var tags=new Array("applet","iframe","select");var el=this.element;var p=Calendar.getAbsolutePos(el);var EX1=p.x;var EX2=el.offsetWidth+EX1;var EY1=p.y;var EY2=el.offsetHeight+EY1;for(var k=tags.length;k>0;){var ar=document.getElementsByTagName(tags[--k]);var cc=null;for(var i=ar.length;i>0;){cc=ar[--i];p=Calendar.getAbsolutePos(cc);var CX1=p.x;var CX2=cc.offsetWidth+CX1;var CY1=p.y;var CY2=cc.offsetHeight+CY1;if(this.hidden||(CX1>EX2)||(CX2<EX1)||(CY1>EY2)||(CY2<EY1)){if(!cc.__msh_save_visibility){cc.__msh_save_visibility=getVisib(cc);}cc.style.visibility=cc.__msh_save_visibility;}else{if(!cc.__msh_save_visibility){cc.__msh_save_visibility=getVisib(cc);}cc.style.visibility="hidden";}}}};Calendar.prototype._displayWeekdays=function(){var fdow=this.firstDayOfWeek;var cell=this.firstdayname;var _6c3=Calendar._TT["WEEKEND"];for(var i=0;i<7;++i){cell.className="day name";var _6c5=(i+fdow)%7;if(i){cell.ttip=Calendar._TT["DAY_FIRST"].replace("%s",Calendar._DN[_6c5]);cell.navtype=100;cell.calendar=this;cell.fdow=_6c5;Calendar._add_evs(cell);}if(_6c3.indexOf(_6c5.toString())!=-1){Calendar.addClass(cell,"weekend");}cell.innerHTML=Calendar._SDN[(i+fdow)%7];cell=cell.nextSibling;}};Calendar.prototype._hideCombos=function(){this.monthsCombo.style.display="none";this.yearsCombo.style.display="none";};Calendar.prototype._dragStart=function(ev){if(this.dragging){return;}this.dragging=true;var posX;var posY;if(Calendar.is_ie){posY=window.event.clientY+document.body.scrollTop;posX=window.event.clientX+document.body.scrollLeft;}else{posY=ev.clientY+window.scrollY;posX=ev.clientX+window.scrollX;}var st=this.element.style;this.xOffs=posX-parseInt(st.left);this.yOffs=posY-parseInt(st.top);with(Calendar){addEvent(document,"mousemove",calDragIt);addEvent(document,"mouseup",calDragEnd);}};Date._MD=new Array(31,28,31,30,31,30,31,31,30,31,30,31);Date.SECOND=1000;Date.MINUTE=60*Date.SECOND;Date.HOUR=60*Date.MINUTE;Date.DAY=24*Date.HOUR;Date.WEEK=7*Date.DAY;Date.parseDate=function(str,fmt){var _6cc=new Date();var y=0;var m=-1;var d=0;var a=str.split(/\W+/);var b=fmt.match(/%./g);var i=0,j=0;var hr=0;var min=0;for(i=0;i<a.length;++i){if(!a[i]){continue;}switch(b[i]){case "%d":case "%e":d=parseInt(a[i],10);break;case "%m":m=parseInt(a[i],10)-1;break;case "%Y":case "%y":y=parseInt(a[i],10);(y<100)&&(y+=(y>29)?1900:2000);break;case "%b":case "%B":for(j=0;j<12;++j){if(Calendar._MN[j].substr(0,a[i].length).toLowerCase()==a[i].toLowerCase()){m=j;break;}}break;case "%H":case "%I":case "%k":case "%l":hr=parseInt(a[i],10);break;case "%P":case "%p":if(/pm/i.test(a[i])&&hr<12){hr+=12;}else{if(/am/i.test(a[i])&&hr>=12){hr-=12;}}break;case "%M":min=parseInt(a[i],10);break;}}if(isNaN(y)){y=_6cc.getFullYear();}if(isNaN(m)){m=_6cc.getMonth();}if(isNaN(d)){d=_6cc.getDate();}if(isNaN(hr)){hr=_6cc.getHours();}if(isNaN(min)){min=_6cc.getMinutes();}if(y!=0&&m!=-1&&d!=0){return new Date(y,m,d,hr,min,0);}y=0;m=-1;d=0;for(i=0;i<a.length;++i){if(a[i].search(/[a-zA-Z]+/)!=-1){var t=-1;for(j=0;j<12;++j){if(Calendar._MN[j].substr(0,a[i].length).toLowerCase()==a[i].toLowerCase()){t=j;break;}}if(t!=-1){if(m!=-1){d=m+1;}m=t;}}else{if(parseInt(a[i],10)<=12&&m==-1){m=a[i]-1;}else{if(parseInt(a[i],10)>31&&y==0){y=parseInt(a[i],10);(y<100)&&(y+=(y>29)?1900:2000);}else{if(d==0){d=a[i];}}}}}if(y==0){y=_6cc.getFullYear();}if(m!=-1&&d!=0){return new Date(y,m,d,hr,min,0);}return _6cc;};Date.prototype.getMonthDays=function(_6d6){var year=this.getFullYear();if(typeof _6d6=="undefined"){_6d6=this.getMonth();}if(((0==(year%4))&&((0!=(year%100))||(0==(year%400))))&&_6d6==1){return 29;}else{return Date._MD[_6d6];}};Date.prototype.getDayOfYear=function(){var now=new Date(this.getFullYear(),this.getMonth(),this.getDate(),0,0,0);var then=new Date(this.getFullYear(),0,0,0,0,0);var time=now-then;return Math.floor(time/Date.DAY);};Date.prototype.getWeekNumber=function(){var d=new Date(this.getFullYear(),this.getMonth(),this.getDate(),0,0,0);var DoW=d.getDay();d.setDate(d.getDate()-(DoW+6)%7+3);var ms=d.valueOf();d.setMonth(0);d.setDate(4);return Math.round((ms-d.valueOf())/(7*86400000))+1;};Date.prototype.equalsTo=function(date){return ((this.getFullYear()==date.getFullYear())&&(this.getMonth()==date.getMonth())&&(this.getDate()==date.getDate())&&(this.getHours()==date.getHours())&&(this.getMinutes()==date.getMinutes()));};Date.prototype.setDateOnly=function(date){var tmp=new Date(date);this.setDate(1);this.setFullYear(tmp.getFullYear());this.setMonth(tmp.getMonth());this.setDate(tmp.getDate());};Date.prototype.print=function(str){var m=this.getMonth();var d=this.getDate();var y=this.getFullYear();var wn=this.getWeekNumber();var w=this.getDay();var s={};var hr=this.getHours();var pm=(hr>=12);var ir=(pm)?(hr-12):hr;var dy=this.getDayOfYear();if(ir==0){ir=12;}var min=this.getMinutes();var sec=this.getSeconds();s["%a"]=Calendar._SDN[w];s["%A"]=Calendar._DN[w];s["%b"]=Calendar._SMN[m];s["%B"]=Calendar._MN[m];s["%C"]=1+Math.floor(y/100);s["%d"]=(d<10)?("0"+d):d;s["%e"]=d;s["%H"]=(hr<10)?("0"+hr):hr;s["%I"]=(ir<10)?("0"+ir):ir;s["%j"]=(dy<100)?((dy<10)?("00"+dy):("0"+dy)):dy;s["%k"]=hr;s["%l"]=ir;s["%m"]=(m<9)?("0"+(1+m)):(1+m);s["%M"]=(min<10)?("0"+min):min;s["%n"]="\n";s["%p"]=pm?"PM":"AM";s["%P"]=pm?"pm":"am";s["%s"]=Math.floor(this.getTime()/1000);s["%S"]=(sec<10)?("0"+sec):sec;s["%t"]="\t";s["%U"]=s["%W"]=s["%V"]=(wn<10)?("0"+wn):wn;s["%u"]=w+1;s["%w"]=w;s["%y"]=(""+y).substr(2,2);s["%Y"]=y;s["%%"]="%";var re=/%./g;if(!Calendar.is_ie5&&!Calendar.is_khtml){return str.replace(re,function(par){return s[par]||par;});}var a=str.match(re);for(var i=0;i<a.length;i++){var tmp=s[a[i]];if(tmp){re=new RegExp(a[i],"g");str=str.replace(re,tmp);}}return str;};Date.prototype.__msh_oldSetFullYear=Date.prototype.setFullYear;Date.prototype.setFullYear=function(y){var d=new Date(this);d.__msh_oldSetFullYear(y);if(d.getMonth()!=this.getMonth()){this.setDate(28);}this.__msh_oldSetFullYear(y);};window._dynarch_popupCalendar=null;Calendar.setup=function(_6f5){function param_default(_6f6,def){if(typeof _6f5[_6f6]=="undefined"){_6f5[_6f6]=def;}}param_default("inputField",null);param_default("displayArea",null);param_default("button",null);param_default("help",null);param_default("eventName","click");param_default("ifFormat","%Y/%m/%d");param_default("daFormat","%Y/%m/%d");param_default("singleClick",true);param_default("disableFunc",null);param_default("dateStatusFunc",_6f5["disableFunc"]);param_default("dateText",null);param_default("firstDay",null);param_default("align","Br");param_default("range",[1900,2999]);param_default("weekNumbers",true);param_default("flat",null);param_default("flatCallback",null);param_default("onSelect",null);param_default("onClose",null);param_default("onUpdate",null);param_default("date",null);param_default("showsTime",false);param_default("timeFormat","24");param_default("electric",true);param_default("step",2);param_default("position",null);param_default("cache",false);param_default("showOthers",false);param_default("multiple",null);var tmp=["inputField","displayArea","button","help"];for(var i=0;i<tmp.length;i++){if(typeof _6f5[tmp[i]]=="string"){_6f5[tmp[i]]=document.getElementById(_6f5[tmp[i]]);}}if(!(_6f5.flat||_6f5.multiple||_6f5.inputField||_6f5.displayArea||_6f5.button)){alert("Calendar.setup:\n  Nothing to setup (no fields found).  Please check your code");return false;}function onSelect(cal){var p=cal.params;var _6fc=(cal.dateClicked||p.electric);if(_6fc&&p.inputField){p.inputField.value=cal.date.print(p.ifFormat);if(typeof p.inputField.onchange=="function"){p.inputField.onchange();}}if(_6fc&&p.displayArea){p.displayArea.innerHTML=cal.date.print(p.daFormat);}if(_6fc&&typeof p.onUpdate=="function"){p.onUpdate(cal);}if(_6fc&&p.flat){if(typeof p.flatCallback=="function"){p.flatCallback(cal);}}if(_6fc&&p.singleClick&&cal.dateClicked){cal.callCloseHandler();}}if(_6f5.flat!=null){if(typeof _6f5.flat=="string"){_6f5.flat=document.getElementById(_6f5.flat);}if(!_6f5.flat){alert("Calendar.setup:\n  Flat specified but can't find parent.");return false;}var cal=new Calendar(_6f5.firstDay,_6f5.date,_6f5.onSelect||onSelect);cal.showsOtherMonths=_6f5.showOthers;cal.showsTime=_6f5.showsTime;cal.time24=(_6f5.timeFormat=="24");cal.params=_6f5;cal.weekNumbers=_6f5.weekNumbers;cal.setRange(_6f5.range[0],_6f5.range[1]);cal.setDateStatusHandler(_6f5.dateStatusFunc);cal.getDateText=_6f5.dateText;if(_6f5.ifFormat){cal.setDateFormat(_6f5.ifFormat);}if(_6f5.inputField&&typeof _6f5.inputField.value=="string"){cal.parseDate(_6f5.inputField.value);}cal.create(_6f5.flat);cal.show();return false;}var _6fe=_6f5.help;_6fe["on"+_6f5.eventName]=function(){DateBocks.windowOpenCenter("/calendar-help.html","dateBocksHelp","width=500,height=430,autocenter=true");};var _6ff=_6f5.button||_6f5.displayArea||_6f5.inputField;_6ff["on"+_6f5.eventName]=function(){var _700=_6f5.inputField||_6f5.displayArea;var _701=_6f5.inputField?_6f5.ifFormat:_6f5.daFormat;var _702=false;var cal=window.calendar;if(_700){_6f5.date=Date.parseDate(_700.value||_700.innerHTML,_701);}if(!(cal&&_6f5.cache)){window.calendar=cal=new Calendar(_6f5.firstDay,_6f5.date,_6f5.onSelect||onSelect,_6f5.onClose||function(cal){cal.hide();});cal.showsTime=_6f5.showsTime;cal.time24=(_6f5.timeFormat=="24");cal.weekNumbers=_6f5.weekNumbers;_702=true;}else{if(_6f5.date){cal.setDate(_6f5.date);}cal.hide();}if(_6f5.multiple){cal.multiple={};for(var i=_6f5.multiple.length;--i>=0;){var d=_6f5.multiple[i];var ds=d.print("%Y%m%d");cal.multiple[ds]=d;}}cal.showsOtherMonths=_6f5.showOthers;cal.yearStep=_6f5.step;cal.setRange(_6f5.range[0],_6f5.range[1]);cal.params=_6f5;cal.setDateStatusHandler(_6f5.dateStatusFunc);cal.getDateText=_6f5.dateText;cal.setDateFormat(_701);if(_702){cal.create();}cal.refresh();if(!_6f5.position){cal.showAtElement(_6f5.button||_6f5.displayArea||_6f5.inputField,_6f5.align);}else{cal.showAt(_6f5.position[0],_6f5.position[1]);}return false;};return cal;};Calendar._DN=new Array("Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday");Calendar._SDN=new Array("Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sun");Calendar._FD=0;Calendar._MN=new Array("January","February","March","April","May","June","July","August","September","October","November","December");Calendar._SMN=new Array("Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec");Calendar._TT={};Calendar._TT["INFO"]="About the calendar";Calendar._TT["ABOUT"]="DHTML Date/Time Selector\n"+"(c) dynarch.com 2002-2005 / Author: Mihai Bazon\n"+"For latest version visit: http://www.dynarch.com/projects/calendar/\n"+"Distributed under GNU LGPL.  See http://gnu.org/licenses/lgpl.html for details."+"\n\n"+"Date selection:\n"+"- Use the \xab, \xbb buttons to select year\n"+"- Use the "+String.fromCharCode(8249)+", "+String.fromCharCode(8250)+" buttons to select month\n"+"- Hold mouse button on any of the above buttons for faster selection.";Calendar._TT["ABOUT_TIME"]="\n\n"+"Time selection:\n"+"- Click on any of the time parts to increase it\n"+"- or Shift-click to decrease it\n"+"- or click and drag for faster selection.";Calendar._TT["PREV_YEAR"]="Prev. year (hold for menu)";Calendar._TT["PREV_MONTH"]="Prev. month (hold for menu)";Calendar._TT["GO_TODAY"]="Go Today";Calendar._TT["NEXT_MONTH"]="Next month (hold for menu)";Calendar._TT["NEXT_YEAR"]="Next year (hold for menu)";Calendar._TT["SEL_DATE"]="Select date";Calendar._TT["DRAG_TO_MOVE"]="Drag to move";Calendar._TT["PART_TODAY"]=" (today)";Calendar._TT["DAY_FIRST"]="Display %s first";Calendar._TT["WEEKEND"]="0,6";Calendar._TT["CLOSE"]="Close";Calendar._TT["TODAY"]="Today";Calendar._TT["TIME_PART"]="(Shift-)Click or drag to change value";Calendar._TT["DEF_DATE_FORMAT"]="%Y-%m-%d";Calendar._TT["TT_DATE_FORMAT"]="%a, %b %e";Calendar._TT["WK"]="wk";Calendar._TT["TIME"]="Time:";DateBocks.windowProperties=function(_708){var _709=new RegExp("");_709.compile("(?:^|,)([^=]+)=(\\d+|yes|no|auto)","gim");var _70a=new Object();var _70b;while((_70b=_709.exec(_708))!=null){var _70c=_70b[2];if(_70c==("yes"||"1")){_70a[_70b[1]]=true;}else{if((!isNaN(_70c)&&_70c!=0)||("auto"==_70c)){_70a[_70b[1]]=_70c;}}}return _70a;};DateBocks.windowOpenCenter=function(url,name,_70f){try{var _710=DateBocks.windowProperties(_70f);w=parseInt(_710["width"]);h=parseInt(_710["height"]);w=w>0?w:640;h=h>0?h:480;if(screen){t=(screen.height-h)/2;l=(screen.width-w)/2;}else{t=250;l=250;}_70f=(w>0?",width="+w:"")+(h>0?",height="+h:"")+(t>0?",top="+t:"")+(l>0?",left="+l:"")+","+_70f.replace(/,(width=\s*\d+\s*|height=\s*\d+\s*|top=\s*\d+\s*||left=\s*\d+\s*)/gi,"");return window.open(url,name,_70f);}catch(e){}};